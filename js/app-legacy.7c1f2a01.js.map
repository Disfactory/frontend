{"version":3,"file":"js/app-legacy.7c1f2a01.js","mappings":"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ACED,GAAI,kBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,UAChBC,OAAQ,CACN,KACA,UACA,WAEFF,MAAO,CACL,aAAc,UAGlB,CACED,GAAI,eACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,UAChBC,OAAQ,CACN,KACA,UACA,QAEFF,MAAO,CACL,aAAc,YAGlB,CACED,GAAI,oBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,UAChBC,OAAQ,CACN,KACA,UACA,aAEFF,MAAO,CACL,aAAc,YAGlB,CACED,GAAI,iBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,UAChBC,OAAQ,CACN,MACA,WAEFF,MAAO,CACL,aAAc,UACd,aAAc,IAGlB,CACED,GAAI,iBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,UAChBC,OAAQ,CACN,MACA,CACE,KACA,UACA,UAEF,CACE,KACA,eACA,UAEF,CACE,KACA,eACA,YAGJF,MAAO,CACL,aAAc,YAGlB,CACED,GAAI,QACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBD,MAAO,CACL,aAAc,YAGlB,CACED,GAAI,6BACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,UAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,GACA,GACA,MAIN,CACED,GAAI,sBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,UAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,EACA,GAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,GACA,GACA,MAIN,CACED,GAAI,6BACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,EACA,GAEF,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,KAIN,CACED,GAAI,sBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,UACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,GACA,GACA,MAIN,CACED,GAAI,8BACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,gBAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,EACA,GAEF,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,KAIN,CACED,GAAI,uBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,gBAGJF,MAAO,CACL,aAAc,UACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,MAIN,CACED,GAAI,6BACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,EACA,GAEF,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,KAIN,CACED,GAAI,sBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,UACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,MAIN,CACED,GAAI,+BACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,YAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,EACA,GAEF,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,KAIN,CACED,GAAI,wBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,YAGJF,MAAO,CACL,aAAc,UACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,MAIN,CACED,GAAI,yBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,gBAChBC,OAAQ,CACN,KACA,CACE,MACA,aAEF,YAEFF,MAAO,CACL,aAAc,UACd,aAAc,KAGlB,CACED,GAAI,YACJlF,KAAM,iBACNoF,OAAQ,YACR,eAAgB,YAChBD,MAAO,CACL,uBAAwB,UACxB,wBAAyB,CACvB,YACA,CACE,MACA,WAGJ,yBAA0B,KAG9B,CACED,GAAI,cACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,KACA,aACA,GAEF,CACE,KACA,YACA,UAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,EACA,GAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,GACA,GACA,MAIN,CACED,GAAI,qBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,KACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,KAIN,CACED,GAAI,cACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,KACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,QACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,GACA,GACA,MAIN,CACED,GAAI,sBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,KACA,aACA,GAEF,CACE,KACA,YACA,gBAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,KAIN,CACED,GAAI,eACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,KACA,aACA,GAEF,CACE,KACA,YACA,gBAGJF,MAAO,CACL,aAAc,UACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,MAIN,CACED,GAAI,qBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,KACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,KAIN,CACED,GAAI,cACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,KACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,UACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,MAIN,CACED,GAAI,uBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,KACA,aACA,GAEF,CACE,KACA,YACA,YAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,KAIN,CACED,GAAI,gBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,KACA,aACA,GAEF,CACE,KACA,YACA,YAGJF,MAAO,CACL,aAAc,UACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,MAIN,CACED,GAAI,kBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,UAChBC,OAAQ,CACN,MACA,CACE,KACA,YACA,YAGJF,MAAO,CACL,aAAc,UACd,aAAc,IAGlB,CACED,GAAI,yBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,UAChBC,OAAQ,CACN,MACA,CACE,KACA,YACA,YAGJF,MAAO,CACL,aAAc,UACd,aAAc,GACd,iBAAkB,CAChB,EACA,MAIN,CACED,GAAI,aACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,aAChBD,MAAO,CACL,aAAc,UACd,aAAc,GACd,iBAAkB,CAChB,EACA,KAIN,CACED,GAAI,+BACJlF,KAAM,SACNoF,OAAQ,YACR,eAAgB,gBAChBN,QAAS,GACTQ,OAAQ,CACN,mBAAoB,OACpB,YAAa,CACX,qBACA,oBAEF,aAAc,CACZ,MACA,QAEF,YAAa,GACb,sBAAuB,IAEzBH,MAAO,CACL,aAAc,QACd,kBAAmB,UACnB,kBAAmB,IAGvB,CACED,GAAI,6BACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,UAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,GACA,GACA,MAIN,CACED,GAAI,sBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,UAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,EACA,GAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,GACA,GACA,MAIN,CACED,GAAI,6BACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,KAIN,CACED,GAAI,sBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,QACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,GACA,GACA,MAIN,CACED,GAAI,8BACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,gBAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,GACA,EACA,KACA,KAIN,CACED,GAAI,uBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,gBAGJF,MAAO,CACL,aAAc,UACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,MAIN,CACED,GAAI,6BACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,KAIN,CACED,GAAI,sBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,eAGJF,MAAO,CACL,aAAc,UACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,MAIN,CACED,GAAI,+BACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,YAGJF,MAAO,CACL,aAAc,UACd,iBAAkB,CAChB,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,IAEF,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,KAIN,CACED,GAAI,wBACJlF,KAAM,OACNoF,OAAQ,YACR,eAAgB,QAChBC,OAAQ,CACN,MACA,CACE,IACA,aACA,GAEF,CACE,KACA,YACA,YAGJF,MAAO,CACL,aAAc,UACd,aAAc,CACZ,cACA,CACE,cACA,KAEF,CACE,QAEF,EACA,EACA,IACA,GACA,GACA,MAIN,CACED,GAAI,eACJlF,KAAM,SACNoF,OAAQ,YACR,eAAgB,QAChBN,QAAS,GACTQ,OAAQ,CACN,mBAAoB,OACpB,YAAa,CACX,qBACA,oBAEF,aAAc,CACZ,MACA,QAEF,YAAa,IAEfH,MAAO,CACL,aAAc,UACd,kBAAmB,QACnB,kBAAmB,IAGvB,CACED,GAAI,OACJlF,KAAM,OACNoF,OAAQ,YACR,e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","sources":["webpack://frontend/./src/lib/map.ts","webpack://frontend/./src/App.vue","webpack://frontend/./src/components/Map.vue","webpack://frontend/./src/components/DisplaySettingBottomSheet.vue","webpack://frontend/./src/symbols.ts","webpack://frontend/./src/components/SwitchMapModeButton.vue","webpack://frontend/./src/types.ts","webpack://frontend/./src/lib/image.ts","webpack://frontend/./src/lib/layerStyle.ts","webpack://frontend/./src/lib/utils/factoryPointCache.ts","webpack://frontend/./src/lib/useMapMode.ts","webpack://frontend/src/components/SwitchMapModeButton.vue","webpack://frontend/./src/components/SwitchMapModeButton.vue?d81b","webpack://frontend/./src/components/SwitchMapModeButton.vue?762d","webpack://frontend/src/components/DisplaySettingBottomSheet.vue","webpack://frontend/./src/components/DisplaySettingBottomSheet.vue?6938","webpack://frontend/./src/components/DisplaySettingBottomSheet.vue?8045","webpack://frontend/./src/lib/apiConfig.ts","webpack://frontend/./src/api/index.ts","webpack://frontend/./src/lib/useGA.ts","webpack://frontend/./src/lib/browserCheck.ts","webpack://frontend/./src/lib/hooks.ts","webpack://frontend/./src/lib/appState.ts","webpack://frontend/./src/lib/useAlert.ts","webpack://frontend/./src/lib/permalink.ts","webpack://frontend/./src/lib/utils.ts","webpack://frontend/src/components/Map.vue","webpack://frontend/./src/components/Map.vue?6543","webpack://frontend/./src/components/Map.vue?292a","webpack://frontend/./src/components/AppAlert.vue","webpack://frontend/src/components/AppAlert.vue","webpack://frontend/./src/components/AppAlert.vue?2674","webpack://frontend/./src/components/AppAlert.vue?8e09","webpack://frontend/./src/components/CreateFactorySteps.vue","webpack://frontend/./src/lib/imageUpload.ts","webpack://frontend/./src/components/ImageUploadForm.vue","webpack://frontend/src/components/ImageUploadForm.vue","webpack://frontend/./src/components/ImageUploadForm.vue?ec2f","webpack://frontend/./src/components/ImageUploadForm.vue?ecfd","webpack://frontend/./src/components/ConfirmFactory.vue","webpack://frontend/./src/components/Minimap.vue","webpack://frontend/src/components/Minimap.vue","webpack://frontend/./src/components/Minimap.vue?d58d","webpack://frontend/./src/components/Minimap.vue?bb69","webpack://frontend/src/components/ConfirmFactory.vue","webpack://frontend/./src/components/ConfirmFactory.vue?d8d9","webpack://frontend/./src/components/ConfirmFactory.vue?bcba","webpack://frontend/./src/lib/useBackPressed.ts","webpack://frontend/src/components/CreateFactorySteps.vue","webpack://frontend/./src/components/CreateFactorySteps.vue?0e83","webpack://frontend/./src/components/CreateFactorySteps.vue?fd0a","webpack://frontend/./src/components/UpdateFactorySteps.vue","webpack://frontend/src/components/UpdateFactorySteps.vue","webpack://frontend/./src/components/UpdateFactorySteps.vue?2daa","webpack://frontend/./src/components/UpdateFactorySteps.vue?bac3","webpack://frontend/./src/components/FactoryDetailPage.vue","webpack://frontend/./src/lib/factory.ts","webpack://frontend/./src/lib/hooks/useScroll.ts","webpack://frontend/./src/components/ImgurFallbackImage.vue","webpack://frontend/src/components/ImgurFallbackImage.vue","webpack://frontend/./src/components/ImgurFallbackImage.vue?23a9","webpack://frontend/./src/components/ImgurFallbackImage.vue?edee","webpack://frontend/src/components/FactoryDetailPage.vue","webpack://frontend/./src/components/FactoryDetailPage.vue?6ad6","webpack://frontend/./src/components/FactoryDetailPage.vue?8422","webpack://frontend/./src/components/AboutModal.vue","webpack://frontend/./src/components/AppModal.vue","webpack://frontend/src/components/AppModal.vue","webpack://frontend/./src/components/AppModal.vue?fdb5","webpack://frontend/./src/components/AppModal.vue?fa82","webpack://frontend/src/components/AboutModal.vue","webpack://frontend/./src/components/AboutModal.vue?9ea7","webpack://frontend/./src/components/AboutModal.vue?7a7f","webpack://frontend/./src/components/ContactModal.vue","webpack://frontend/src/components/ContactModal.vue","webpack://frontend/./src/components/ContactModal.vue?519c","webpack://frontend/./src/components/ContactModal.vue?6cad","webpack://frontend/./src/components/GettingStartedModal.vue","webpack://frontend/./src/components/AppButton.vue","webpack://frontend/src/components/AppButton.vue","webpack://frontend/./src/components/AppButton.vue?979e","webpack://frontend/./src/components/AppButton.vue?ca45","webpack://frontend/src/components/GettingStartedModal.vue","webpack://frontend/./src/components/GettingStartedModal.vue?7506","webpack://frontend/./src/components/GettingStartedModal.vue?fb86","webpack://frontend/./src/components/TutorialModal.vue","webpack://frontend/src/components/TutorialModal.vue","webpack://frontend/./src/components/TutorialModal.vue?5aee","webpack://frontend/./src/components/TutorialModal.vue?9928","webpack://frontend/./src/components/SafetyModal.vue","webpack://frontend/src/components/SafetyModal.vue","webpack://frontend/./src/components/SafetyModal.vue?8241","webpack://frontend/./src/components/SafetyModal.vue?852e","webpack://frontend/./src/components/IOSVersionAlertModal.vue","webpack://frontend/src/components/IOSVersionAlertModal.vue","webpack://frontend/./src/components/IOSVersionAlertModal.vue?ba78","webpack://frontend/./src/components/IOSVersionAlertModal.vue?ecbd","webpack://frontend/./src/components/ApiConfigModal.vue","webpack://frontend/src/components/ApiConfigModal.vue","webpack://frontend/./src/components/ApiConfigModal.vue?6f9a","webpack://frontend/./src/components/ApiConfigModal.vue?0121","webpack://frontend/./src/components/MaintenanceModal.vue","webpack://frontend/src/components/MaintenanceModal.vue","webpack://frontend/./src/components/MaintenanceModal.vue?8046","webpack://frontend/./src/components/MaintenanceModal.vue?0d09","webpack://frontend/src/App.vue","webpack://frontend/./src/App.vue?43b7","webpack://frontend/./src/App.vue?6633","webpack://frontend/./src/registerServiceWorker.ts","webpack://frontend/./src/plugins/vuetify.ts","webpack://frontend/./src/main.ts","webpack://frontend/webpack/bootstrap","webpack://frontend/webpack/runtime/chunk loaded","webpack://frontend/webpack/runtime/compat get default export","webpack://frontend/webpack/runtime/define property getters","webpack://frontend/webpack/runtime/global","webpack://frontend/webpack/runtime/hasOwnProperty shorthand","webpack://frontend/webpack/runtime/make namespace object","webpack://frontend/webpack/runtime/jsonp chunk loading","webpack://frontend/webpack/startup"],"sourcesContent":["import { Map as OlMap, View, Feature, MapBrowserEvent } from 'ol'\nimport { Style, Icon, Circle, Fill, Stroke, Text } from 'ol/style'\nimport IconAnchorUnits from 'ol/style/IconAnchorUnits'\nimport { Point } from 'ol/geom'\nimport WMTS from 'ol/source/WMTS'\nimport WMTSTileGrid from 'ol/tilegrid/WMTS'\nimport { get as getProjection, transform, transformExtent } from 'ol/proj'\nimport { getWidth, getTopLeft } from 'ol/extent'\nimport { Tile as TileLayer, Vector as VectorLayer, Layer } from 'ol/layer'\nimport { Vector as VectorSource, OSM, Cluster } from 'ol/source'\nimport { Zoom, ScaleLine, Rotate, Attribution } from 'ol/control'\nimport Geolocation from 'ol/Geolocation'\nimport { defaults as defaultInteractions, PinchRotate } from 'ol/interaction'\n\nimport { FactoryData, defaultFactoryDisplayStatuses, FactoryDisplayStatusType, FactoryDisplayStatuses } from '../types'\nimport { flipArgriculturalLand } from '../lib/image'\nimport { MapOptions } from 'ol/PluggableMap'\nimport IconOrigin from 'ol/style/IconOrigin'\nimport VectorTileLayer from 'ol/layer/VectorTile'\nimport VectorTileSource from 'ol/source/VectorTile'\nimport MVT from 'ol/format/MVT'\nimport VectorTileRenderType from 'ol/layer/VectorTileRenderType'\nimport stylefunction from 'ol-mapbox-style/dist/stylefunction'\nimport { baseStyle } from './layerStyle'\nimport FactoryPointCache from './utils/factoryPointCache'\n\nconst getFactoryStatusImage = (status: FactoryDisplayStatusType) => `/images/marker-${status}.svg`\nexport const getStatusBorderColor = (status: FactoryDisplayStatusType) => {\n  // We use == instead of === here because `type` can be either a string or number\n  // == results in a form of typecasting that works good enough for here\n  // eslint-disable-next-line\n  return FactoryDisplayStatuses.find(s => s.type == status)?.color\n}\n\nexport function getFactoryStatus (factory: FactoryData): FactoryDisplayStatusType {\n  if (factory.wont_fix) {\n    return FactoryDisplayStatuses[4].type\n  } else if (factory.document_display_status) {\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    return FactoryDisplayStatuses.find(s => s.documentDisplayStatuses.includes(factory.document_display_status!))?.type as FactoryDisplayStatusType\n  } else {\n    return FactoryDisplayStatuses[0].type\n  }\n}\n\nexport enum BASE_MAP {\n  OSM,\n  TAIWAN,\n  SATELITE,\n  PROTOMAP\n}\n\nexport const BASE_MAP_NAME = {\n  [BASE_MAP.OSM]: '簡易地圖',\n  [BASE_MAP.TAIWAN]: '詳細地圖',\n  [BASE_MAP.SATELITE]: '衛星地圖',\n  [BASE_MAP.PROTOMAP]: '向量地圖'\n}\n\ntype ButtonElements = {\n  zoomIn: HTMLImageElement,\n  zoomOut: HTMLImageElement\n}\n\nconst makeMapButtons = () => {\n  return Object.entries({\n    zoomIn: '/images/zoom-in.svg',\n    zoomOut: '/images/zoom-out.svg'\n  }).reduce((acc, [key, image]) => {\n    const label = document.createElement('img')\n    label.setAttribute('src', image)\n    label.setAttribute('alt',\n      key === 'zoomIn' ? '放大' : '縮小')\n\n    return {\n      ...acc,\n      [key]: label\n    }\n  }, {}) as ButtonElements\n}\n\nconst iconStyleMap = defaultFactoryDisplayStatuses.reduce((acc, status) => ({\n  ...acc,\n  [status]: new Style({\n    image: new Icon({\n      anchorYUnits: IconAnchorUnits.PIXELS,\n      anchorOrigin: IconOrigin.BOTTOM_LEFT,\n      src: getFactoryStatusImage(status)\n    }),\n    zIndex: defaultFactoryDisplayStatuses.indexOf(status)\n  })\n}), {}) as {[key in FactoryDisplayStatusType]: Style}\n\nconst nullStyle = new Style({})\n\nconst minimapPinStyle = new Style({\n  image: new Circle({\n    fill: new Fill({\n      color: '#A22929'\n    }),\n    radius: 12,\n    stroke: new Stroke({\n      color: '#FFFFFF',\n      width: 1\n    })\n  })\n})\n\nexport const featureStyleCache = new Map<string, Style>()\n\nexport class MapFactoryController {\n  private _map: OLMap\n  private appliedFilters: FactoryDisplayStatusType[] = defaultFactoryDisplayStatuses\n  private _factoriesLayerSource?: VectorSource\n  private _factoriesLayerStatusMap: {[key: string]: VectorSource}\n  private factoryMap = new Map<string, FactoryData>()\n\n  constructor (map: OLMap) {\n    this._map = map\n    this._factoriesLayerStatusMap = {} as {[key: string]: VectorSource}\n  }\n\n  get mapInstance () {\n    return this._map\n  }\n\n  get factories () {\n    return [...this.factoryMap.values()]\n  }\n\n  getFactoriesLayerForStatus (factoryStatus: FactoryDisplayStatusType) {\n    const CLUSTER_DISTANCE = 50\n    if (!this._factoriesLayerStatusMap[`${factoryStatus}`]) {\n      this._factoriesLayerStatusMap[`${factoryStatus}`] = new VectorSource({ features: [] })\n      const clusterSource = new Cluster({\n        distance: CLUSTER_DISTANCE,\n        source: this._factoriesLayerStatusMap[`${factoryStatus}`]\n      })\n      const styleCache = {}\n      const vectorLayer = new VectorLayer({\n        source: clusterSource,\n        zIndex: 3,\n        style: (feature, resolution) => {\n          const zoom = this.mapInstance.map.getView().getZoom()!\n\n          const clusterDistance = clusterSource.getDistance()\n          if (zoom > 16) {\n            if (clusterDistance !== 0) clusterSource.setDistance(0)\n          } else {\n            if (clusterDistance !== CLUSTER_DISTANCE) clusterSource.setDistance(CLUSTER_DISTANCE)\n          }\n\n          const features = feature.get('features')\n          if (features.length > 1) {\n            const size = features.length\n            // eslint-disable-next-line\n            // @ts-ignore\n            let style = styleCache[size]\n            if (!style) {\n              style = new Style({\n                image: new Circle({\n                  radius: 20,\n                  stroke: new Stroke({\n                    color: '#fff'\n                  }),\n                  fill: new Fill({\n                    color: getStatusBorderColor(factoryStatus)\n                  })\n                }),\n                text: new Text({\n                  text: size.toString(),\n                  fill: new Fill({\n                    color: '#fff'\n                  }),\n                  scale: 1.8\n                })\n              })\n              // eslint-disable-next-line\n              // @ts-ignore\n              styleCache[size] = style\n            }\n            return style\n          } else {\n            const factoryFeature = features[0]\n            ;(feature as Feature).set('factoryId', factoryFeature.get('factoryId'))\n            return factoryFeature.getStyle()\n          }\n        }\n      })\n      vectorLayer.setProperties({ factoryStatus })\n      this.mapInstance.map.addLayer(vectorLayer)\n    }\n    return this._factoriesLayerStatusMap[`${factoryStatus}`]\n  }\n\n  public getFactory (id: string) {\n    return this.factoryMap.get(id)\n  }\n\n  public updateFactory (id: string, factory: FactoryData) {\n    this.factoryMap.set(id, factory)\n\n    // Update factory feature style base on new data\n    const feature = this.getFactoriesLayerForStatus(getFactoryStatus(factory)).getFeatureById(id)\n    if (feature) {\n      const style = this.getFactoryStyle(factory)\n      featureStyleCache.set(id, style.clone())\n      feature.setStyle(style)\n    }\n  }\n\n  public addFactories (factories: FactoryData[]) {\n    const createFactoryFeature = this.createFactoryFeature.bind(this)\n    const factoriesToAdd = [] as FactoryData[]\n    const factoriesToUpdate = [] as FactoryData[]\n\n    factories.forEach(factory => {\n      if (this.factoryMap.has(factory.id)) {\n        factoriesToUpdate.push(factory)\n      } else {\n        factoriesToAdd.push(factory)\n      }\n    })\n\n    const features = factoriesToAdd.map(createFactoryFeature).filter(Boolean) as Feature[]\n    interface FeatureFactoryStatusMap {\n      [key: string]: Feature[]\n    }\n    const featuresByFactoryStatus = {} as FeatureFactoryStatusMap\n    features.forEach((feature) => {\n      if (!featuresByFactoryStatus[feature.get('factoryStatus')]) {\n        featuresByFactoryStatus[feature.get('factoryStatus')] = []\n      }\n      featuresByFactoryStatus[feature.get('factoryStatus')].push(feature)\n    })\n    Object.entries(featuresByFactoryStatus).forEach(([factoryStatus, features]) => {\n      this.getFactoriesLayerForStatus(factoryStatus as FactoryDisplayStatusType).addFeatures(features)\n    })\n\n    // ? Disable updating factory style when fetching new factories, user now should refresh the page manually to get factory status updated\n    // factoriesToUpdate.forEach((factory) => this.updateFactory(factory.id, factory))\n  }\n\n  public hideFactories (factories: FactoryData[]) {\n    factories.forEach(factory => {\n      const feature = this.getFactoriesLayerForStatus(getFactoryStatus(factory)).getFeatureById(factory.id)\n      feature.setStyle(nullStyle)\n    })\n  }\n\n  public setFactoryStatusFilter (filters: FactoryDisplayStatusType[]) {\n    this.appliedFilters = filters\n\n    this.updateFactoriesFeatureStyle()\n  }\n\n  private isFactoryVisible (factory: FactoryData) {\n    return this.appliedFilters.includes(getFactoryStatus(factory))\n  }\n\n  private getFactoryStyle (factory: FactoryData): Style {\n    const visible = this.isFactoryVisible(factory)\n    return visible ? iconStyleMap[getFactoryStatus(factory)] : nullStyle\n  }\n\n  private createFactoryFeature (factory: FactoryData) {\n    const existingFeature = FactoryPointCache.getFactoryCache(factory)\n    if (existingFeature) {\n      return null\n    }\n\n    const feature = new Feature({\n      geometry: new Point(transform([factory.lng, factory.lat], 'EPSG:4326', 'EPSG:3857'))\n    })\n    feature.setId(factory.id)\n    feature.set('factoryId', factory.id)\n    feature.set('factoryStatus', getFactoryStatus(factory))\n    const style = this.getFactoryStyle(factory)\n    featureStyleCache.set(factory.id, style.clone())\n    feature.setStyle(style)\n\n    this.factoryMap.set(factory.id, factory)\n\n    FactoryPointCache.setFactoryCache(factory, feature)\n\n    return feature\n  }\n\n  private forEachFeatureFactory (fn: (feature: Feature, factory: FactoryData) => void) {\n    Object.entries(this._factoriesLayerStatusMap).forEach(([, layerSource]) => {\n      layerSource.getFeatures().forEach(feature => {\n        const id = feature.getId() as string\n        const factory = this.factoryMap.get(id) as FactoryData\n\n        fn(feature, factory)\n      })\n    })\n  }\n\n  private displayAllFactory () {\n    this.forEachFeatureFactory((feature, factory) => {\n      feature.setStyle(iconStyleMap[getFactoryStatus(factory)])\n    })\n  }\n\n  private updateFactoriesFeatureStyle () {\n    this.forEachFeatureFactory((feature, factory) => {\n      feature.setStyle(this.getFactoryStyle(factory))\n    })\n  }\n}\n\nconst getWMTSTileGrid = () => {\n  const projection = getProjection('EPSG:3857')\n  const projectionExtent = projection.getExtent()\n  const resolutions = new Array(21)\n  const size = getWidth(projectionExtent) / 256\n  const matrixIds = new Array(21)\n  for (let z = 0; z < 21; ++z) {\n    // generate resolutions and matrixIds arrays for this WMTS\n    resolutions[z] = size / Math.pow(2, z)\n    matrixIds[z] = z\n  }\n\n  return new WMTSTileGrid({\n    origin: getTopLeft(projectionExtent),\n    resolutions,\n    matrixIds\n  })\n}\n\nconst getBaseLayer = (type: BASE_MAP, wmtsTileGrid: WMTSTileGrid) => {\n  if (type === BASE_MAP.PROTOMAP) {\n    const taiwanExtent = transformExtent([119.90423060095736, 21.83090666506977, 122.2876172488333, 25.33409668479448], 'EPSG:4326', 'EPSG:3857')\n    const layer = new VectorTileLayer({\n      source: new VectorTileSource({\n        attributions: '<a href=\"https://protomaps.com\" target=\"_blank\">Protomaps</a> © <a href=\"https://www.openstreetmap.org\" target=\"_blank\"> OpenStreetMap</a>',\n        format: new MVT(),\n        url: process.env.VUE_APP_PROTOMAP_SOURCE_URL || 'https://api.disfactory.tw/tiles/{z}/{x}/{y}.pbf',\n        maxZoom: 14\n      }),\n      opacity: 1,\n      zIndex: 1,\n      renderMode: VectorTileRenderType.VECTOR\n    })\n    layer.setExtent(taiwanExtent)\n    stylefunction(layer, baseStyle, 'protomaps')\n    return layer\n  } else {\n    const source = (() => {\n      switch (type) {\n        case BASE_MAP.OSM:\n          return new OSM({\n            crossOrigin: 'Anonymous',\n            attributions:\n              '<a href=\"https://osm.tw/\" target=\"_blank\">OpenStreetMap 台灣</a>'\n          })\n        case BASE_MAP.TAIWAN:\n          return new WMTS({\n            matrixSet: 'EPSG:3857',\n            format: 'image/png',\n            url: 'https://wmts.nlsc.gov.tw/wmts',\n            layer: 'EMAP',\n            tileGrid: wmtsTileGrid,\n            crossOrigin: 'Anonymous',\n            style: 'default',\n            wrapX: true,\n            attributions:\n              '<a href=\"https://maps.nlsc.gov.tw/\" target=\"_blank\">國土測繪圖資服務雲</a>'\n          })\n        case BASE_MAP.SATELITE:\n          return new WMTS({\n            matrixSet: 'EPSG:3857',\n            format: 'image/png',\n            url: 'https://wmts.nlsc.gov.tw/wmts/PHOTO_MIX/default/EPSG:3857/{TileMatrix}/{TileRow}/{TileCol}',\n            layer: 'EMAP',\n            tileGrid: wmtsTileGrid,\n            requestEncoding: 'REST',\n            crossOrigin: 'Anonymous',\n            style: 'default',\n            wrapX: true,\n            attributions:\n              '<a href=\"https://maps.nlsc.gov.tw/\" target=\"_blank\">國土測繪圖資服務雲</a>'\n          })\n        default:\n          return new OSM({\n            crossOrigin: 'Anonymous',\n            attributions:\n              '<a href=\"https://osm.tw/\" target=\"_blank\">OpenStreetMap 台灣</a>'\n          })\n      }\n    })()\n\n    return new TileLayer({\n      source,\n      opacity: 0.6,\n      zIndex: 1\n    })\n  }\n}\n\nconst getLUIMapLayer = (wmtsTileGrid: WMTSTileGrid) => {\n  return new TileLayer({\n    source: new WMTS({\n      matrixSet: 'EPSG:3857',\n      format: 'image/png',\n      url: 'https://wmts.nlsc.gov.tw/wmts/nURBAN2/default/EPSG:3857/{TileMatrix}/{TileRow}/{TileCol}',\n      layer: 'LUIMAP',\n      requestEncoding: 'REST',\n      tileGrid: wmtsTileGrid,\n      tileLoadFunction: function (imageTile, src) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const image: HTMLImageElement = (imageTile as any).getImage()\n        flipArgriculturalLand(src).then(newSrc => {\n          image.src = newSrc\n        })\n      },\n      crossOrigin: 'Anonymous',\n      style: 'default',\n      wrapX: true,\n      attributions:\n        '<a href=\"https://maps.nlsc.gov.tw/\" target=\"_blank\">國土測繪圖資服務雲</a>'\n    }),\n    opacity: 0.5,\n    zIndex: 2,\n    // TS is wrong, for some reason className is a valid property\n    // eslint-disable-next-line\n    // @ts-ignore\n    className: 'lui-layer'\n  })\n}\n\ntype MapEventHandler = {\n  onMoved?: (location: [number, number, number, number], canPlaceFactory: boolean) => void,\n  onClicked?: (location: [number, number], feature?: Feature) => void,\n  onZoomed?: (zoom: number) => void,\n  onLUILayerVisibilityChange?: (visible: boolean) => void\n}\n\ntype OLMapOptions = {\n  minimap?: boolean,\n  getInitialLocation?: () => [number, number, number] | undefined\n}\n\nexport class OLMap {\n  private _map: OlMap\n  private mapDom: HTMLElement\n  private geolocation?: Geolocation\n  private baseLayer: TileLayer | VectorTileLayer\n  private tileGrid: WMTSTileGrid = getWMTSTileGrid()\n  private minimapPinFeature?: Feature\n  private hasInitialLocation = false\n\n  constructor (target: HTMLElement, handler: MapEventHandler = {}, options: OLMapOptions = {}) {\n    this.mapDom = target\n\n    this.baseLayer = getBaseLayer(BASE_MAP.OSM, this.tileGrid)\n    this._map = this.instantiateOLMap(this.mapDom, this.baseLayer, options)\n\n    if (!options.minimap) {\n      this.geolocation = this.setupGeolocationTracking(this._map)\n    }\n\n    this.setupEventListeners(this._map, handler)\n  }\n\n  get map () {\n    return this._map\n  }\n\n  private setupEventListeners (map: OlMap, handler: MapEventHandler) {\n    const move = async () => {\n      const view = map.getView()\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const zoom = view.getZoom()!\n\n      // resolution in meter\n      const resolution = view.getResolutionForZoom(zoom)\n      const range = Math.ceil(resolution / 2)\n\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const [lng, lat] = transform(view.getCenter()!, 'EPSG:3857', 'EPSG:4326')\n\n      if (handler.onMoved) {\n        const { width, height } = this.mapDom.getBoundingClientRect()\n        const canPlace = await this.canPlaceFactory([width / 2, height / 2])\n        handler.onMoved([lng, lat, range, zoom], canPlace)\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    map.on('change:resolution', move)\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    map.on('moveend', move)\n\n    // https://stackoverflow.com/a/54441119\n    // After any layer is loaded, check onMoved event for the first time.\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    map.on('rendercomplete', move)\n\n    map.on('zoomend', () => {\n      const view = map.getView()\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const zoom = view.getZoom()!\n      if (handler.onZoomed) {\n        handler.onZoomed(zoom)\n      }\n    })\n\n    // eslint-disable-next-line @typescript-eslint/no-misused-promises\n    map.on('click', async (event) => {\n      if (handler.onClicked) {\n        const [lng, lat] = transform(event.coordinate, 'EPSG:3857', 'EPSG:4326')\n        const feature = map.forEachFeatureAtPixel(event.pixel, (feature) => feature, {\n          layerFilter: (layer) => {\n            return layer.getZIndex() !== 5 // TODO: Hack\n          }\n        })\n        handler.onClicked([lng, lat], feature as Feature)\n      }\n    })\n\n    // snippet taken from https://gis.stackexchange.com/q/310775\n    map.on('pointermove', event => {\n      if (!event.dragging) {\n        map.getTargetElement().style.cursor = map.hasFeatureAtPixel(map.getEventPixel(event.originalEvent)) ? 'pointer' : ''\n      }\n    })\n\n    const layer = this.getLUIMAPLayer()\n    layer.on('change:visible', function () {\n      if (handler.onLUILayerVisibilityChange) {\n        handler.onLUILayerVisibilityChange(layer.getVisible())\n      }\n    })\n  }\n\n  public setCoordinate (longitude: number, latitude: number, zoom?: number) {\n    const view = this.map.getView()\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    zoom = zoom || view.getZoom()!\n    view.setCenter(transform([longitude, latitude], 'EPSG:4326', 'EPSG:3857'))\n    view.setZoom(zoom)\n  }\n\n  private instantiateOLMap (target: HTMLElement, baseLayer: TileLayer | VectorTileLayer, options: OLMapOptions = {}) {\n    const tileGrid = getWMTSTileGrid()\n\n    let view\n    let location\n    if (options.getInitialLocation && (location = options.getInitialLocation())) {\n      const [longitude, latitude, zoom] = location\n      view = new View({\n        center: transform([longitude, latitude], 'EPSG:4326', 'EPSG:3857'),\n        zoom\n      })\n      this.hasInitialLocation = true\n    } else {\n      view = new View({\n        center: transform([120.48504632216294, 24.088258816482295], 'EPSG:4326', 'EPSG:3857'),\n        zoom: 14\n      })\n    }\n\n    const mapControlButtons = makeMapButtons()\n\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const mapOptions: MapOptions = {\n      target,\n      layers: [\n        baseLayer,\n        getLUIMapLayer(tileGrid)\n      ],\n      view,\n      controls: [\n        new Zoom({\n          zoomInLabel: mapControlButtons.zoomIn,\n          zoomOutLabel: mapControlButtons.zoomOut,\n          zoomInTipLabel: '放大',\n          zoomOutTipLabel: '縮小'\n        }),\n        new ScaleLine(),\n        new Rotate(),\n        new Attribution()\n      ],\n      interactions: defaultInteractions({\n        pinchRotate: false\n      }).extend([\n        new PinchRotate({\n          threshold: 0.4\n        })\n      ])\n    }\n\n    if (options.minimap) {\n      mapOptions.controls = []\n      mapOptions.interactions = []\n    }\n\n    return new OlMap(mapOptions)\n  }\n\n  private setupGeolocationTracking (map: OlMap) {\n    const view = map.getView()\n\n    const geolocation = new Geolocation({\n      trackingOptions: {\n        enableHighAccuracy: true\n      },\n      projection: view.getProjection()\n    })\n\n    geolocation.setTracking(true)\n\n    const positionLayer = this.setupGeolocationLayer(geolocation)\n\n    map.addLayer(positionLayer)\n\n    return geolocation\n  }\n\n  private setupGeolocationLayer (geolocation: Geolocation) {\n    const positionFeature = new Feature()\n    const getPositionStyles = (heading: number) =>\n      (!Number.isNaN(heading))\n        ? new Style({\n          image: new Icon({\n            anchor: [0.5, 0.5],\n            src: '/images/now.svg',\n            rotation: heading,\n            rotateWithView: true\n          })\n        })\n        : new Style({\n          image: new Circle({\n            fill: new Fill({ color: '#0099ff' }),\n            stroke: new Stroke({ color: '#fff', width: 3 }),\n            radius: 15\n          })\n        })\n\n    positionFeature.setStyle(getPositionStyles(NaN))\n    geolocation.on('change:position', function () {\n      const coordinates = geolocation.getPosition()\n      positionFeature.setGeometry(coordinates ? new Point(coordinates) : undefined)\n    })\n\n    geolocation.on('change:heading', function () {\n      positionFeature.setStyle(getPositionStyles(geolocation.getHeading() ?? NaN))\n    })\n\n    const accuracyFeature = new Feature()\n    geolocation.on('change:accuracyGeometry', function () {\n      accuracyFeature.setGeometry(geolocation.getAccuracyGeometry())\n    })\n\n    let run = false || this.hasInitialLocation\n    geolocation.on('change', () => {\n      if (run) {\n        return\n      }\n\n      const position = geolocation.getPosition()\n      if (position) {\n        this.zoomToGeolocation()\n        run = true\n      }\n    })\n\n    const positionLayer = new VectorLayer({\n      source: new VectorSource({\n        features: [positionFeature, accuracyFeature]\n      }),\n      zIndex: 5\n    })\n\n    return positionLayer\n  }\n\n  public zoomToGeolocation () {\n    if (!this.geolocation) {\n      throw new Error('No location permission')\n    }\n\n    const location = this.geolocation.getPosition()\n    if (!location) {\n      throw new Error('No location permission')\n    }\n\n    const view = this._map.getView()\n    view.setCenter(location)\n    view.setZoom(16)\n  }\n\n  public changeBaseMap (type: BASE_MAP) {\n    this._map.removeLayer(this.baseLayer)\n    this.baseLayer = getBaseLayer(type, this.tileGrid)\n    this._map.addLayer(this.baseLayer)\n  }\n\n  public async canPlaceFactory (pixel: MapBrowserEvent['pixel']): Promise<boolean> {\n    return new Promise(resolve => {\n      let resolved = false\n      const check = this._map.forEachLayerAtPixel(pixel, function (_, data) {\n        const [,,, a] = data\n\n        resolved = true\n        resolve(a !== 128)\n      }, {\n        // TS is wrong, for some reason layer does have .getClassName()\n        // eslint-disable-next-line\n        // @ts-ignore\n        layerFilter: (layer) => layer.getClassName() === 'lui-layer'\n      })\n\n      // !Workaround #forEachLayerAtPixel would not correctly run for some browsers\n      if (!resolved) {\n        if (check === undefined) {\n          resolve(true)\n        } else {\n          resolve(check)\n        }\n      }\n    })\n  }\n\n  private getLUIMAPLayer (): Layer {\n    let layer\n    this._map.getLayers().forEach(_layer => {\n      if (_layer.getProperties().source.layer_ === 'LUIMAP') {\n        layer = _layer\n      }\n    })\n\n    if (!layer) {\n      throw (new TypeError('LUIMAP Layer not found'))\n    }\n\n    return layer as Layer\n  }\n\n  public setLUILayerVisible (visible: boolean) {\n    const layer = this.getLUIMAPLayer()\n    layer.setVisible(visible)\n  }\n\n  public getLUILayerVisible () {\n    const layer = this.getLUIMAPLayer()\n    return layer.getVisible()\n  }\n\n  public setMinimapPin (longitude: number, latitude: number) {\n    const coordinate = transform([longitude, latitude], 'EPSG:4326', 'EPSG:3857')\n\n    if (!this.minimapPinFeature) {\n      const feature = new Feature({\n        geometry: new Point(coordinate)\n      })\n      feature.setStyle(minimapPinStyle)\n      this.minimapPinFeature = feature\n\n      const source = new VectorSource({\n        features: [\n          feature\n        ]\n      })\n\n      const vectorLayer = new VectorLayer({\n        source,\n        zIndex: 4\n      })\n\n      this.map.addLayer(vectorLayer)\n    } else {\n      this.minimapPinFeature.setGeometry(new Point(coordinate))\n    }\n\n    this._map.getView().setCenter(coordinate)\n  }\n}\n\nexport function initializeMap (target: HTMLElement, handler: MapEventHandler = {}, options: OLMapOptions) {\n  const mapInstance = new OLMap(target, handler, options);\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  (window as any).changeBaseMap = mapInstance.changeBaseMap.bind(mapInstance)\n  return new MapFactoryController(mapInstance)\n}\n\nexport function initializeMinimap (target: HTMLElement, center: number[]) {\n  const mapInstance = new OLMap(target, {}, { minimap: true })\n  mapInstance.map.getView().setCenter(center)\n  return new MapFactoryController(mapInstance)\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-app',[_c('v-app-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.appState.isInitialState || (_vm.appState.isEditFactoryMode && _vm.$vuetify.breakpoint.mdAndUp)),expression:\"appState.isInitialState || (appState.isEditFactoryMode && $vuetify.breakpoint.mdAndUp)\"}],attrs:{\"app\":\"\",\"color\":\"primary\",\"dark\":\"\",\"clipped-right\":\"\"}},[_c('v-btn',{staticClass:\"d-sm-none\",staticStyle:{\"visibility\":\"hidden\"},attrs:{\"icon\":\"\"}},[_c('v-icon',[_vm._v(\"mdi-temp\")])],1),_c('v-spacer',{staticClass:\"d-sm-none\"}),_c('v-toolbar-title',[_vm._v(\"農地工廠回報\")]),_c('v-spacer'),_c('div',{staticClass:\"d-none d-sm-flex\"},[_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.modalActions.openTutorialModal}},[_vm._v(\" 使用教學 \")]),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.modalActions.openSafetyModal}},[_vm._v(\" 安全須知 \")]),_c('v-btn',{attrs:{\"text\":\"\"},on:{\"click\":_vm.modalActions.openContactModal}},[_vm._v(\" 聯絡我們 \")]),_c('v-btn',{attrs:{\"text\":\"\",\"href\":\"https://about.disfactory.tw/#question\"}},[_vm._v(\" 常見問題 \")]),_c('v-btn',{attrs:{\"text\":\"\",\"href\":\"https://about.disfactory.tw\",\"target\":\"_blank\"}},[_vm._v(\" 關於回報系統 \")]),_c('v-btn',{attrs:{\"text\":\"\",\"href\":\"https://airtable.com/shrUraKakZRpH52DO\",\"target\":\"_blank\"}},[_vm._v(\" 問題回報 \")])],1),_c('v-app-bar-nav-icon',{staticClass:\"d-flex d-sm-none\",on:{\"click\":function($event){_vm.drawer = !_vm.drawer}}})],1),_c('v-navigation-drawer',{staticClass:\"app-sidebar\",attrs:{\"app\":\"\",\"right\":\"\",\"temporary\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-list',{attrs:{\"nav\":\"\",\"dense\":\"\"}},[_c('v-list-item-group',{attrs:{\"active-class\":\"deep-purple--text text--accent-4\"}},[_c('v-list-item',{on:{\"click\":_vm.modalActions.openTutorialModal}},[_c('v-list-item-title',[_vm._v(\"使用教學\")])],1),_c('v-list-item',{on:{\"click\":_vm.modalActions.openSafetyModal}},[_c('v-list-item-title',[_vm._v(\"安全須知\")])],1),_c('v-list-item',{on:{\"click\":_vm.modalActions.openContactModal}},[_c('v-list-item-title',[_vm._v(\"聯絡我們\")])],1),_c('v-list-item',{attrs:{\"href\":\"https://about.disfactory.tw/#section-f_c360c8de-447e-4c0a-a856-4af18b9a5240\",\"target\":\"_blank\"}},[_c('v-list-item-title')],1),_c('v-list-item',{attrs:{\"href\":\"https://about.disfactory.tw\",\"target\":\"_blank\"}},[_c('v-list-item-title',[_vm._v(\"關於回報系統\")])],1),_c('v-list-item',{attrs:{\"href\":\"https://airtable.com/shrUraKakZRpH52DO\",\"target\":\"_blank\"}},[_c('v-list-item-title',[_vm._v(\"問題回報\")])],1)],1)],1)],1),_c('v-main',{staticStyle:{\"max-height\":\"100%\",\"height\":\"100%\"}},[_c('app-alert',{attrs:{\"alert\":_vm.alertState.alert,\"dismiss\":_vm.alertActions.dismissAlert}}),_c('v-dialog',{attrs:{\"max-width\":\"305\"},model:{value:(_vm.modalState.createFactorySuccessModal),callback:function ($$v) {_vm.$set(_vm.modalState, \"createFactorySuccessModal\", $$v)},expression:\"modalState.createFactorySuccessModal\"}},[_c('v-card',{staticClass:\"text-center pt-5\"},[_c('v-icon',{staticStyle:{\"font-size\":\"80px\"},attrs:{\"color\":\"primary\"}},[_vm._v(\" mdi-checkbox-marked-circle \")]),_c('v-card-title',{staticClass:\"secondary--text justify-center\"},[_vm._v(\" 新增可疑工廠成功 \")]),_c('v-card-text',[_c('small',[_vm._v(\" 3 秒後自動關閉提示訊息 \")])])],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"305\"},model:{value:(_vm.modalState.updateFactoryImageSuccessModal),callback:function ($$v) {_vm.$set(_vm.modalState, \"updateFactoryImageSuccessModal\", $$v)},expression:\"modalState.updateFactoryImageSuccessModal\"}},[_c('v-card',{staticClass:\"text-center pt-5\"},[_c('v-icon',{staticStyle:{\"font-size\":\"80px\"},attrs:{\"color\":\"primary\"}},[_vm._v(\" mdi-checkbox-marked-circle \")]),_c('v-card-title',{staticClass:\"secondary--text justify-center\"},[_vm._v(\" 補充工廠照片成功 \")]),_c('v-card-text',[_c('small',[_vm._v(\" 3 秒後自動關閉提示訊息 \")])])],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"305\"},model:{value:(_vm.modalState.updateFactorySuccessModal),callback:function ($$v) {_vm.$set(_vm.modalState, \"updateFactorySuccessModal\", $$v)},expression:\"modalState.updateFactorySuccessModal\"}},[_c('v-card',{staticClass:\"text-center pt-5\"},[_c('v-icon',{staticStyle:{\"font-size\":\"80px\"},attrs:{\"color\":\"primary\"}},[_vm._v(\" mdi-checkbox-marked-circle \")]),_c('v-card-title',{staticClass:\"secondary--text justify-center\"},[_vm._v(\" 補充工廠資訊成功 \")]),_c('v-card-text',[_c('small',[_vm._v(\" 3 秒後自動關閉提示訊息 \")])])],1)],1),_c('about-modal',{attrs:{\"open\":_vm.modalState.aboutModalOpen,\"dismiss\":_vm.modalActions.closeAboutModal}}),_c('contact-modal',{attrs:{\"open\":_vm.modalState.contactModalOpen,\"dismiss\":_vm.modalActions.closeContactModal}}),_c('getting-started-modal',{attrs:{\"open\":_vm.modalState.gettingStartedModalOpen,\"dismiss\":_vm.modalActions.closeGettingStartedModal}}),_c('safety-modal',{model:{value:(_vm.modalState.safetyModalOpen),callback:function ($$v) {_vm.$set(_vm.modalState, \"safetyModalOpen\", $$v)},expression:\"modalState.safetyModalOpen\"}}),_c('tutorial-modal',{attrs:{\"open\":_vm.modalState.tutorialModalOpen,\"dismiss\":_vm.modalActions.closeTutorialModal}}),_c('ios-version-modal',{attrs:{\"open\":_vm.modalState.supportIOSVersionModalOpen,\"dismiss\":_vm.modalActions.closesupportIOSVersionModal}}),_c('api-config-modal',{attrs:{\"open\":_vm.modalState.apiConfigModalOpen,\"dismiss\":_vm.modalActions.closeApiConfigModal}}),_c('MapView',{attrs:{\"setFactoryLocation\":_vm.appActions.setFactoryLocation}}),(_vm.appState.isCreateMode)?_c('create-factory-steps'):_vm._e(),(_vm.appState.isEditMode)?_c('update-factory-steps'):_vm._e()],1),_c('factory-detail-page'),_c('maintenance-modal',{attrs:{\"open\":_vm.maintenanceModalOpen,\"dismiss\":_vm.dismissMaintenanceModal}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"map-container\"},[_c('div',{ref:\"root\",staticClass:\"map\"}),(_vm.appState.isInitialPage)?_c('div',{staticClass:\"container-fluid px-1 pt-7 pb-4 filter-buttons-container\",class:{ desktop: _vm.$vuetify.breakpoint.mdAndUp, 'sidebar-expanded': _vm.appState.factoryDetailsExpanded }},[_c('display-setting-bottom-sheet'),_vm._l((_vm.filterButtonsData),function(button){return _c('v-btn',{key:button.value,staticClass:\"mx-2 mb-5 primary--text\",class:{ 'inactive-filter': !_vm.checkActive(button.value) },attrs:{\"rounded\":\"\",\"color\":\"white\",\"name\":button.text},on:{\"click\":function($event){return _vm.onClickFilterButton(button.value)}}},[_c('v-icon',{attrs:{\"color\":button.color}},[_vm._v(\"mdi-map-marker\")]),_vm._v(\" \"+_vm._s(button.text)+\" \")],1)})],2):_vm._e(),_c('div',{staticClass:\"ol-fit-location ol-unselectable ol-control\",attrs:{\"data-label\":\"map-locate\"},on:{\"click\":_vm.zoomToGeolocation}},[_vm._m(0)]),(_vm.appState.selectFactoryMode)?_c('div',{staticClass:\"center-point\"}):_vm._e(),(!_vm.appState.selectFactoryMode)?_c('div',{staticClass:\"factory-button-group flex justify-center mb-5 mb-8-md\"},[_c('v-btn',{attrs:{\"color\":\"primary\",\"rounded\":\"\",\"large\":\"\"},on:{\"click\":_vm.onClickCreateFactoryButton}},[_vm._v(\" 我想新增可疑工廠 \")])],1):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('button',{attrs:{\"title\":\"定位\"}},[_c('img',{attrs:{\"src\":\"/images/locate.svg\",\"alt\":\"locate\"}})])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('span',[(_vm.$vuetify.breakpoint.mdAndUp)?_c('v-menu',{attrs:{\"content-class\":\"display-setting-popover\",\"close-on-content-click\":false,\"nudge-width\":200,\"offset-y\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({staticClass:\"mx-2 mb-5 white--text\",attrs:{\"color\":\"primary\"}},'v-btn',attrs,false),on),[_vm._v(\" 顯示設定 \")])]}}],null,false,3665771213),model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('v-card',[_c('v-list',[_c('v-list-item',[_c('h2',{staticClass:\"primary--text text-button\"},[_vm._v(\"農地範圍 •\")]),_c('v-btn',{staticClass:\"primary--text\",class:!_vm.isLUIMapVisable ? 'font-weight-bold' : 'font-weight-light',attrs:{\"text\":\"\",\"x-small\":\"\"},on:{\"click\":function($event){_vm.isLUIMapVisable = false}}},[_vm._v(\"隱藏\")]),_c('v-btn',{staticClass:\"primary--text\",class:_vm.isLUIMapVisable ? 'font-weight-bold' : 'font-weight-light',attrs:{\"text\":\"\",\"x-small\":\"\"},on:{\"click\":function($event){_vm.isLUIMapVisable = true}}},[_vm._v(\"顯示\")])],1),_c('v-list-item',[_c('switch-map-mode-button',{attrs:{\"isInSheet\":true}})],1)],1)],1)],1):_c('v-bottom-sheet',{scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({staticClass:\"mx-2 mb-5 white--text\",attrs:{\"color\":\"primary\"}},'v-btn',attrs,false),on),[_vm._v(\" 顯示設定 \")])]}}]),model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('v-list',[_c('v-subheader',[_vm._v(\"地圖顯示設定\")]),_c('v-list-item',[_c('h2',{staticClass:\"primary--text text-button\"},[_vm._v(\"農地範圍 •\")]),_c('v-btn',{staticClass:\"primary--text\",class:!_vm.isLUIMapVisable ? 'font-weight-bold' : 'font-weight-light',attrs:{\"text\":\"\",\"x-small\":\"\"},on:{\"click\":function($event){_vm.isLUIMapVisable = false}}},[_vm._v(\"隱藏\")]),_c('v-btn',{staticClass:\"primary--text\",class:_vm.isLUIMapVisable ? 'font-weight-bold' : 'font-weight-light',attrs:{\"text\":\"\",\"x-small\":\"\"},on:{\"click\":function($event){_vm.isLUIMapVisable = true}}},[_vm._v(\"顯示\")])],1),_c('v-list-item',[_c('switch-map-mode-button',{attrs:{\"isInSheet\":true}})],1)],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export const MainMapControllerSymbol = Symbol('MAIN_MAP_CONTROLLER')\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-bottom-sheet',{scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({staticClass:\"primary--text\",class:_vm.isInSheet ? 'pa-0' : null,attrs:{\"rounded\":!_vm.isInSheet,\"text\":_vm.isInSheet,\"color\":\"white\"}},'v-btn',attrs,false),on),[_vm._v(\" 切換地圖模式 • \"+_vm._s(_vm.currentMapModeName)+\" \")])]}}]),model:{value:(_vm.mapModeBottomSheet),callback:function ($$v) {_vm.mapModeBottomSheet=$$v},expression:\"mapModeBottomSheet\"}},[_c('v-list',[_c('v-subheader',[_vm._v(\"切換地圖模式\")]),_vm._l((_vm.mapModes),function(mode){return _c('v-list-item',{key:mode.type,on:{\"click\":function($event){_vm.currentMapMode = mode.type}}},[_c('v-list-item-title',{staticClass:\"primary--text\"},[_vm._v(_vm._s(mode.name))])],1)})],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import type { Feature } from 'ol'\nimport type { Geometry } from 'ol/geom'\n\n/* eslint-disable quote-props */\nexport const FACTORY_TYPE = [\n  { value: '2-1', text: '金屬: 沖床、銑床、車床、鏜孔' },\n  { value: '2-2', text: '金屬: 焊接、鑄造、熱處理' },\n  { value: '2-3', text: '金屬: 金屬表面處理、噴漆' },\n  { value: '3', text: '塑膠加工、射出' },\n  { value: '4', text: '橡膠加工' },\n  { value: '5', text: '非金屬礦物（石材）' },\n  { value: '6', text: '食品' },\n  { value: '7', text: '皮革' },\n  { value: '8', text: '紡織' },\n  { value: '9', text: '其他' }\n] as const\nexport type FactoryType = (typeof FACTORY_TYPE)[number]['value']\n\nexport type FactoryDisplayStatusType = 'default' | 0 | 1 | 2 | 3\n\nexport const defaultFactoryDisplayStatuses = [\n  'default', 0, 1, 2, 3\n] as FactoryDisplayStatusType[]\n\ntype DocumentDisplayStatus = '已檢舉' | '已排程稽查' | '陳述意見期' | '已勒令停工' | '已發函斷電' | '已排程拆除' | '已拆除' | '等待新事證'\n\ntype FactoryDisplayStatus = {\n  type: FactoryDisplayStatusType,\n  name: string,\n  documentDisplayStatuses: ('疑似工廠' | DocumentDisplayStatus)[],\n  color: string\n}\nexport const FactoryDisplayStatuses: FactoryDisplayStatus[] = [\n  {\n    type: 'default',\n    name: '未處理',\n    documentDisplayStatuses: ['疑似工廠'],\n    color: '#A22A29'\n  },\n  {\n    type: 0,\n    name: '處理中',\n    documentDisplayStatuses: ['已檢舉', '已排程稽查', '陳述意見期', '已勒令停工'],\n    color: '#457287'\n  },\n  {\n    type: 1,\n    name: '已斷電',\n    documentDisplayStatuses: ['已發函斷電', '已排程拆除'],\n    color: '#364516'\n  },\n  {\n    type: 2,\n    name: '已拆除',\n    documentDisplayStatuses: ['已拆除'],\n    color: '#A1A1A1'\n  },\n  {\n    type: 3,\n    name: '無法處理',\n    documentDisplayStatuses: ['等待新事證'],\n    color: '#E0E0E0'\n  }\n]\n\nconst FactoryDisplayStatusMap = FactoryDisplayStatuses.reduce((acc, c) => {\n  return {\n    ...acc,\n    [c.type]: c\n  }\n}, {}) as {\n  [key in FactoryDisplayStatusType]: FactoryDisplayStatus\n}\n\nexport const getDisplayStatusText = (status: FactoryDisplayStatusType) => {\n  return FactoryDisplayStatusMap[status].name\n}\n\nexport const getDisplayStatusColor = (status: FactoryDisplayStatusType) => {\n  return FactoryDisplayStatusMap[status].color\n}\n\nexport type FactoryImage = {\n  id: string,\n  image_path: string,\n  url: string\n}\n\nexport type FactoryData = {\n  id: string,\n  display_number: string,\n  lat: number,\n  lng: number,\n  name: string,\n  landcode: string,\n  townname: string,\n  sectname: string,\n  sectcode: string,\n  source: string,\n  type: FactoryType,\n  images: FactoryImage[],\n  // TODO: can be one of https://docs.djangoproject.com/en/2.2/ref/settings/#datetime-input-formats\n  // eslint-disable-next-line\n  reported_at: null | string,\n  data_complete: boolean,\n  before_release: boolean,\n  document_display_status: DocumentDisplayStatus | null,\n  feature?: any,\n  follow_ups_for_user: {\n    note: string,\n    created_at: string\n  }[],\n  wont_fix: boolean\n}\n\nexport type FactoriesResponse = Array<FactoryData>\n\nexport interface FactoriesByStatus {\n  [key: string]: FactoryData[]\n}\n\nexport type FactoryPostData = {\n  name: string,\n  type?: FactoryType,\n  images?: string[],\n  others?: string,\n  lat: number,\n  lng: number,\n  nickname?: string,\n  contact?: string\n}\n\nexport type ReportRecord = {\n  id: string,\n  created_at: string,\n  others?: string\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/no-non-null-assertion */\ntype PixelMapper = (data: Uint8ClampedArray) => void\n\nconst canvas = (window.OffscreenCanvas) ? new OffscreenCanvas(500, 500) : document.createElement('canvas')\nconst ctx = canvas.getContext('2d')! as CanvasRenderingContext2D\n\nexport const createImageProcessor = (processor: PixelMapper) => (src: string): Promise<string> => {\n  return new Promise((resolve) => {\n    const image = new Image()\n    image.crossOrigin = ''\n    image.src = src\n    image.style.display = 'none'\n    image.onload = async () => {\n      canvas.width = image.width\n      canvas.height = image.height\n      ctx.clearRect(0, 0, canvas.width, canvas.height)\n\n      ctx.drawImage(image, 0, 0)\n\n      const imageData = ctx.getImageData(0, 0, image.width, image.height)\n      const { data } = imageData\n\n      await Promise.resolve(processor(data))\n\n      const tmpCanvas = document.createElement('canvas')\n      const tmpCtx = tmpCanvas.getContext('2d')!\n      tmpCanvas.width = image.width\n      tmpCanvas.height = image.height\n\n      tmpCtx.putImageData(imageData, 0, 0)\n\n      resolve(tmpCanvas.toDataURL())\n\n      image.remove()\n      tmpCanvas.remove()\n    }\n  })\n}\n\nexport const toGrayScale = createImageProcessor(data => {\n  // doing grayscale operaion pixel by pixel\n  for (let i = 0; i < data.length; i += 4) {\n    const avg = (data[i] + data[i + 1] + data[i + 2]) / 3\n    data[i] = avg // red\n    data[i + 1] = avg // green\n    data[i + 2] = avg // blue\n  }\n})\n\nconst argriculturalLandColors = [\n  [255, 241, 0]\n]\n\nconst isArrayEqual = (a: Array<any>, b: Array<any>) => !a.some((v, i) => b[i] !== v)\n\nconst isArgriculturalLand = (arr: Array<any>) => argriculturalLandColors.some(c => isArrayEqual(c, arr))\n\nexport const flipArgriculturalLand = createImageProcessor(data => {\n  for (let i = 0; i < data.length; i += 4) {\n    const color = Array.from(data.slice(i, i + 3))\n\n    if (isArgriculturalLand(color)) {\n      // set to transparent\n      data[i] = 0\n      data[i + 1] = 0\n      data[i + 2] = 0\n      data[i + 3] = 1\n    } else {\n      // set to black\n      data[i] = 0\n      data[i + 1] = 0\n      data[i + 2] = 0\n      data[i + 3] = 255\n    }\n  }\n})\n","export const baseStyle = {\n  version: 8,\n  name: 'Light',\n  sources: {\n    protomaps: {\n      type: 'vector',\n      tiles: [\n        'https://api.protomaps.com/tiles/v2/{z}/{x}/{y}.pbf'\n      ],\n      minzoom: 0,\n      maxzoom: 14,\n      attribution: '<a href=\"https://protomaps.com\" target=\"_blank\">Protomaps</a> © <a href=\"https://www.openstreetmap.org\" target=\"_blank\"> OpenStreetMap</a>'\n    }\n  },\n  layers: [\n    {\n      id: 'background',\n      type: 'background',\n      paint: {\n        'background-color': '#dddddd'\n      }\n    },\n    {\n      id: 'earth',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'earth',\n      paint: {\n        'fill-color': ' #e7f1ee'\n      }\n    },\n    {\n      id: 'landuse_park',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'landuse',\n      filter: [\n        'any',\n        [\n          '==',\n          'pmap:kind',\n          'park'\n        ],\n        [\n          '==',\n          'landuse',\n          'cemetery'\n        ]\n      ],\n      paint: {\n        'fill-color': '#c2f7d1'\n      }\n    },\n    {\n      id: 'landuse_hospital',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'landuse',\n      filter: [\n        'any',\n        [\n          '==',\n          'pmap:kind',\n          'hospital'\n        ]\n      ],\n      paint: {\n        'fill-color': '#ffeae8'\n      }\n    },\n    {\n      id: 'landuse_industrial',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'landuse',\n      filter: [\n        'any',\n        [\n          '==',\n          'pmap:kind',\n          'industrial'\n        ]\n      ],\n      paint: {\n        'fill-color': '#f8ffed'\n      }\n    },\n    {\n      id: 'landuse_school',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'landuse',\n      filter: [\n        'any',\n        [\n          '==',\n          'pmap:kind',\n          'school'\n        ]\n      ],\n      paint: {\n        'fill-color': '#f2fef9'\n      }\n    },\n    {\n      id: 'natural_wood',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'natural',\n      filter: [\n        'any',\n        [\n          '==',\n          'natural',\n          'wood'\n        ],\n        [\n          '==',\n          'leisure',\n          'nature_reserve'\n        ],\n        [\n          '==',\n          'landuse',\n          'forest'\n        ]\n      ],\n      paint: {\n        'fill-color': '#eafbe9'\n      }\n    },\n    {\n      id: 'landuse_pedestrian',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'landuse',\n      filter: [\n        'any',\n        [\n          '==',\n          'highway',\n          'footway'\n        ]\n      ],\n      paint: {\n        'fill-color': '#eef0f0'\n      }\n    },\n    {\n      id: 'natural_scrub',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'natural',\n      filter: [\n        'in',\n        'natural',\n        'scrub',\n        'grassland'\n      ],\n      paint: {\n        'fill-color': 'rgb(219,239,209)'\n      }\n    },\n    {\n      id: 'natural_glacier',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'natural',\n      filter: [\n        '==',\n        'natural',\n        'glacier'\n      ],\n      paint: {\n        'fill-color': 'white'\n      }\n    },\n    {\n      id: 'natural_sand',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'natural',\n      filter: [\n        '==',\n        'natural',\n        'sand'\n      ],\n      paint: {\n        'fill-color': '#eff5e7'\n      }\n    },\n    {\n      id: 'landuse_aerodrome',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'landuse',\n      filter: [\n        '==',\n        'aeroway',\n        'aerodrome'\n      ],\n      paint: {\n        'fill-color': '#dbe7e7'\n      }\n    },\n    {\n      id: 'transit_runway',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'transit',\n      filter: [\n        'has',\n        'aeroway'\n      ],\n      paint: {\n        'line-color': '#d1d9d9',\n        'line-width': 6\n      }\n    },\n    {\n      id: 'landuse_runway',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'landuse',\n      filter: [\n        'any',\n        [\n          '==',\n          'aeroway',\n          'runway'\n        ],\n        [\n          '==',\n          'area:aeroway',\n          'runway'\n        ],\n        [\n          '==',\n          'area:aeroway',\n          'taxiway'\n        ]\n      ],\n      paint: {\n        'fill-color': '#d1d9d9'\n      }\n    },\n    {\n      id: 'water',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'water',\n      paint: {\n        'fill-color': '#a4cae1'\n      }\n    },\n    {\n      id: 'roads_tunnels_other_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '<',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'other'\n        ]\n      ],\n      paint: {\n        'line-color': '#ffffff',\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          14,\n          0,\n          14.5,\n          0.5,\n          20,\n          12\n        ]\n      }\n    },\n    {\n      id: 'roads_tunnels_other',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '<',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'other'\n        ]\n      ],\n      paint: {\n        'line-color': '#f7f7f7',\n        'line-dasharray': [\n          1,\n          1\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          14,\n          0,\n          14.5,\n          0.5,\n          20,\n          12\n        ]\n      }\n    },\n    {\n      id: 'roads_tunnels_minor_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '<',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'minor_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#e2e2e2',\n        'line-dasharray': [\n          3,\n          2\n        ],\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          12,\n          0,\n          12.5,\n          0.5,\n          20,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          12,\n          0,\n          12.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_tunnels_minor',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '<',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'minor_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#ebebeb',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          12,\n          0,\n          12.5,\n          0.5,\n          20,\n          32\n        ]\n      }\n    },\n    {\n      id: 'roads_tunnels_medium_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '<',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'medium_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#e1e1e1',\n        'line-dasharray': [\n          3,\n          2\n        ],\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          20,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          10,\n          0,\n          10.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_tunnels_medium',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '<',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'medium_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#ebebeb',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          20,\n          32\n        ]\n      }\n    },\n    {\n      id: 'roads_tunnels_major_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '<',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'major_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#e3cfd3',\n        'line-dasharray': [\n          3,\n          2\n        ],\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          19,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          9,\n          0,\n          9.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_tunnels_major',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '<',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'major_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#ebebeb',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          19,\n          32\n        ]\n      }\n    },\n    {\n      id: 'roads_tunnels_highway_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '<',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'highway'\n        ]\n      ],\n      paint: {\n        'line-color': '#ebcea2',\n        'line-dasharray': [\n          3,\n          2\n        ],\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          3,\n          0,\n          3.5,\n          0.5,\n          18,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_tunnels_highway',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '<',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'highway'\n        ]\n      ],\n      paint: {\n        'line-color': '#ebebeb',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          3,\n          0,\n          3.5,\n          0.5,\n          18,\n          32\n        ]\n      }\n    },\n    {\n      id: 'physical_line_waterway',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'physical_line',\n      filter: [\n        '==',\n        [\n          'get',\n          'pmap:kind'\n        ],\n        'waterway'\n      ],\n      paint: {\n        'line-color': '#a4cae1',\n        'line-width': 0.5\n      }\n    },\n    {\n      id: 'buildings',\n      type: 'fill-extrusion',\n      source: 'protomaps',\n      'source-layer': 'buildings',\n      paint: {\n        'fill-extrusion-color': '#cbcece',\n        'fill-extrusion-height': [\n          'to-number',\n          [\n            'get',\n            'height'\n          ]\n        ],\n        'fill-extrusion-opacity': 0.5\n      }\n    },\n    {\n      id: 'roads_other',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '==',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'other'\n        ]\n      ],\n      paint: {\n        'line-color': '#ffffff',\n        'line-dasharray': [\n          2,\n          1\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          14,\n          0,\n          14.5,\n          0.5,\n          20,\n          12\n        ]\n      }\n    },\n    {\n      id: 'roads_minor_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '==',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'minor_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#e2e2e2',\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          12,\n          0,\n          12.5,\n          0.5,\n          20,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          12,\n          0,\n          12.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_minor',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '==',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'minor_road'\n        ]\n      ],\n      paint: {\n        'line-color': 'white',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          12,\n          0,\n          12.5,\n          0.5,\n          20,\n          32\n        ]\n      }\n    },\n    {\n      id: 'roads_medium_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '==',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'medium_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#e1e1e1',\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          20,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          10,\n          0,\n          10.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_medium',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '==',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'medium_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#ffffff',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          20,\n          32\n        ]\n      }\n    },\n    {\n      id: 'roads_major_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '==',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'major_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#e3cfd3',\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          19,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          9,\n          0,\n          9.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_major',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '==',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'major_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#ffffff',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          19,\n          32\n        ]\n      }\n    },\n    {\n      id: 'roads_highway_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '==',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'highway'\n        ]\n      ],\n      paint: {\n        'line-color': '#ebcea2',\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          3,\n          0,\n          3.5,\n          0.5,\n          18,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_highway',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '==',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'highway'\n        ]\n      ],\n      paint: {\n        'line-color': '#fefffc',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          3,\n          0,\n          3.5,\n          0.5,\n          18,\n          32\n        ]\n      }\n    },\n    {\n      id: 'transit_railway',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'transit',\n      filter: [\n        'all',\n        [\n          '==',\n          'pmap:kind',\n          'railway'\n        ]\n      ],\n      paint: {\n        'line-color': '#b3bcc9',\n        'line-width': 2\n      }\n    },\n    {\n      id: 'transit_railway_tracks',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'transit',\n      filter: [\n        'all',\n        [\n          '==',\n          'pmap:kind',\n          'railway'\n        ]\n      ],\n      paint: {\n        'line-color': '#ffffff',\n        'line-width': 0.8,\n        'line-dasharray': [\n          6,\n          10\n        ]\n      }\n    },\n    {\n      id: 'boundaries',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'boundaries',\n      paint: {\n        'line-color': '#5c4a6b',\n        'line-width': 0.5,\n        'line-dasharray': [\n          3,\n          2\n        ]\n      }\n    },\n    {\n      id: 'physical_line_waterway_label',\n      type: 'symbol',\n      source: 'protomaps',\n      'source-layer': 'physical_line',\n      minzoom: 14,\n      layout: {\n        'symbol-placement': 'line',\n        'text-font': [\n          'Microsoft JhengHei',\n          'STHeitiTC-Medium'\n        ],\n        'text-field': [\n          'get',\n          'name'\n        ],\n        'text-size': 14,\n        'text-letter-spacing': 0.3\n      },\n      paint: {\n        'text-color': 'white',\n        'text-halo-color': '#a4cae1',\n        'text-halo-width': 2\n      }\n    },\n    {\n      id: 'roads_bridges_other_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '>',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'other'\n        ]\n      ],\n      paint: {\n        'line-color': '#ffffff',\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          14,\n          0,\n          14.5,\n          0.5,\n          20,\n          12\n        ]\n      }\n    },\n    {\n      id: 'roads_bridges_other',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '>',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'other'\n        ]\n      ],\n      paint: {\n        'line-color': '#ffffff',\n        'line-dasharray': [\n          2,\n          1\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          14,\n          0,\n          14.5,\n          0.5,\n          20,\n          12\n        ]\n      }\n    },\n    {\n      id: 'roads_bridges_minor_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '>',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'minor_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#e2e2e2',\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          12,\n          0,\n          12.5,\n          0.5,\n          20,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          12,\n          0,\n          12.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_bridges_minor',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '>',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'minor_road'\n        ]\n      ],\n      paint: {\n        'line-color': 'white',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          12,\n          0,\n          12.5,\n          0.5,\n          20,\n          32\n        ]\n      }\n    },\n    {\n      id: 'roads_bridges_medium_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '>',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'medium_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#e1e1e1',\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          20,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          10,\n          0,\n          10.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_bridges_medium',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '>',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'medium_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#ffffff',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          20,\n          32\n        ]\n      }\n    },\n    {\n      id: 'roads_bridges_major_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '>',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'major_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#e3cfd3',\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          19,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          9,\n          0,\n          9.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_bridges_major',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '>',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'major_road'\n        ]\n      ],\n      paint: {\n        'line-color': '#ffffff',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          0.5,\n          19,\n          32\n        ]\n      }\n    },\n    {\n      id: 'roads_bridges_highway_casing',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '>',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'highway'\n        ]\n      ],\n      paint: {\n        'line-color': '#ebcea2',\n        'line-gap-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          3,\n          0,\n          3.5,\n          0.5,\n          18,\n          32\n        ],\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          7,\n          0,\n          7.5,\n          1\n        ]\n      }\n    },\n    {\n      id: 'roads_bridges_highway',\n      type: 'line',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      filter: [\n        'all',\n        [\n          '>',\n          'pmap:level',\n          0\n        ],\n        [\n          '==',\n          'pmap:kind',\n          'highway'\n        ]\n      ],\n      paint: {\n        'line-color': '#fefffc',\n        'line-width': [\n          'interpolate',\n          [\n            'exponential',\n            1.6\n          ],\n          [\n            'zoom'\n          ],\n          3,\n          0,\n          3.5,\n          0.5,\n          18,\n          32\n        ]\n      }\n    },\n    {\n      id: 'roads_labels',\n      type: 'symbol',\n      source: 'protomaps',\n      'source-layer': 'roads',\n      minzoom: 13,\n      layout: {\n        'symbol-placement': 'line',\n        'text-font': [\n          'Microsoft JhengHei',\n          'STHeitiTC-Medium'\n        ],\n        'text-field': [\n          'get',\n          'name'\n        ],\n        'text-size': 14\n      },\n      paint: {\n        'text-color': '#91888b',\n        'text-halo-color': 'white',\n        'text-halo-width': 2\n      }\n    },\n    {\n      id: 'mask',\n      type: 'fill',\n      source: 'protomaps',\n      'source-layer': 'mask',\n      paint: {\n        'fill-color': '#dddddd'\n      }\n    },\n    {\n      id: 'physical_point_ocean',\n      type: 'symbol',\n      source: 'protomaps',\n      'source-layer': 'physical_point',\n      filter: [\n        'any',\n        [\n          '==',\n          'place',\n          'sea'\n        ],\n        [\n          '==',\n          'place',\n          'ocean'\n        ]\n      ],\n      layout: {\n        'text-font': [\n          'Microsoft JhengHei',\n          'STHeitiTC-Medium'\n        ],\n        'text-field': [\n          'get',\n          'name'\n        ],\n        'text-size': 14,\n        'text-letter-spacing': 0.15\n      },\n      paint: {\n        'text-color': 'white',\n        'text-halo-color': '#a4cae1',\n        'text-halo-width': 1\n      }\n    },\n    {\n      id: 'physical_point_peak',\n      type: 'symbol',\n      source: 'protomaps',\n      'source-layer': 'physical_point',\n      filter: [\n        'any',\n        [\n          '==',\n          'natural',\n          'peak'\n        ]\n      ],\n      layout: {\n        'text-font': [\n          'Microsoft JhengHei',\n          'STHeitiTC-Medium'\n        ],\n        'text-field': [\n          'get',\n          'name'\n        ],\n        'text-size': 14\n      },\n      paint: {\n        'text-color': '#61bb5b',\n        'text-halo-color': '#ffffff',\n        'text-halo-width': 1.5\n      }\n    },\n    {\n      id: 'places_subplace',\n      type: 'symbol',\n      source: 'protomaps',\n      'source-layer': 'places',\n      filter: [\n        '==',\n        'pmap:kind',\n        'neighbourhood'\n      ],\n      minzoom: 10,\n      layout: {\n        'text-field': '{name}',\n        'text-font': [\n          'Microsoft JhengHei',\n          'STHeitiTC-Medium'\n        ],\n        'text-size': {\n          base: 1.2,\n          stops: [\n            [\n              11,\n              13\n            ],\n            [\n              14,\n              15\n            ]\n          ]\n        },\n        'text-transform': 'uppercase'\n      },\n      paint: {\n        'text-color': '#757d91',\n        'text-halo-color': 'white',\n        'text-halo-width': 1\n      }\n    },\n    {\n      id: 'places_city_circle',\n      type: 'circle',\n      source: 'protomaps',\n      'source-layer': 'places',\n      filter: [\n        '==',\n        'pmap:kind',\n        'city'\n      ],\n      paint: {\n        'circle-radius': 2,\n        'circle-stroke-width': 2,\n        'circle-stroke-color': 'white',\n        'circle-color': '#666666'\n      },\n      maxzoom: 8\n    },\n    {\n      id: 'places_city',\n      type: 'symbol',\n      source: 'protomaps',\n      'source-layer': 'places',\n      filter: [\n        '==',\n        'pmap:kind',\n        'city'\n      ],\n      layout: {\n        'text-field': '{name}',\n        'text-font': [\n          'Microsoft JhengHei',\n          'STHeitiTC-Medium'\n        ],\n        'text-size': [\n          'step',\n          [\n            'get',\n            'pmap:rank'\n          ],\n          0,\n          1,\n          18,\n          2,\n          16\n        ],\n        'text-variable-anchor': [\n          'bottom-left'\n        ],\n        'text-radial-offset': 0.2\n      },\n      paint: {\n        'text-color': '#787878',\n        'text-halo-color': 'white',\n        'text-halo-width': 1\n      }\n    },\n    {\n      id: 'places_state',\n      type: 'symbol',\n      source: 'protomaps',\n      'source-layer': 'places',\n      filter: [\n        '==',\n        'pmap:kind',\n        'state'\n      ],\n      layout: {\n        'text-field': '{name}',\n        'text-font': [\n          'Microsoft JhengHei',\n          'STHeitiTC-Medium'\n        ],\n        'text-size': 12,\n        'text-radial-offset': 0.2,\n        'text-anchor': 'center',\n        'text-transform': 'uppercase'\n      },\n      paint: {\n        'text-color': '#bdbdbd',\n        'text-halo-color': 'white',\n        'text-halo-width': 0.5\n      }\n    },\n    {\n      id: 'places_country',\n      type: 'symbol',\n      source: 'protomaps',\n      'source-layer': 'places',\n      filter: [\n        '==',\n        'place',\n        'country'\n      ],\n      layout: {\n        'text-field': '{name}',\n        'text-font': [\n          'Microsoft JhengHei',\n          'STHeitiTC-Medium'\n        ],\n        'text-size': {\n          base: 1.2,\n          stops: [\n            [\n              2,\n              14\n            ],\n            [\n              6,\n              14\n            ],\n            [\n              8,\n              20\n            ]\n          ]\n        },\n        'text-transform': 'uppercase'\n      },\n      paint: {\n        'text-color': '#9590aa',\n        'text-halo-color': 'white',\n        'text-halo-width': 1.0\n      }\n    }\n  ]\n}\n","import { FactoryData } from '@/types'\nimport Feature from 'ol/Feature'\n\nconst featurePointCachedByCoord = new Map<string, Feature>()\nexport class FactoryPointCache {\n  static getFactoryCacheKey (factory: FactoryData) {\n    return `${factory.lat},${factory.lng}`\n  }\n\n  static getFactoryCache (factory: FactoryData) {\n    return featurePointCachedByCoord.get(this.getFactoryCacheKey(factory))\n  }\n\n  static setFactoryCache (factory: FactoryData, feature: Feature) {\n    featurePointCachedByCoord.set(this.getFactoryCacheKey(factory), feature)\n  }\n}\n\nexport default FactoryPointCache\n","import { inject, InjectionKey, provide, Ref, ref } from 'vue'\nimport { BASE_MAP } from './map'\n\nconst mapModeSymbol: InjectionKey<{ currentMapMode: Ref<BASE_MAP> }> = Symbol('MapModeSymbol')\n\nexport function provideMapMode () {\n  const currentMapMode = ref(BASE_MAP.OSM)\n\n  return provide(mapModeSymbol, { currentMapMode })\n}\n\nexport function useMapMode () {\n  const context = inject(mapModeSymbol)\n\n  if (!context) {\n    throw new Error('Please use provideMapMode before useMapMode.')\n  }\n\n  return context\n}\n","<template>\n  <v-bottom-sheet v-model=\"mapModeBottomSheet\">\n    <template v-slot:activator=\"{ on, attrs }\">\n      <v-btn\n        :rounded=\"!isInSheet\"\n        :text=\"isInSheet\"\n        :class=\"isInSheet ? 'pa-0' : null\"\n        color=\"white\"\n        class=\"primary--text\"\n        v-bind=\"attrs\"\n        v-on=\"on\"\n      >\n        切換地圖模式 • {{currentMapModeName}}\n      </v-btn>\n    </template>\n    <v-list>\n      <v-subheader>切換地圖模式</v-subheader>\n      <v-list-item\n        v-for=\"mode in mapModes\"\n        :key=\"mode.type\"\n        @click=\"currentMapMode = mode.type\"\n      >\n        <v-list-item-title class=\"primary--text\">{{ mode.name }}</v-list-item-title>\n      </v-list-item>\n    </v-list>\n  </v-bottom-sheet>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, inject, computed } from 'vue'\nimport { BASE_MAP, BASE_MAP_NAME, MapFactoryController } from '@/lib/map'\nimport { MainMapControllerSymbol } from '@/symbols'\nimport { useMapMode } from '@/lib/useMapMode'\n\nexport default defineComponent({\n  name: 'SwitchMapModeButton',\n  props: {\n    isInSheet: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup () {\n    const mapModeBottomSheet = ref(false)\n    const mapController = inject(MainMapControllerSymbol, ref<MapFactoryController>())\n\n    const { currentMapMode: currentMapMode$ } = useMapMode()\n    const currentMapMode = computed({\n      get: () => currentMapMode$.value,\n      set: (value) => {\n        currentMapMode$.value = value\n\n        mapController.value?.mapInstance.changeBaseMap(value)\n        mapModeBottomSheet.value = false\n      }\n    })\n\n    const mapModes = [\n      BASE_MAP.SATELITE,\n      BASE_MAP.OSM,\n      BASE_MAP.TAIWAN,\n      BASE_MAP.PROTOMAP\n    ].map(type => ({\n      type,\n      name: BASE_MAP_NAME[type]\n    }))\n\n    const currentMapModeName = computed(() =>\n      mapModes.find((mode) => mode.type === currentMapMode.value)?.name ?? mapModes[0]?.name\n    )\n\n    return {\n      mapModeBottomSheet,\n      mapModes,\n      currentMapMode,\n      currentMapModeName\n    }\n  }\n})\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SwitchMapModeButton.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SwitchMapModeButton.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./SwitchMapModeButton.vue?vue&type=template&id=baa46574\"\nimport script from \"./SwitchMapModeButton.vue?vue&type=script&lang=ts\"\nexport * from \"./SwitchMapModeButton.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <span>\n    <v-menu\n      v-if=\"$vuetify.breakpoint.mdAndUp\"\n      content-class=\"display-setting-popover\"\n      v-model=\"isOpen\"\n      :close-on-content-click=\"false\"\n      :nudge-width=\"200\"\n      offset-y\n    >\n      <template v-slot:activator=\"{ on, attrs }\">\n        <v-btn\n          color=\"primary\"\n          class=\"mx-2 mb-5 white--text\"\n          v-bind=\"attrs\"\n          v-on=\"on\"\n        >\n          顯示設定\n        </v-btn>\n      </template>\n      <v-card>\n        <v-list>\n          <v-list-item>\n            <h2 class=\"primary--text text-button\">農地範圍 •</h2>\n            <v-btn\n              text\n              x-small\n              class=\"primary--text\"\n              :class=\"\n                !isLUIMapVisable ? 'font-weight-bold' : 'font-weight-light'\n              \"\n              @click=\"isLUIMapVisable = false\"\n              >隱藏</v-btn\n            >\n            <v-btn\n              text\n              x-small\n              class=\"primary--text\"\n              :class=\"\n                isLUIMapVisable ? 'font-weight-bold' : 'font-weight-light'\n              \"\n              @click=\"isLUIMapVisable = true\"\n              >顯示</v-btn\n            >\n          </v-list-item>\n          <v-list-item>\n            <switch-map-mode-button :isInSheet=\"true\" />\n          </v-list-item>\n        </v-list>\n      </v-card>\n    </v-menu>\n\n    <!-- Mobile -->\n    <v-bottom-sheet v-else v-model=\"isOpen\">\n      <template v-slot:activator=\"{ on, attrs }\">\n        <v-btn\n          color=\"primary\"\n          class=\"mx-2 mb-5 white--text\"\n          v-bind=\"attrs\"\n          v-on=\"on\"\n        >\n          顯示設定\n        </v-btn>\n      </template>\n      <v-list>\n        <v-subheader>地圖顯示設定</v-subheader>\n        <v-list-item>\n          <h2 class=\"primary--text text-button\">農地範圍 •</h2>\n          <v-btn\n            text\n            x-small\n            class=\"primary--text\"\n            :class=\"!isLUIMapVisable ? 'font-weight-bold' : 'font-weight-light'\"\n            @click=\"isLUIMapVisable = false\"\n            >隱藏</v-btn\n          >\n          <v-btn\n            text\n            x-small\n            class=\"primary--text\"\n            :class=\"isLUIMapVisable ? 'font-weight-bold' : 'font-weight-light'\"\n            @click=\"isLUIMapVisable = true\"\n            >顯示</v-btn\n          >\n        </v-list-item>\n        <v-list-item>\n          <switch-map-mode-button :isInSheet=\"true\" />\n        </v-list-item>\n      </v-list>\n    </v-bottom-sheet>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, inject, computed } from 'vue'\nimport { MainMapControllerSymbol } from '@/symbols'\nimport { MapFactoryController } from '@/lib/map'\n\nimport SwitchMapModeButton from '@/components/SwitchMapModeButton.vue'\n\nexport default defineComponent({\n  name: 'DisplaySettingBottomSheet',\n  components: {\n    SwitchMapModeButton\n  },\n  setup () {\n    const isOpen = ref(false)\n    const mapController = inject(\n      MainMapControllerSymbol,\n      ref<MapFactoryController>()\n    )\n\n    const isLUIMapVisable$ = ref(false)\n    const isLUIMapVisable = computed({\n      get: () => {\n        return !!mapController.value?.mapInstance.getLUILayerVisible()\n      },\n      set: value => {\n        mapController.value?.mapInstance.setLUILayerVisible(value)\n        isLUIMapVisable$.value = value\n      }\n    })\n\n    return {\n      isOpen,\n      isLUIMapVisable\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.display-setting-popover {\n  margin-top: 20px;\n  contain: initial;\n  overflow: visible;\n}\n.display-setting-popover::before {\n  position: absolute;\n  content: \"\";\n  top: 0;\n  left: 30px;\n  transform: translateY(-100%);\n  width: 10px;\n  height: 13px;\n  border-left: 10px solid transparent;\n  border-right: 10px solid transparent;\n  border-bottom: 13px solid #fff;\n  z-index: 1;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DisplaySettingBottomSheet.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./DisplaySettingBottomSheet.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./DisplaySettingBottomSheet.vue?vue&type=template&id=2c80a36f&scoped=true\"\nimport script from \"./DisplaySettingBottomSheet.vue?vue&type=script&lang=ts\"\nexport * from \"./DisplaySettingBottomSheet.vue?vue&type=script&lang=ts\"\nimport style0 from \"./DisplaySettingBottomSheet.vue?vue&type=style&index=0&id=2c80a36f&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2c80a36f\",\n  null\n  \n)\n\nexport default component.exports","import { ref, computed } from 'vue'\n\nconst API_BASE_URL_KEY = 'api-base-url'\n\n// Default API base URL (build-time value)\nconst defaultBaseURL = process.env.NODE_ENV === 'production' ? process.env.VUE_APP_BASE_URL : '/server/api'\n\n// Reactive API base URL\nconst customBaseURL = ref<string | null>(localStorage.getItem(API_BASE_URL_KEY))\n\n// Computed current base URL\nexport const currentBaseURL = computed(() => customBaseURL.value || defaultBaseURL)\n\n// Get the default base URL\nexport const getDefaultBaseURL = (): string => defaultBaseURL\n\n// Set custom base URL and save to localStorage\nexport const setCustomBaseURL = (url: string): void => {\n  customBaseURL.value = url\n  localStorage.setItem(API_BASE_URL_KEY, url)\n}\n\n// Reset to default base URL and remove from localStorage\nexport const resetToDefaultBaseURL = (): void => {\n  customBaseURL.value = null\n  localStorage.removeItem(API_BASE_URL_KEY)\n}\n\n// Get current custom base URL (null if using default)\nexport const getCustomBaseURL = (): string | null => customBaseURL.value\n","import axios from 'axios'\nimport { FactoryPostData, FactoryData, FactoriesResponse, FactoryImage, ReportRecord } from '@/types'\nimport EXIF from '@disfactory/exif-js'\nimport { currentBaseURL } from '@/lib/apiConfig'\nimport { watch } from 'vue'\n\nconst instance = axios.create({\n  headers: {\n    'Content-Type': 'application/json'\n  }\n})\n\n// Update base URL whenever currentBaseURL changes\nconst updateBaseURL = () => {\n  instance.defaults.baseURL = currentBaseURL.value\n}\n\n// Set initial base URL and watch for changes\nupdateBaseURL()\nwatch(currentBaseURL, updateBaseURL)\n\ntype ImageResponse = {\n  token: string\n}\n\nexport type UploadedImages = {\n  token: string,\n  src: string // used for preview images\n}[]\n\nexport async function getFactories (range: number, lng: number, lat: number): Promise<FactoriesResponse> {\n  try {\n    const { data } = await instance.get(`/factories?range=${range}&lng=${lng}&lat=${lat}`)\n    return data\n  } catch (err) {\n    console.error(err)\n    throw new TypeError('Get factory failed')\n  }\n}\n\nexport async function getFactory (factoryId: string): Promise<FactoryData> {\n  try {\n    const { data } = await instance.get(`/factories/${factoryId}`)\n    return data\n  } catch (err) {\n    console.error(err)\n    throw new TypeError('Get factory failed')\n  }\n}\n\nconst IMGUR_CLIENT_ID = '39048813b021935'\n\nasync function uploadToImgur (file: File) {\n  const formData = new FormData()\n  formData.append('image', file)\n\n  const { data } = await axios({\n    method: 'POST',\n    url: 'https://api.imgur.com/3/image',\n    data: formData,\n    headers: {\n      'Content-Type': 'multipart/form-data',\n      Authorization: `Client-ID ${IMGUR_CLIENT_ID}`\n    }\n  })\n\n  return {\n    link: data.data.link as string,\n    deletehash: data.data.deletehash as string,\n    file\n  }\n}\n\nconst convertTurple2Number = (input: [number, number, number]) => input[0] + (input[1] / 60) + (input[2] / 3600)\n\ntype ExifData = { DateTimeOriginal?: string, GPSLatitude?: [number, number, number], GPSLongitude?: [number, number, number] }\ntype AfterExifData = { Latitude?: number, Longitude?: number, DateTimeOriginal?: string }\n\nfunction readImageExif (file: File): Promise<AfterExifData> {\n  const fileReader = new FileReader()\n  return new Promise((resolve) => {\n    fileReader.onload = (e: ProgressEvent<FileReader>) => {\n      if (!e.target) {\n        resolve({})\n        return\n      }\n      const data: ExifData = EXIF.readFromBinaryFile(e.target.result)\n\n      const result: AfterExifData = {}\n      if (data.GPSLatitude) {\n        result.Latitude = convertTurple2Number(data.GPSLatitude)\n      }\n      if (data.GPSLongitude) {\n        result.Longitude = convertTurple2Number(data.GPSLongitude)\n      }\n      if (data.DateTimeOriginal) {\n        result.DateTimeOriginal = data.DateTimeOriginal\n      }\n\n      resolve(result)\n    }\n    fileReader.readAsArrayBuffer(file)\n  })\n}\n\nexport type UploadedImage = {\n  token: string,\n  src: string\n}\n\nasync function uploadExifAndGetToken ({ link, file, deletehash }: { link: string, file: File, deletehash: string }) {\n  const exifData = await readImageExif(file)\n  const { data }: { data: ImageResponse } = await instance.post('/images', { url: link, ...exifData, deletehash })\n\n  return {\n    token: data.token,\n    src: URL.createObjectURL(file)\n  } as UploadedImage\n}\n\nexport async function uploadImages (files: FileList): Promise<UploadedImages> {\n  return Promise.all(\n    Array.from(files).map((file) => uploadToImgur(file).then((el) => uploadExifAndGetToken(el)))\n  )\n}\n\nexport async function updateFactoryImages (factoryId: string, files: FileList, { nickname, contact }: { nickname?: string, contact?: string }) {\n  return Promise.all(\n    Array.from(files).map((file) => uploadToImgur(file).then((el) => (async () => {\n      const exifData = await readImageExif(el.file)\n      const { data }: { data: FactoryImage } = await instance.post(`/factories/${factoryId}/images`, { url: el.link, ...exifData, nickname, contact, deletehash: el.deletehash })\n      data.image_path = el.link\n      return data\n    })()))\n  )\n}\n\nexport async function createFactory (factory: FactoryPostData): Promise<FactoryData> {\n  try {\n    const { data }: { data: FactoryData } = await instance.post('/factories', JSON.stringify(factory))\n\n    return data\n  } catch (err) {\n    console.error(err)\n    throw new TypeError('Create factory failed')\n  }\n}\n\n// !FIXME: add more factory fields\ntype UpdatableFactoryFields = {\n  name: string,\n  nickname: string,\n  contact: string,\n  others: string,\n  images: string[]\n}\n\nexport async function updateFactory (factoryId: string, factoryData: Partial<UpdatableFactoryFields>): Promise<FactoryData> {\n  try {\n    const { data }: { data: FactoryData } = await instance.put(`/factories/${factoryId}`, JSON.stringify(factoryData))\n\n    return data\n  } catch (err) {\n    console.error(err)\n    throw new TypeError('Update factory failed')\n  }\n}\n\nexport async function getFactoryReportRecords (factoryId: string) {\n  try {\n    const { data }: { data: ReportRecord[] } = await instance.get(`/factories/${factoryId}/report_records`)\n    return data\n  } catch (err) {\n    console.error(err)\n    throw new TypeError('Fetch factory error')\n  }\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { getCurrentInstance } from 'vue'\n\nexport function useGA () {\n  const instance = getCurrentInstance()\n  const gtag = (instance?.proxy as any)?.$gtag\n\n  const pageview = (path: string) => {\n    if (gtag) {\n      gtag.pageview({ page_path: path })\n    }\n  }\n\n  const event = (event: string, data: any = {}) => {\n    if (gtag) {\n      gtag.event(event, data)\n    }\n  }\n\n  return { pageview, event }\n}\n","// eslint-disable-next-line @typescript-eslint/prefer-regexp-exec\nexport const isiOS = !!(navigator.userAgent.match(/(iPod|iPhone|iPad)/) && navigator.userAgent.match(/AppleWebKit/))\n\nexport const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent)\n\nexport function iOSversion () {\n  if (/iP(hone|od|ad)/.test(navigator.platform)) {\n    /* eslint-disable-next-line @typescript-eslint/prefer-regexp-exec */\n    const v = (navigator.appVersion).match(/OS (\\d+)_(\\d+)_?(\\d+)?/)\n    if (v) {\n      return [parseInt(v[1], 10), parseInt(v[2], 10), parseInt(v[3] || '0', 10)].join('.')\n    }\n  }\n}\n\nexport function isNotSupportedIOS () {\n  let version\n  /* eslint-disable-next-line @typescript-eslint/prefer-regexp-exec */\n  return !!isiOS && !!(version = iOSversion()) && !!version.match(/^13\\.(1|2|3)/)\n}\n","import { ref, Ref, reactive } from 'vue'\nimport { useGA } from './useGA'\nimport { isNotSupportedIOS } from './browserCheck'\n\nexport const useModal = (defaultOpen = false): [Ref<boolean>, { open: () => void, dismiss: () => void }] => {\n  const state = ref(defaultOpen)\n\n  const open = () => {\n    state.value = true\n  }\n\n  const dismiss = () => {\n    state.value = false\n  }\n\n  return [\n    state,\n    {\n      open,\n      dismiss\n    }\n  ]\n}\n\n// Global modal state - simple reactive object without provide/inject\nconst modalState = reactive({\n  updateFactorySuccessModal: false,\n  updateFactoryImageSuccessModal: false,\n  createFactorySuccessModal: false,\n  aboutModalOpen: false,\n  contactModalOpen: false,\n  safetyModalOpen: false,\n  gettingStartedModalOpen: localStorage.getItem('use-app') !== 'true',\n  tutorialModalOpen: false,\n  supportIOSVersionModalOpen: isNotSupportedIOS(),\n  apiConfigModalOpen: false,\n\n  sidebarOpen: false,\n  filterModalOpen: false\n})\n\nexport const useModalState = () => {\n  const { event } = useGA()\n\n  const openUpdateFactoryImagesSuccessModal = () => {\n    modalState.updateFactoryImageSuccessModal = true\n\n    window.setTimeout(() => {\n      modalState.updateFactoryImageSuccessModal = false\n    }, 3000)\n  }\n\n  const openUpdateFactorySuccessModal = () => {\n    modalState.updateFactorySuccessModal = true\n\n    window.setTimeout(() => {\n      modalState.updateFactorySuccessModal = false\n    }, 3000)\n  }\n\n  const openCreateFactorySuccessModal = () => {\n    modalState.createFactorySuccessModal = true\n    window.setTimeout(() => {\n      modalState.createFactorySuccessModal = false\n    }, 3000)\n  }\n  const closeCreateFactorySuccessModal = () => { modalState.createFactorySuccessModal = false }\n\n  const openAboutModal = () => { modalState.aboutModalOpen = true }\n  const closeAboutModal = () => { modalState.aboutModalOpen = false }\n\n  const openContactModal = () => { modalState.contactModalOpen = true }\n  const closeContactModal = () => { modalState.contactModalOpen = false }\n\n  const openSafetyModal = () => { modalState.safetyModalOpen = true }\n  const closeSafetyModal = () => { modalState.safetyModalOpen = false }\n\n  const openGettingStartedModal = () => { modalState.gettingStartedModalOpen = true }\n  const closeGettingStartedModal = () => { modalState.gettingStartedModalOpen = false }\n\n  const openTutorialModal = () => { modalState.tutorialModalOpen = true }\n  const closeTutorialModal = () => { modalState.tutorialModalOpen = false }\n\n  const openApiConfigModal = () => { modalState.apiConfigModalOpen = true }\n  // This is for testing purpose\n  (window as any).openApiConfigModal = openApiConfigModal\n  const closeApiConfigModal = () => { modalState.apiConfigModalOpen = false }\n\n  const closesupportIOSVersionModal = () => { modalState.supportIOSVersionModalOpen = false }\n\n  const toggleSidebar = () => {\n    const open = !modalState.sidebarOpen\n    event('toggleSidebar', { target: open })\n    modalState.sidebarOpen = open\n  }\n\n  const closeFilterModal = () => {\n    event('closeFilterModal')\n    modalState.filterModalOpen = false\n  }\n  const openFilterModal = () => {\n    event('openFilterModal')\n    modalState.filterModalOpen = true\n  }\n\n  const modalActions = {\n    openUpdateFactorySuccessModal,\n    openUpdateFactoryImagesSuccessModal,\n\n    openCreateFactorySuccessModal,\n    closeCreateFactorySuccessModal,\n\n    openAboutModal,\n    closeAboutModal,\n\n    openContactModal,\n    closeContactModal,\n\n    openSafetyModal,\n    closeSafetyModal,\n\n    openGettingStartedModal,\n    closeGettingStartedModal,\n\n    openTutorialModal,\n    closeTutorialModal,\n\n    openApiConfigModal,\n    closeApiConfigModal,\n\n    toggleSidebar,\n    openFilterModal,\n    closeFilterModal,\n\n    closesupportIOSVersionModal\n  }\n\n  return [modalState, modalActions] as const\n}\n","import { reactive, computed } from 'vue'\nimport { useGA } from './useGA'\nimport type { FactoryData } from '../types'\nimport { featureStyleCache } from './map'\n\n// A global state that can be shared across the entire application\n\nexport const enum PageState {\n  INITIAL = 'INITIAL',\n  CREATE_FACTORY_1 = 'CREATE_FACTORY_1',\n  CREATE_FACTORY_2 = 'CREATE_FACTORY_2',\n  CREATE_FACTORY_3 = 'CREATE_FACTORY_3',\n  UPDATE_FACTORY_IMAGES = 'UPDATE_FACTORY_IMAGES',\n  UPDATE_FACTORY_MODE = 'UPDATE_FACTORY_MODE'\n}\n\nconst CreateFactoryPageState = [\n  PageState.CREATE_FACTORY_1,\n  PageState.CREATE_FACTORY_2,\n  PageState.CREATE_FACTORY_3\n]\n\nconst UpdateFactoryPageState = [\n  PageState.UPDATE_FACTORY_IMAGES,\n  PageState.UPDATE_FACTORY_MODE\n]\n\n// Global app state - simple reactive object without provide/inject\nconst appState = reactive({\n  // Page state\n  pageState: PageState.INITIAL,\n\n  factoryData: null as FactoryData | null,\n  factoryLocation: [] as number[],\n\n  get isCreateMode () { return CreateFactoryPageState.includes(appState.pageState) },\n  get createStepIndex () { return CreateFactoryPageState.indexOf(appState.pageState) + 1 },\n\n  get isEditImagesMode () { return appState.pageState === PageState.UPDATE_FACTORY_IMAGES },\n  get isEditFactoryMode () { return appState.pageState === PageState.UPDATE_FACTORY_MODE },\n  updateFactoryField: 'others',\n  get isEditComment () { return appState.pageState === PageState.UPDATE_FACTORY_MODE && appState.updateFactoryField === 'others' },\n  get isEditName () { return appState.pageState === PageState.UPDATE_FACTORY_MODE && appState.updateFactoryField === 'name' },\n  get isEditType () { return appState.pageState === PageState.UPDATE_FACTORY_MODE && appState.updateFactoryField === 'factory_type' },\n\n  get isEditMode () { return UpdateFactoryPageState.includes(appState.pageState) },\n  get isInitialState () { return appState.pageState === PageState.INITIAL },\n\n  get selectFactoryMode () { return appState.pageState === PageState.CREATE_FACTORY_1 },\n  get formPageOpen () { return CreateFactoryPageState.includes(appState.pageState) || appState.pageState === PageState.UPDATE_FACTORY_IMAGES },\n  get isInitialPage () { return appState.pageState === PageState.INITIAL },\n\n  // map states\n  mapLngLat: [] as number[],\n  canPlaceFactory: false,\n  factoryDetailsExpanded: false\n})\n\nexport const useAppState = () => {\n  const { event, pageview } = useGA()\n\n  // page transition methods\n  const invalidPageTransition = () => {\n    throw new Error('Invalid page transition')\n  }\n\n  // a state machine transition implementation\n  const pageTransition = {\n    startCreateFactory () {\n      if (appState.pageState === PageState.INITIAL) {\n        appState.pageState = PageState.CREATE_FACTORY_1\n      } else {\n        invalidPageTransition()\n      }\n\n      event('enterSelectFactoryMode')\n    },\n\n    gotoNextCreate () {\n      const index = CreateFactoryPageState.indexOf(appState.pageState)\n      if (index !== -1 && index !== CreateFactoryPageState.length - 1) {\n        appState.pageState = CreateFactoryPageState[index + 1]\n      } else {\n        invalidPageTransition()\n      }\n\n      if (index === 0) {\n        pageview('/create')\n      }\n    },\n\n    nextCreateStep () {\n      const index = CreateFactoryPageState.indexOf(appState.pageState)\n      if (CreateFactoryPageState[index + 1]) {\n        appState.pageState = CreateFactoryPageState[index + 1]\n      }\n    },\n\n    previousCreateStep () {\n      const index = CreateFactoryPageState.indexOf(appState.pageState)\n      if (CreateFactoryPageState[index - 1]) {\n        appState.pageState = CreateFactoryPageState[index - 1]\n      }\n    },\n\n    cancelCreateFactory () {\n      if (appState.pageState in CreateFactoryPageState) {\n        appState.pageState = PageState.INITIAL\n      } else {\n        invalidPageTransition()\n      }\n\n      event('exitSelectFactoryMode')\n    },\n\n    /**\n     * Goto create step\n     * Noted: **zero-based**, can be either 0, 1, 2\n     */\n    gotoCreateStep (step: number) {\n      if (CreateFactoryPageState[step]) {\n        appState.pageState = CreateFactoryPageState[step]\n      } else {\n        invalidPageTransition()\n      }\n    },\n\n    startUpdateFactoryImages () {\n      if (appState.pageState === PageState.INITIAL) {\n        appState.pageState = PageState.UPDATE_FACTORY_IMAGES\n      } else {\n        invalidPageTransition()\n      }\n\n      pageview('/edit')\n    },\n\n    cancelUpdateFactoryImages () {\n      if (appState.pageState === PageState.UPDATE_FACTORY_IMAGES) {\n        appState.pageState = PageState.INITIAL\n      } else {\n        invalidPageTransition()\n      }\n\n      event('exitUpdateFactoryImagesMode')\n    },\n\n    startUpdateFactoryComment (field = 'others') {\n      if (appState.pageState === PageState.INITIAL) {\n        appState.pageState = PageState.UPDATE_FACTORY_MODE\n        appState.updateFactoryField = field\n      } else {\n        invalidPageTransition()\n      }\n\n      pageview('/editComment')\n    },\n\n    cancelUpdateFactoryComment () {\n      if (appState.pageState === PageState.UPDATE_FACTORY_MODE) {\n        appState.pageState = PageState.INITIAL\n      } else {\n        invalidPageTransition()\n      }\n\n      event('exitUpdateFactoryCommentsMode')\n    },\n\n    closeFactoryPage () {\n      if (CreateFactoryPageState.includes(appState.pageState) || UpdateFactoryPageState.includes(appState.pageState)) {\n        appState.pageState = PageState.INITIAL\n      } else {\n        invalidPageTransition()\n      }\n      event('closeFactoryPage')\n    }\n  }\n\n  function updateFactoryData (factory: FactoryData) {\n    appState.factoryData = factory\n  }\n\n  function expandFactoryDetail () {\n    appState.factoryDetailsExpanded = true\n  }\n\n  function collapseFactoryDetail () {\n    const defaultStyle = featureStyleCache.get(appState.factoryData?.id as string)\n    if (defaultStyle) {\n      appState.factoryData?.feature?.setStyle(defaultStyle)\n    }\n    appState.factoryDetailsExpanded = false\n    appState.factoryData = null\n  }\n\n  function toggleFactoryDetail () {\n    appState.factoryDetailsExpanded = !appState.factoryDetailsExpanded\n  }\n\n  const appActions = {\n    pageTransition,\n    updateFactoryData,\n    openEditFactoryForm (factory: FactoryData) {\n      updateFactoryData(factory)\n      pageTransition.startUpdateFactoryImages()\n      pageview('/edit')\n    },\n    setFactoryLocation (value: [number, number]) {\n      appState.factoryLocation = value\n      event('setFactoryLocation')\n    },\n    expandFactoryDetail,\n    collapseFactoryDetail,\n    toggleFactoryDetail\n  }\n\n  return [appState, appActions] as const\n}\n","import { reactive } from 'vue'\n\nenum AlertLevel {\n  info = 'info',\n  warn = 'warn',\n  error = 'error'\n}\n\ntype Alert = {\n  level: AlertLevel,\n  title: string,\n  dismissText: string\n}\n\ntype AlertState = {\n  alert: Alert | null,\n  timeout?: number\n}\n\n// Global alert state - simple reactive object without provide/inject\nconst alertState = reactive({\n  alert: null as Alert | null,\n  timeout: undefined as number | undefined\n})\n\nexport const useAlertState = () => {\n  const alertActions = {\n    showAlert (title: string, timeouts = 3000, level: AlertLevel = AlertLevel.warn, dismissText = '此錯誤訊息將在3秒後消失。') {\n      alertState.alert = {\n        title,\n        level,\n        dismissText\n      }\n\n      if (alertState.timeout) {\n        window.clearTimeout(alertState.timeout)\n      }\n\n      alertState.timeout = window.setTimeout(() => {\n        alertState.alert = null\n        alertState.timeout = undefined\n      }, timeouts)\n    },\n\n    dismissAlert () {\n      alertState.alert = null\n\n      if (alertState.timeout) {\n        window.clearTimeout(alertState.timeout)\n        alertState.timeout = undefined\n      }\n    }\n  }\n\n  return [alertState, alertActions] as const\n}\n","import { getFactory } from '@/api'\nimport { MapFactoryController } from './map'\n\nexport function parseHashParams (hash: string): { [key: string]: string } {\n  const hashContent = /^#(.+)/.exec(hash)\n\n  if (!hashContent) {\n    return {}\n  }\n\n  return hashContent[1].split('&').reduce((acc, kv) => {\n    const [key, value] = kv.split('=')\n    return ({\n      ...acc,\n      [key]: value\n    })\n  }, {})\n}\n\nexport function stringifyHash (obj: { [key: string]: string }): string {\n  return '#' + Object.entries(obj).map(([key, value]) => {\n    return `${key}=${value}`\n  }).join('&')\n}\n\n// https://github.com/teia-tw/drinking_water/blob/f2fe7962bf9a48438eec5068e8bfe8b320f5b7e7/app.js#L6-L36\n\ntype PermaLinkState = {\n  lat?: number,\n  lng?: number,\n  zoom?: number\n}\nconst fields: (keyof PermaLinkState)[] = ['lat', 'lng', 'zoom']\n\ntype KeyFn<T> = { [P in keyof Required<T>]: () => number | void }\n\nexport const permalink = new class implements KeyFn<PermaLinkState> {\n  s: PermaLinkState = {}\n\n  load (loc: Location) {\n    const { map } = parseHashParams(loc.hash)\n    const m = /([\\d.]+)\\/([\\d.]+)\\/([\\d.]+)$/.exec(map)\n    if (m !== null) {\n      this.s.zoom = parseFloat(m[1])\n      this.s.lng = parseFloat(m[2])\n      this.s.lat = parseFloat(m[3])\n    }\n  }\n\n  dumps () {\n    if (fields.some(f => typeof this.s[f] === 'undefined')) {\n      return ''\n    }\n    return `#map=${this.s.zoom?.toFixed(2)}/${this.s.lng}/${this.s.lat}`\n  }\n\n  defineGetterSetter (key: keyof PermaLinkState) {\n    return (...args: number[]) => {\n      if (args.length > 0) {\n        this.s[key] = args[0]\n      }\n      return this.s[key]\n    }\n  }\n\n  lng = this.defineGetterSetter('lng')\n  lat = this.defineGetterSetter('lat')\n  zoom = this.defineGetterSetter('zoom')\n}()\n\nexport async function moveToSharedFactory (mapController: MapFactoryController, location: Location, cb: (factoryId: string) => void) {\n  const { factoryId, ...others } = parseHashParams(location.hash)\n\n  if (!factoryId) {\n    return\n  }\n\n  const factoryData = await getFactory(factoryId)\n\n  if (!factoryData) {\n    return\n  }\n\n  mapController.addFactories([factoryData])\n\n  mapController.mapInstance.setCoordinate(factoryData.lng, factoryData.lat)\n\n  location.hash = stringifyHash(others)\n\n  cb(factoryId)\n}\n","import { nextTick } from 'vue'\n\nexport const sleep = (ms: number) => new Promise(resolve => window.setTimeout(resolve, ms))\n\nexport const waitNextTick = () => nextTick()\n","<template>\n  <div class=\"map-container\">\n    <div ref=\"root\" class=\"map\"></div>\n\n    <div class=\"container-fluid px-1 pt-7 pb-4 filter-buttons-container\" :class=\"{ desktop: $vuetify.breakpoint.mdAndUp, 'sidebar-expanded': appState.factoryDetailsExpanded }\" v-if=\"appState.isInitialPage\">\n      <display-setting-bottom-sheet />\n      <v-btn class=\"mx-2 mb-5 primary--text\" v-for=\"button in filterButtonsData\" :key=\"button.value\" @click=\"onClickFilterButton(button.value)\" rounded :class=\"{ 'inactive-filter': !checkActive(button.value) }\" color=\"white\" :name=\"button.text\">\n        <v-icon :color=\"button.color\">mdi-map-marker</v-icon>\n        {{ button.text }}\n      </v-btn>\n    </div>\n\n    <div class=\"ol-fit-location ol-unselectable ol-control\" @click=\"zoomToGeolocation\" data-label=\"map-locate\">\n      <button title=\"定位\">\n        <img src=\"/images/locate.svg\" alt=\"locate\">\n      </button>\n    </div>\n\n    <div class=\"center-point\" v-if=\"appState.selectFactoryMode\" />\n\n    <div class=\"factory-button-group flex justify-center mb-5 mb-8-md\" v-if=\"!appState.selectFactoryMode\">\n      <v-btn @click=\"onClickCreateFactoryButton\" color=\"primary\" rounded large>\n        我想新增可疑工廠\n      </v-btn>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, onUnmounted, ref, inject, getCurrentInstance } from 'vue'\nimport debounce from 'lodash.debounce'\n\nimport DisplaySettingBottomSheet from '@/components/DisplaySettingBottomSheet.vue'\n\nimport { initializeMap, MapFactoryController, getFactoryStatus } from '../lib/map'\nimport { getFactories } from '../api'\nimport { MainMapControllerSymbol } from '../symbols'\nimport { Feature, Overlay } from 'ol'\nimport { Coordinate } from 'ol/coordinate'\nimport Point from 'ol/geom/Point'\nimport OverlayPositioning from 'ol/OverlayPositioning'\nimport { defaultFactoryDisplayStatuses, FactoryDisplayStatusType, getDisplayStatusColor, getDisplayStatusText } from '../types'\nimport { useGA } from '@/lib/useGA'\nimport { useModalState } from '../lib/hooks'\nimport { useAppState } from '../lib/appState'\nimport { useAlertState } from '../lib/useAlert'\nimport { moveToSharedFactory, permalink } from '../lib/permalink'\nimport { waitNextTick } from '../lib/utils'\n\nexport default defineComponent({\n  name: 'MapView',\n  components: {\n    DisplaySettingBottomSheet\n  },\n  props: {\n    setFactoryLocation: {\n      type: Function,\n      required: true\n    }\n  },\n  setup (props, context) {\n    const { event } = useGA()\n    const root = ref<HTMLElement | null>(null)\n    const popup = ref<HTMLDivElement | null>(null)\n    const mapControllerRef = inject(MainMapControllerSymbol, ref<MapFactoryController>())\n    const instance = getCurrentInstance()\n\n    const [, modalActions] = useModalState()\n    const [appState, { openEditFactoryForm, pageTransition, expandFactoryDetail }] = useAppState()\n    const [, alertActions] = useAlertState()\n\n    const openFactoryDetail = (feature: Feature) => {\n      if (!mapControllerRef.value) return\n\n      const factoryId = feature.get('factoryId') as string\n      const factory = mapControllerRef.value.getFactory(factoryId)\n\n      if (factory) {\n        factory.feature = feature\n        appState.factoryData = factory\n      }\n    }\n\n    const resizeMap = function () {\n      if (mapControllerRef.value) {\n        mapControllerRef.value.mapInstance.map.updateSize()\n      }\n    }\n\n    const onClickEditFactoryData = () => {\n      if (!appState.factoryData) {\n        return\n      }\n\n      openEditFactoryForm(appState.factoryData)\n    }\n\n    onMounted(() => {\n      const popupOverlay = new Overlay({\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        element: popup.value!,\n        positioning: OverlayPositioning.BOTTOM_LEFT\n      })\n\n      const onClickFactoryFeature = async (_: [number, number], feature?: Feature) => {\n        // unset active factory data style\n        if (appState.factoryData?.feature?.get('defaultStyle')) {\n          appState.factoryData?.feature?.setStyle(appState.factoryData?.feature?.get('defaultStyle'))\n        }\n\n        if (feature) {\n          event('clickFactoryPin')\n          if (feature.get('factoryId')) {\n            openFactoryDetail(feature)\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if ((instance?.proxy as any)?.$vuetify.breakpoint.mdAndUp) {\n              expandFactoryDetail()\n            }\n          } else {\n            // eslint-disable-next-line\n            // @ts-ignore\n            const p: Point = feature.getGeometry()\n            // eslint-disable-next-line\n            // @ts-ignore\n            const c: Coordinate = p.getCoordinates()\n            mapControllerRef?.value?.mapInstance?.map?.getView().setCenter(c)\n            const zoom = mapControllerRef?.value?.mapInstance?.map?.getView().getZoom()\n            mapControllerRef?.value?.mapInstance?.map?.getView().setZoom((zoom || 0) + 1)\n          }\n        } else {\n          appState.factoryData = null\n        }\n\n        // Workaround map resizing issue\n        await waitNextTick()\n        resizeMap()\n      }\n\n      let mapController: MapFactoryController | null = null\n\n      const loadNewFactories = debounce(async function (range: number, longitude: number, latitude: number) {\n        const factories = await getFactories(range, longitude, latitude)\n        if (Array.isArray(factories)) {\n          mapController!.addFactories(factories)\n        }\n      }, 500)\n\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      mapController = initializeMap(root.value!, {\n        onMoved: async function ([longitude, latitude, range, zoom], canPlaceFactory) {\n          permalink.lat(latitude)\n          permalink.lng(longitude)\n          permalink.zoom(zoom)\n          window.location.hash = permalink.dumps()\n\n          appState.canPlaceFactory = canPlaceFactory\n          appState.mapLngLat = [longitude, latitude]\n\n          event('moveMap')\n          try {\n            await loadNewFactories(range, longitude, latitude)\n          } catch (e) {\n            // TODO: handle here\n          }\n        }, // TODO: do on start move to lock selection\n        onClicked: onClickFactoryFeature,\n        onZoomed: function (zoom) {\n          permalink.zoom(zoom)\n          window.location.hash = permalink.dumps()\n        }\n      }, {\n        getInitialLocation: function () {\n          permalink.load(window.location)\n\n          if (permalink.dumps() !== '') {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return [permalink.lng()!, permalink.lat()!, permalink.zoom()!]\n          }\n        }\n      })\n\n      moveToSharedFactory(mapController, window.location, (factoryId) => {\n        const factory = mapControllerRef?.value?.getFactory(factoryId)\n        if (factory) {\n          const feature = mapController!.getFactoriesLayerForStatus(getFactoryStatus(factory)).getFeatureById(factoryId)\n          // eslint-disable-next-line @typescript-eslint/no-unnecessary-type-assertion\n          onClickFactoryFeature([0, 0], feature as Feature)\n        }\n      })\n\n      mapController.mapInstance.map.addOverlay(popupOverlay)\n      mapControllerRef.value = mapController\n\n      mapController.mapInstance.setLUILayerVisible(false)\n    })\n\n    onMounted(() => {\n      window.addEventListener('resize', resizeMap)\n    })\n\n    onUnmounted(() => {\n      window.removeEventListener('resize', resizeMap)\n    })\n\n    function onClickCreateFactoryButton () {\n      if (!mapControllerRef.value) return\n\n      mapControllerRef.value.mapInstance.setLUILayerVisible(true)\n\n      pageTransition.startCreateFactory()\n    }\n\n    const appliedFilters = ref<FactoryDisplayStatusType[]>(defaultFactoryDisplayStatuses)\n    const checkActive = (status: FactoryDisplayStatusType) => appliedFilters.value.includes(status)\n\n    const onClickFilterButton = (status: FactoryDisplayStatusType) => {\n      if (!mapControllerRef.value) {\n        return\n      }\n\n      if (checkActive(status)) {\n        appliedFilters.value = appliedFilters.value.filter(f => f !== status)\n      } else {\n        appliedFilters.value = [\n          ...appliedFilters.value,\n          status\n        ]\n      }\n\n      mapControllerRef.value.mapInstance.map.getLayers().forEach((layer) => {\n        const factoryStatus = layer.get('factoryStatus')\n        if (factoryStatus === undefined) return\n        const comparableFactoryStatus = factoryStatus === 'default' ? factoryStatus : Number(factoryStatus)\n        if (!appliedFilters.value.includes(comparableFactoryStatus)) {\n          layer.setVisible(false)\n        } else {\n          layer.setVisible(true)\n        }\n      })\n    }\n\n    const filterButtonsData = defaultFactoryDisplayStatuses.map(v => ({\n      text: getDisplayStatusText(v),\n      color: getDisplayStatusColor(v),\n      value: v,\n      name: v\n    }))\n\n    return {\n      root,\n      modalActions,\n      popup,\n      zoomToGeolocation: function () {\n        if (mapControllerRef.value) {\n          event('zoomToGeolocation')\n          try {\n            mapControllerRef.value.mapInstance.zoomToGeolocation()\n          } catch (err) {\n            alertActions.showAlert('您沒開放手機定位權限， \\n請開放定位權限以用定位功能。')\n          }\n        }\n      },\n      appState,\n      onClickEditFactoryData,\n      onClickCreateFactoryButton,\n      onClickFilterButton,\n      filterButtonsData,\n      checkActive,\n      appliedFilters\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~@/styles/variables';\n@import '~@/styles/utils';\n\n.map-container {\n  top: 0;\n  bottom: 0;\n  width: 100vw;\n  height: 100%;\n  position: absolute;\n\n  .ol-switch-base, .ol-switch-luilayer-visibility {\n    background: #6E8501;\n    position: relative;\n    width: auto;\n    height: auto;\n    text-align: center;\n    display: inline-block;\n\n    button {\n      display: inline-block;\n      width: auto;\n      font-size: 14px;\n    }\n  }\n}\n\n.map {\n  height: 100%;\n}\n\n.factory-button-group {\n  position: fixed;\n  width: 100%;\n  left: 0;\n  bottom: 0px;\n\n  .v-btn.v-size--large {\n    font-size: 24px;\n    height: 48px;\n    padding: 0 35px;\n  }\n}\n\n.center-point {\n  width: 25px;\n  height: 25px;\n  border-radius: 50%;\n  display: block;\n  background-color: $red-color;\n  border: solid 1px white;\n\n  position: fixed;\n  top: 50%;\n  left: 0;\n  z-index: 2;\n\n  transform: translate(calc(50vw - 12.5px), 12.5px);\n}\n\n.navbar-container {\n  position: absolute;\n  top: -47px;\n  left: 0;\n  z-index: 5;\n}\n\n.region-alert {\n  user-select: none;\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  background-color: #6E8501;\n  color: white;\n  width: 100%;\n  padding: 10px 20px;\n  font-size: 14px;\n  line-height: 19px;\n}\n\n.filter-buttons-container {\n  position: absolute;\n  top: 0;\n  overflow-x: auto;\n  max-width: 100%;\n  white-space: nowrap;\n\n  .v-btn.inactive-filter {\n    opacity: 0.5;\n  }\n\n  &.desktop {\n    white-space: normal;\n  }\n\n  &.sidebar-expanded {\n    max-width: calc(100% - 395px);\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Map.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./Map.vue?vue&type=template&id=4a1d0225&scoped=true\"\nimport script from \"./Map.vue?vue&type=script&lang=ts\"\nexport * from \"./Map.vue?vue&type=script&lang=ts\"\nimport style0 from \"./Map.vue?vue&type=style&index=0&id=4a1d0225&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a1d0225\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return (_vm.alert)?_c('div',{staticClass:\"app-alert\"},[_c('div',{staticClass:\"close\",attrs:{\"data-label\":\"alert-close\"},on:{\"click\":_vm.dismiss}}),_c('img',{attrs:{\"src\":\"/images/alert.svg\",\"alt\":\"alert\"}}),_c('div',[_c('div',{staticClass:\"alert-title\"},[_vm._v(_vm._s(_vm.alert.title))]),_c('p',{staticClass:\"alert-descriptioin\"},[_vm._v(_vm._s(_vm.alert.dismissText))])])]):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app-alert\" v-if=\"alert\">\n    <div class=\"close\" @click=\"dismiss\" data-label=\"alert-close\" />\n    <img src=\"/images/alert.svg\" alt=\"alert\">\n    <div>\n      <div class=\"alert-title\">{{ alert.title }}</div>\n      <p class=\"alert-descriptioin\">{{ alert.dismissText }}</p>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'AppAlert',\n  props: {\n    alert: {\n      type: Object\n    },\n    dismiss: {\n      type: Function\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~@/styles/utils';\n\n.app-alert {\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  background-color: rgba(0, 0, 0, 0.82);\n  color: white;\n  padding: 27px 23px 18px;\n\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-start;\n  z-index: 1;\n\n  img {\n    margin-right: 17px;\n  }\n\n  .alert-title {\n    font-size: 18px;\n    line-height: 20px;\n    font-weight: 500;\n    white-space: pre;\n  }\n\n  .alert-descriptioin {\n    font-size: 12px;\n  }\n\n  .close {\n    z-index: 2;\n    @include close-button;\n\n    top: 17px;\n    right: 17px;\n\n    &::before, &::after {\n      background-color: white;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AppAlert.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AppAlert.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./AppAlert.vue?vue&type=template&id=91efb6e0&scoped=true\"\nimport script from \"./AppAlert.vue?vue&type=script&lang=ts\"\nexport * from \"./AppAlert.vue?vue&type=script&lang=ts\"\nimport style0 from \"./AppAlert.vue?vue&type=style&index=0&id=91efb6e0&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"91efb6e0\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"create-factory-steps\"},[_c('v-app-bar',{staticClass:\"d-block d-md-none\",attrs:{\"fixed\":\"\",\"color\":\"white\"}},[_c('div',{staticClass:\"btn-container\",class:{ hide: _vm.appState.createStepIndex === 1 }},[_c('v-btn',{staticClass:\"secondary--text\",attrs:{\"icon\":\"\"},on:{\"click\":_vm.onBack}},[_c('v-icon',[_vm._v(\"mdi-keyboard-backspace\")])],1)],1),_c('v-spacer'),_c('v-toolbar-title',{staticClass:\"secondary--text\"},[_vm._v(\"新增可疑工廠 步驟 (\"+_vm._s(_vm.appState.createStepIndex)+\"/3)\")]),_c('v-spacer'),_c('div',{staticClass:\"btn-container\"},[_c('v-dialog',{attrs:{\"max-width\":\"290\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({staticClass:\"secondary--text\",attrs:{\"icon\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-close\")])],1)]}}]),model:{value:(_vm.discardDialog),callback:function ($$v) {_vm.discardDialog=$$v},expression:\"discardDialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"secondary--text\"},[_vm._v(\"放棄新增可疑工廠嗎？\")]),_c('v-card-text',[_vm._v(\"放棄新增可疑工廠時，你將遺失所有已輸入的資料。下次需重新填寫。\")]),_c('v-container',{staticClass:\"text-center\"},[_c('v-btn',{attrs:{\"width\":\"100%\",\"x-large\":\"\",\"rounded\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.discardDialog = false}}},[_vm._v(\"繼續填寫資料\")]),_c('a',{staticClass:\"d-block mt-4 text-decoration-underline\",on:{\"click\":_vm.cancelCreateFactory}},[_vm._v(\"放棄新增\")])],1)],1)],1)],1)],1),_c('v-app-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$vuetify.breakpoint.mdAndUp),expression:\"$vuetify.breakpoint.mdAndUp\"}],attrs:{\"fixed\":\"\",\"color\":\"white\"}},[_c('v-toolbar-title',[_vm._v(\"新增可疑工廠\")]),_c('div',{staticClass:\"ml-15 desktop-step-item\",on:{\"click\":function($event){return _vm.switchStep(1)}}},[_c('span',[_vm._v(\"選擇工廠位置\")]),_c('v-icon',{staticClass:\"mr-1\"},[_vm._v(\"mdi-chevron-right\")])],1),_c('div',{staticClass:\"desktop-step-item\",class:{ inactive: _vm.appState.createStepIndex < 2 },on:{\"click\":function($event){return _vm.switchStep(2)}}},[_c('span',[_vm._v(\"上傳工廠照片\")]),_c('v-icon',{staticClass:\"mr-1\"},[_vm._v(\"mdi-chevron-right\")])],1),_c('div',{staticClass:\"desktop-step-item\",class:{ inactive: _vm.appState.createStepIndex < 3 },on:{\"click\":function($event){return _vm.switchStep(3)}}},[_c('span',[_vm._v(\"確認及補充工廠資訊\")])]),_c('v-spacer'),(_vm.$vuetify.breakpoint.mdAndUp)?_c('v-dialog',{attrs:{\"max-width\":\"290\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({attrs:{\"outlined\":\"\"}},'v-btn',attrs,false),on),[_vm._v(\" 取消新增 \")])]}}],null,false,67231085),model:{value:(_vm.discardDialog),callback:function ($$v) {_vm.discardDialog=$$v},expression:\"discardDialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"secondary--text\"},[_vm._v(\"放棄新增可疑工廠嗎？\")]),_c('v-card-text',[_vm._v(\"放棄新增可疑工廠時，你將遺失所有已輸入的資料。下次需重新填寫。\")]),_c('v-container',{staticClass:\"text-center\"},[_c('v-btn',{attrs:{\"width\":\"100%\",\"x-large\":\"\",\"rounded\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.discardDialog = false}}},[_vm._v(\"繼續填寫資料\")]),_c('a',{staticClass:\"d-block mt-4 text-decoration-underline\",on:{\"click\":_vm.cancelCreateFactory}},[_vm._v(\"放棄新增\")])],1)],1)],1):_vm._e()],1),(_vm.appState.createStepIndex === 1)?_c('div',{staticClass:\"create-factory-step-1\"},[(_vm.showLongLat)?_c('div',{staticClass:\"select-location-container container-fluid pa-3 py-md-5 px-md-10\",class:{ desktop: _vm.$vuetify.breakpoint.mdAndUp }},[_c('div',{staticClass:\"d-flex flex-md-row justify-space-between align-end align-md-center\"},[_c('div',{staticClass:\"d-flex flex-column flex-md-row align-start align-md-center justify-space-between justify-md-start flex-grow-1\"},[_c('p',{staticClass:\"mb-4 my-md-3 mr-md-10 wgs\"},[_vm._v(\"以下經緯度版本為WGS84\")]),(!_vm.inlineLocationForm)?_c('p',{staticClass:\"font-weight-medium h5 mb-0 mb-1-md mr-md-10 location-text\"},[_vm._v(\" 經度：\"+_vm._s(_vm.appState.mapLngLat[0].toFixed(7))+\" \")]):_vm._e(),(!_vm.inlineLocationForm)?_c('p',{staticClass:\"font-weight-medium h5 mb-0 mr-md-8 location-text\"},[_vm._v(\" 緯度：\"+_vm._s(_vm.appState.mapLngLat[1].toFixed(7))+\" \")]):_vm._e(),(!_vm.inlineLocationForm)?_c('v-btn',{staticClass:\"mr-2 d-none d-md-block primary--text\",attrs:{\"rounded\":\"\",\"color\":\"white\"},on:{\"click\":_vm.toggleInlineLocationForm}},[_vm._v(\" 搜尋經緯度 \")]):_vm._e(),(_vm.inlineLocationForm)?_c('div',{staticClass:\"d-none d-md-flex justify-space-between align-center flex-grow-1\"},[_c('div',{staticClass:\"d-flex align-center\"},[_c('p',{staticClass:\"font-weight-medium h5 mb-0 mr-7\"},[_vm._v(\" 搜尋經緯度 \")]),_c('div',{staticClass:\"d-block mr-7\",staticStyle:{\"height\":\"36px\",\"width\":\"1px\",\"background-color\":\"#EAF3BF\"}}),_c('h5',{staticClass:\"mr-2\"},[_vm._v(\"經度\")]),_c('v-text-field',{staticClass:\"mr-7\",attrs:{\"hide-details\":\"\",\"outilned\":\"\",\"solo\":\"\",\"placeholder\":\"例：121.5231872\",\"dense\":\"\"},model:{value:(_vm.locationInputState.longitude),callback:function ($$v) {_vm.$set(_vm.locationInputState, \"longitude\", $$v)},expression:\"locationInputState.longitude\"}}),_c('h5',{staticClass:\"mr-2\"},[_vm._v(\"緯度\")]),_c('v-text-field',{staticClass:\"mr-7\",attrs:{\"hide-details\":\"\",\"outilned\":\"\",\"solo\":\"\",\"placeholder\":\"例：25.0458344\",\"dense\":\"\"},model:{value:(_vm.locationInputState.latitude),callback:function ($$v) {_vm.$set(_vm.locationInputState, \"latitude\", $$v)},expression:\"locationInputState.latitude\"}}),_c('h5',{staticClass:\"text-decoration-underline mr-5\",staticStyle:{\"cursor\":\"pointer\"},on:{\"click\":_vm.clearLocationInput}},[_vm._v(\"清空\")]),_c('v-btn',{staticClass:\"primary--text\",attrs:{\"rounded\":\"\",\"color\":\"white\"},on:{\"click\":_vm.setLocation}},[_vm._v(\"定位\")])],1),(_vm.inlineLocationForm)?_c('div',{staticClass:\"d-flex align-center\"},[_c('div',{staticClass:\"d-block d-none d-md-block mx-7\",staticStyle:{\"height\":\"36px\",\"width\":\"1px\",\"background-color\":\"#EAF3BF\"}}),_c('v-btn',{staticClass:\"primary--text\",attrs:{\"icon\":\"\"},on:{\"click\":_vm.toggleInlineLocationForm}},[_c('v-icon',{attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-close\")])],1)],1):_vm._e()]):_vm._e()],1),_c('v-dialog',{attrs:{\"max-width\":\"290\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({staticClass:\"mr-2 d-md-none primary--text\",attrs:{\"rounded\":\"\",\"color\":\"white\"}},'v-btn',attrs,false),on),[_vm._v(\" 搜尋經緯度 \")])]}}],null,false,1129603853),model:{value:(_vm.chooseLocationDialog),callback:function ($$v) {_vm.chooseLocationDialog=$$v},expression:\"chooseLocationDialog\"}},[_c('v-card',{staticClass:\"primary\",attrs:{\"outlined\":\"\"}},[_c('v-card-text',{staticClass:\"pt-4 white--text\"},[_c('p',[_vm._v(\" 以下經緯度版本為WGS84 \")]),_c('h3',{staticClass:\"mb-2\"},[_vm._v(\"經度\")]),_c('v-text-field',{attrs:{\"outilned\":\"\",\"solo\":\"\",\"placeholder\":\"例：121.5231872\"},model:{value:(_vm.locationInputState.longitude),callback:function ($$v) {_vm.$set(_vm.locationInputState, \"longitude\", $$v)},expression:\"locationInputState.longitude\"}}),_c('h3',{staticClass:\"mb-2\"},[_vm._v(\"緯度\")]),_c('v-text-field',{attrs:{\"outilned\":\"\",\"solo\":\"\",\"placeholder\":\"例：25.0458344\"},model:{value:(_vm.locationInputState.latitude),callback:function ($$v) {_vm.$set(_vm.locationInputState, \"latitude\", $$v)},expression:\"locationInputState.latitude\"}}),_c('div',{staticClass:\"d-flex justify-space-between mt-3 align-end\"},[_c('a',{staticClass:\"text-decoration-underline white--text\",staticStyle:{\"height\":\"36px\",\"line-height\":\"36px\"},on:{\"click\":_vm.clearLocationInput}},[_vm._v(\"清空\")]),_c('v-btn',{staticClass:\"primary--text\",attrs:{\"rounded\":\"\",\"color\":\"white\"},on:{\"click\":_vm.setLocation}},[_vm._v(\"定位\")])],1)],1)],1)],1)],1)]):_vm._e(),_c('div',{staticClass:\"px-5 py-4\"},[_c('v-btn',{staticClass:\"mr-2 primary--text\",attrs:{\"rounded\":\"\",\"color\":\"white\"},on:{\"click\":_vm.toggleShowLongLat}},[_vm._v(\" \"+_vm._s(_vm.showLongLat ? '隱藏經緯度' : '顯示經緯度')+\" \")]),_c('switch-map-mode-button'),_c('v-container',{staticClass:\"choose-location-btn-container d-flex justify-center\",attrs:{\"fluid\":\"\",\"bottom\":\"50\"}},[_c('v-btn',{staticClass:\"px-md-15\",attrs:{\"x-large\":\"\",\"rounded\":\"\",\"color\":\"secondary\"},on:{\"click\":_vm.chooseLocation}},[_vm._v(\" 選擇此地點 \")])],1)],1)]):_vm._e(),(_vm.appState.createStepIndex === 2)?_c('image-upload-form',{attrs:{\"uploading\":_vm.imageUploadState.uploading,\"error\":_vm.imageUploadState.error,\"previewImages\":_vm.uploadedImages,\"onClickRemoveImage\":_vm.onClickRemoveImage,\"valid\":_vm.imageUploadFormValid,\"submit\":_vm.pageTransition.gotoNextCreate,\"formState\":_vm.formState},model:{value:(_vm.selectedImages),callback:function ($$v) {_vm.selectedImages=$$v},expression:\"selectedImages\"}}):_vm._e(),(_vm.appState.createStepIndex === 3)?_c('confirm-factory',{attrs:{\"formState\":_vm.formState,\"previewImages\":_vm.uploadedImages,\"submit\":_vm.submitFactory}}):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { UploadedImage, uploadImages } from '@/api'\nimport { computed, reactive, ref, watch } from 'vue'\n\nexport const useImageUpload = () => {\n  const uploadedImages = ref<UploadedImage[]>([])\n  const imageUploadState = reactive({\n    error: null as boolean | null,\n    uploading: false\n  })\n\n  const selectedImages = ref<FileList | null>(null)\n  watch(selectedImages, () => {\n    imageUploadState.error = null\n\n    if (!selectedImages.value) {\n      return\n    }\n\n    imageUploadState.uploading = true\n\n    uploadImages(selectedImages.value).then(images => {\n      uploadedImages.value = [\n        ...uploadedImages.value,\n        ...images\n      ]\n    }).catch(err => {\n      console.error(err)\n      imageUploadState.error = true\n    }).finally(() => {\n      imageUploadState.uploading = false\n    })\n  })\n\n  const onClickRemoveImage = ({ src }: UploadedImage) => {\n    uploadedImages.value = uploadedImages.value.filter(image => image.src !== src)\n  }\n\n  const imageUploadFormValid = computed(() => uploadedImages.value.length > 0 && !imageUploadState.uploading)\n\n  return {\n    selectedImages,\n    imageUploadState,\n    uploadedImages,\n    onClickRemoveImage,\n    imageUploadFormValid\n  }\n}\n\nexport const useUpdateFactoryImage = () => {\n  const uploadedImages = ref<UploadedImage[]>([])\n  const imageUploadState = {\n    error: null,\n    uploading: false\n  }\n\n  const selectedImages = ref<FileList | null>(null)\n  watch(selectedImages, () => {\n    if (!selectedImages.value) {\n      return\n    }\n\n    const images = Array.from(selectedImages.value).map((f: File) => URL.createObjectURL(f)).map(v => ({\n      src: v,\n      token: v\n    }))\n\n    uploadedImages.value = [\n      ...uploadedImages.value,\n      ...images\n    ]\n  })\n\n  const onClickRemoveImage = ({ src }: UploadedImage) => {\n    uploadedImages.value = uploadedImages.value.filter(image => image.src !== src)\n  }\n\n  const imageUploadFormValid = computed(() => uploadedImages.value.length > 0)\n\n  return {\n    selectedImages,\n    imageUploadState,\n    uploadedImages,\n    onClickRemoveImage,\n    imageUploadFormValid\n  }\n}\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"image-upload-form w-100\"},[_c('v-alert',{staticClass:\"mb-4\",attrs:{\"type\":\"warning\",\"prominent\":\"\",\"color\":\"warning\"}},[_vm._v(\" 目前上傳圖片功能受限，暫時停止回報功能，敬請見諒！ \")]),_c('v-container',{staticClass:\"pt-3 pt-md-12 pb-md-8\",staticStyle:{\"max-width\":\"630px\",\"position\":\"relative\"}},[_c('h2',{staticClass:\"mb-4 secondary--text\"},[_vm._v(\"上傳工廠照片\")]),_c('p',[_vm._v(\"請至少上傳一張工廠照片。\")]),_c('h3',{staticClass:\"mb-3 mt-7 primary--text required\"},[_vm._v(\"工廠照片\")]),_c('div',{staticClass:\"flex align-items-center mb-3\"},[_c('v-btn',{staticClass:\"mr-3\",attrs:{\"disabled\":_vm.uploading,\"outlined\":\"\"}},[_c('label',[_c('input',{ref:\"image\",staticStyle:{\"display\":\"none\"},attrs:{\"multiple\":\"\",\"type\":\"file\",\"accept\":\"image/*\",\"disabled\":_vm.uploading},on:{\"change\":_vm.onChange}}),_vm._v(\" 新增照片 \")])]),(_vm.uploading && !_vm.disableProgressiveUpload)?_c('span',[_vm._v(\"上傳中...\")]):_vm._e(),(_vm.valid && !_vm.uploading && !_vm.error && !_vm.disableProgressiveUpload)?_c('span',[_vm._v(\" 上傳成功 \"),_c('v-icon',{staticClass:\"primary--text\"},[_vm._v(\"mdi-checkbox-marked-circle\")])],1):_vm._e(),(_vm.error && !_vm.disableProgressiveUpload)?_c('span',[_vm._v(\"上傳錯誤\")]):_vm._e()],1),_c('div',{staticClass:\"preview-images-container mb-2\"},_vm._l((_vm.previewImages),function(image){return _c('div',{key:image.token,staticClass:\"uploaded-image\"},[_c('img',{attrs:{\"src\":image.src}}),_c('button',{staticClass:\"remove-image-btn\",on:{\"click\":function($event){return _vm.removeImage(image)}}})])}),0),_c('hr'),_c('h2',{staticClass:\"mt-7 mb-2 secondary--text\"},[_vm._v(\"聯絡資訊（非必填）\")]),_c('p',[_vm._v(\" 如果對於照片有疑問，\"),_c('br'),_vm._v(\" 我們會透過以下提供的資訊聯絡你。\"),_c('br'),_vm._v(\" 如不願揭露自己身份，可跳過不填。 \")]),_c('h3',{staticClass:\"primary--text mt-7 mb-2\"},[_vm._v(\"聯絡人暱稱\")]),_c('v-text-field',{attrs:{\"outlined\":\"\",\"placeholder\":\"例：林先生、林小姐\",\"value\":_vm.formState.nickname},on:{\"input\":function($event){return _vm.$emit('update:formState', { ..._vm.formState, nickname: $event })}}}),_c('h3',{staticClass:\"primary--text mt-7 mb-2\"},[_vm._v(\"聯絡方式 (email或電話)\")]),_c('v-text-field',{attrs:{\"outlined\":\"\",\"placeholder\":\"例：abc@email.com、0920-123456\",\"value\":_vm.formState.contact},on:{\"input\":function($event){return _vm.$emit('update:formState', { ..._vm.formState, contact: $event })}}}),_c('div',{staticClass:\"bottom-button-container w-100 d-flex justify-center align-items-center px-xs-3 pb-md-9\"},[_c('v-btn',{staticStyle:{\"width\":\"100%\",\"max-width\":\"345px\"},attrs:{\"x-large\":\"\",\"rounded\":\"\",\"disabled\":!_vm.valid,\"color\":\"primary\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\" \"+_vm._s(_vm.submitText || '下一步')+\" \")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"image-upload-form w-100\">\n    <v-alert type=\"warning\" prominent color=\"warning\" class=\"mb-4\">\n      目前上傳圖片功能受限，暫時停止回報功能，敬請見諒！\n    </v-alert>\n    <v-container style=\"max-width: 630px; position: relative;\" class=\"pt-3 pt-md-12 pb-md-8\">\n      <h2 class=\"mb-4 secondary--text\">上傳工廠照片</h2>\n\n      <p>請至少上傳一張工廠照片。</p>\n\n      <h3 class=\"mb-3 mt-7 primary--text required\">工廠照片</h3>\n\n      <div class=\"flex align-items-center mb-3\">\n        <v-btn :disabled=\"uploading\" outlined class=\"mr-3\">\n          <label>\n            <input multiple type=\"file\" accept=\"image/*\" ref=\"image\" style=\"display: none;\" @change=\"onChange\" :disabled=\"uploading\">\n              新增照片\n          </label>\n        </v-btn>\n\n        <span v-if=\"uploading && !disableProgressiveUpload\">上傳中...</span>\n        <span v-if=\"valid && !uploading && !error && !disableProgressiveUpload\">\n          上傳成功\n          <v-icon class=\"primary--text\">mdi-checkbox-marked-circle</v-icon>\n        </span>\n        <span v-if=\"error && !disableProgressiveUpload\">上傳錯誤</span>\n      </div>\n\n      <div class=\"preview-images-container mb-2\">\n        <div v-for=\"image of previewImages\" :key=\"image.token\" class=\"uploaded-image\">\n          <img :src=\"image.src\" />\n          <button class=\"remove-image-btn\" @click=\"removeImage(image)\" />\n        </div>\n      </div>\n\n      <hr>\n\n      <h2 class=\"mt-7 mb-2 secondary--text\">聯絡資訊（非必填）</h2>\n\n      <p>\n        如果對於照片有疑問，<br>\n        我們會透過以下提供的資訊聯絡你。<br>\n        如不願揭露自己身份，可跳過不填。\n      </p>\n\n      <h3 class=\"primary--text mt-7 mb-2\">聯絡人暱稱</h3>\n\n      <v-text-field\n        outlined\n        placeholder=\"例：林先生、林小姐\"\n        :value=\"formState.nickname\"\n        @input=\"$emit('update:formState', { ...formState, nickname: $event })\"\n      ></v-text-field>\n\n      <h3 class=\"primary--text mt-7 mb-2\">聯絡方式 (email或電話)</h3>\n\n      <v-text-field\n        outlined\n        placeholder=\"例：abc@email.com、0920-123456\"\n        :value=\"formState.contact\"\n        @input=\"$emit('update:formState', { ...formState, contact: $event })\"\n      ></v-text-field>\n\n      <div class=\"bottom-button-container w-100 d-flex justify-center align-items-center px-xs-3 pb-md-9\">\n        <v-btn x-large rounded @click=\"onSubmit\" :disabled=\"!valid\" style=\"width: 100%; max-width: 345px;\" color=\"primary\">\n          {{ submitText || '下一步' }}\n        </v-btn>\n      </div>\n    </v-container>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nimport { UploadedImage } from '../api'\nexport default defineComponent({\n  props: {\n    previewImages: {\n      type: Array,\n      default: () => []\n    },\n    uploading: {\n      default: false\n    },\n    error: {\n      default: null\n    },\n    onClickRemoveImage: {\n      type: Function\n    },\n    submit: {\n      type: Function\n    },\n    valid: {\n      type: Boolean,\n      default: false\n    },\n    formState: {\n      type: Object\n    },\n    submitText: {\n      type: String\n    },\n    disableProgressiveUpload: {\n      type: Boolean,\n      default: false\n    }\n  },\n  name: 'ImageUploadForm',\n  setup (props, context) {\n    return {\n      images: [],\n      onChange: function (e: InputEvent) {\n        context.emit('input', (e.target as HTMLInputElement).files)\n      },\n      onSubmit () {\n        if (props.valid && typeof props.submit === 'function') {\n          props.submit()\n        }\n      },\n      removeImage: (image: UploadedImage) => {\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        props.onClickRemoveImage!(image)\n      }\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/components/preview-images.scss';\n\n.image-upload-form {\n  @import '@/styles/typography.scss';\n\n  background-color: white;\n  z-index: 1;\n  position: absolute;\n  height: 100%;\n\n  padding-bottom: 50px;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.bottom-button-container {\n  background: white;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  padding: 10px 15px;\n}\n\nhr {\n  color: #EAF3BF;\n  border-color: #EAF3BF;\n  background-color: #EAF3BF;\n  height: 1px;\n  border-width: inherit;\n}\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImageUploadForm.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImageUploadForm.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./ImageUploadForm.vue?vue&type=template&id=f93c1634&scoped=true\"\nimport script from \"./ImageUploadForm.vue?vue&type=script&lang=ts\"\nexport * from \"./ImageUploadForm.vue?vue&type=script&lang=ts\"\nimport style0 from \"./ImageUploadForm.vue?vue&type=style&index=0&id=f93c1634&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f93c1634\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"confirm-factory-page\"},[_c('v-container',{staticClass:\"pt-3 pt-md-12\",staticStyle:{\"max-width\":\"630px\",\"position\":\"relative\"}},[_c('h2',{staticClass:\"mt-2 mb-2 secondary--text\"},[_vm._v(\"確認及補充工廠資訊\")]),_c('p',[_vm._v(\"請確認工廠地點及照片，並補充工廠資訊。\")]),_c('h3',{staticClass:\"mt-7 mb-2 required primary--text\"},[_vm._v(\"工廠地點\")]),_c('p',[_vm._v(\" 返回\"),_c('a',{on:{\"click\":_vm.gotoStepOne}},[_vm._v(\"步驟(1/3)\")]),_vm._v(\"編輯 \")]),_c('div',{staticClass:\"d-flex flex-column flex-md-row justify-md-between\"},[_c('div',{staticClass:\"w-100 minimap-container\",class:{ desktop: _vm.$vuetify.breakpoint.mdAndUp },staticStyle:{\"position\":\"relative\"}},[_c('minimap',{attrs:{\"initialFactories\":_vm.initialFactories,\"initialLocation\":_vm.initialLocation,\"pinLocation\":_vm.appState.factoryLocation}}),_c('div',{staticClass:\"minimap-overlay\",on:{\"click\":_vm.gotoStepOne}})],1),_c('div',{staticClass:\"d-flex justify-between mt-3 mt-md-0 ml-md-4 d-md-inline-flex flex-md-column justify-md-start\"},[_c('p',[_vm._v(\" 經度：\"+_vm._s(_vm.appState.factoryLocation[0].toFixed(7))+\" \"),_c('br'),_vm._v(\" 緯度：\"+_vm._s(_vm.appState.factoryLocation[1].toFixed(7))+\" \")]),_c('p',[_c('small',[_vm._v(\"以上經緯度版本為WGS84\")])])])]),_c('h3',{staticClass:\"mt-7 mb-2 required primary--text\"},[_vm._v(\"工廠照片\")]),_c('p',[_vm._v(\" 返回\"),_c('a',{on:{\"click\":_vm.gotoStepTwo}},[_vm._v(\"步驟(2/3)\")]),_vm._v(\"編輯 \")]),_c('div',{staticClass:\"preview-images-container mb-2\"},_vm._l((_vm.previewImages),function(image){return _c('div',{key:image.token,staticClass:\"uploaded-image\"},[_c('img',{attrs:{\"src\":image.src}})])}),0),_c('h3',{staticClass:\"mt-5 mb-2 primary--text\"},[_vm._v(\"聯絡人暱稱\")]),_c('p',[_vm._v(_vm._s(_vm.formState.nickname || '未填寫'))]),_c('h3',{staticClass:\"mt-5 mb-2 primary--text\"},[_vm._v(\"聯絡方式 (email或電話)\")]),_c('p',[_vm._v(_vm._s(_vm.formState.contact || '未填寫'))]),_c('hr'),_c('h2',{staticClass:\"mt-5 secondary--text mb-5\"},[_vm._v(\"其他工廠資訊（非必填）\")]),_c('p',[_vm._v(\"提供明確的工廠資訊能夠幫助我們更快速的填寫公文。\")]),_c('h3',{staticClass:\"mt-5 mb-2 primary--text\"},[_vm._v(\"工廠描述\")]),_c('v-textarea',{attrs:{\"outlined\":\"\",\"solo\":\"\",\"value\":_vm.formState.others,\"placeholder\":\"例：常常散發異味\"},on:{\"input\":function($event){return _vm.$emit('update:formState', { ..._vm.formState, others: $event })}}}),_c('h3',{staticClass:\"mt-5 mb-2 primary--text\"},[_vm._v(\"工廠外部文字\")]),_c('v-text-field',{attrs:{\"outlined\":\"\",\"value\":_vm.formState.name,\"placeholder\":\"例：小明化工廠\",\"color\":\"primary\"},on:{\"input\":function($event){return _vm.$emit('update:formState', { ..._vm.formState, name: $event })}}}),_c('h3',{staticClass:\"mt-5 mb-2 primary--text\"},[_vm._v(\"工廠類型\")]),_c('v-select',{attrs:{\"items\":_vm.factoryTypeItems,\"value\":_vm.formState.type,\"solo\":\"\",\"outlined\":\"\",\"placeholder\":\"未選擇\"},on:{\"input\":function($event){return _vm.$emit('update:formState', { ..._vm.formState, type: $event })}}}),_c('div',{staticClass:\"bottom-button-container w-100 d-flex justify-center align-items-center px-xs-3 pb-md-9\"},[_c('v-btn',_vm._g(_vm._b({staticStyle:{\"width\":\"100%\",\"max-width\":\"345px\"},attrs:{\"x-large\":\"\",\"rounded\":\"\",\"color\":\"primary\"},on:{\"click\":_vm.submit}},'v-btn',_vm.attrs,false),_vm.on),[_vm._v(\" 確認送出 \")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{ref:\"minimap\"})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div ref=\"minimap\" />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, ref } from 'vue'\nimport { initializeMinimap } from '../lib/map'\nimport { FactoryData } from '../types'\n\nexport default defineComponent({\n  props: {\n    initialLocation: {\n      type: Array,\n      default: () => []\n    },\n    pinLocation: {\n      type: Array,\n      default: () => []\n    },\n    initialFactories: {\n      type: Array,\n      default: () => []\n    }\n  },\n  name: 'MinimapView',\n  setup (props) {\n    const minimap = ref<HTMLElement | null>(null)\n\n    onMounted(() => {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const minimapController = initializeMinimap(minimap.value!, props.initialLocation as number[])\n      minimapController.addFactories(props.initialFactories as FactoryData[])\n\n      minimapController.mapInstance.setMinimapPin(...props.pinLocation as [number, number])\n    })\n\n    return {\n      minimap\n    }\n  }\n})\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Minimap.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./Minimap.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./Minimap.vue?vue&type=template&id=27227eed\"\nimport script from \"./Minimap.vue?vue&type=script&lang=ts\"\nexport * from \"./Minimap.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"confirm-factory-page\">\n    <v-container style=\"max-width: 630px; position: relative;\" class=\"pt-3 pt-md-12\">\n      <h2 class=\"mt-2 mb-2 secondary--text\">確認及補充工廠資訊</h2>\n\n      <p>請確認工廠地點及照片，並補充工廠資訊。</p>\n\n      <h3 class=\"mt-7 mb-2 required primary--text\">工廠地點</h3>\n\n      <p>\n        返回<a @click=\"gotoStepOne\">步驟(1/3)</a>編輯\n      </p>\n\n      <div class=\"d-flex flex-column flex-md-row justify-md-between\">\n        <div class=\"w-100 minimap-container\" style=\"position: relative;\" :class=\"{ desktop: $vuetify.breakpoint.mdAndUp }\">\n          <minimap\n            :initialFactories=\"initialFactories\"\n            :initialLocation=\"initialLocation\"\n            :pinLocation=\"appState.factoryLocation\"\n          />\n          <div class=\"minimap-overlay\" @click=\"gotoStepOne\" />\n        </div>\n\n        <div class=\"d-flex justify-between mt-3 mt-md-0 ml-md-4 d-md-inline-flex flex-md-column justify-md-start\">\n          <p>\n            經度：{{ appState.factoryLocation[0].toFixed(7) }}\n            <br>\n            緯度：{{ appState.factoryLocation[1].toFixed(7) }}\n          </p>\n\n          <p>\n            <small>以上經緯度版本為WGS84</small>\n          </p>\n        </div>\n      </div>\n\n      <h3 class=\"mt-7 mb-2 required primary--text\">工廠照片</h3>\n\n      <p>\n        返回<a @click=\"gotoStepTwo\">步驟(2/3)</a>編輯\n      </p>\n\n      <div class=\"preview-images-container mb-2\">\n        <div v-for=\"image of previewImages\" :key=\"image.token\" class=\"uploaded-image\">\n          <img :src=\"image.src\" />\n        </div>\n      </div>\n\n      <h3 class=\"mt-5 mb-2 primary--text\">聯絡人暱稱</h3>\n\n      <p>{{ formState.nickname || '未填寫'  }}</p>\n\n      <h3 class=\"mt-5 mb-2 primary--text\">聯絡方式 (email或電話)</h3>\n\n      <p>{{ formState.contact || '未填寫' }}</p>\n\n      <hr>\n\n      <h2 class=\"mt-5 secondary--text mb-5\">其他工廠資訊（非必填）</h2>\n\n      <p>提供明確的工廠資訊能夠幫助我們更快速的填寫公文。</p>\n\n      <h3 class=\"mt-5 mb-2 primary--text\">工廠描述</h3>\n\n      <v-textarea outlined solo :value=\"formState.others\" @input=\"$emit('update:formState', { ...formState, others: $event })\" placeholder=\"例：常常散發異味\" />\n\n      <h3 class=\"mt-5 mb-2 primary--text\">工廠外部文字</h3>\n\n      <v-text-field outlined :value=\"formState.name\" @input=\"$emit('update:formState', { ...formState, name: $event })\" placeholder=\"例：小明化工廠\" color=\"primary\" />\n\n      <h3 class=\"mt-5 mb-2 primary--text\">工廠類型</h3>\n\n      <v-select :items=\"factoryTypeItems\" :value=\"formState.type\" @input=\"$emit('update:formState', { ...formState, type: $event })\" solo outlined placeholder=\"未選擇\" />\n\n      <div class=\"bottom-button-container w-100 d-flex justify-center align-items-center px-xs-3 pb-md-9\">\n        <v-btn x-large rounded @click=\"submit\" style=\"width: 100%; max-width: 345px;\" v-bind=\"attrs\" v-on=\"on\" color=\"primary\">\n          確認送出\n        </v-btn>\n      </div>\n    </v-container>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, ref } from 'vue'\n\nimport { MainMapControllerSymbol } from '../symbols'\nimport { MapFactoryController } from '../lib/map'\nimport { useAppState } from '../lib/appState'\nimport { FACTORY_TYPE } from '../types'\n\nimport Minimap from './Minimap.vue'\n\nexport default defineComponent({\n  name: 'ConfirmFactory',\n  components: {\n    Minimap\n  },\n  props: {\n    formState: {\n      type: Object,\n      default: () => ({})\n    },\n    previewImages: {\n      type: Array,\n      default: () => []\n    },\n    submit: {\n      type: Function\n    }\n  },\n  emits: ['update:formState'],\n  setup () {\n    const mapController = inject(MainMapControllerSymbol, ref<MapFactoryController>())\n    const [appState, { pageTransition }] = useAppState()\n\n    const initialFactories = mapController.value?.factories\n    const initialLocation = mapController.value?.mapInstance.map.getView().getCenter()\n\n    const factoryTypeItems: Array<{ text: string, value?: string }> = [\n      ...FACTORY_TYPE\n    ]\n\n    return {\n      appState,\n      initialFactories,\n      initialLocation,\n      gotoStepOne () {\n        if (mapController.value) {\n          pageTransition.gotoCreateStep(0)\n          mapController.value.mapInstance.setLUILayerVisible(true)\n        }\n      },\n      gotoStepTwo () {\n        pageTransition.gotoCreateStep(1)\n      },\n      factoryTypeItems\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/components/preview-images.scss';\n\n.confirm-factory-page {\n  @import '@/styles/typography.scss';\n\n  background-color: white;\n  z-index: 1;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n\n  padding-bottom: 50px;\n  overflow-y: auto;\n  overflow-x: hidden;\n\n  padding-bottom: 72px;\n\n  h2 {\n    font-size: 24px;\n  }\n}\n\n.bottom-button-container {\n  background: white;\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  padding: 10px 15px;\n}\n\nhr {\n  color: #EAF3BF;\n  border-color: #EAF3BF;\n  background-color: #EAF3BF;\n  height: 1px;\n  border-width: inherit;\n}\n\n.minimap-container {\n  &.desktop {\n    max-width: 430px;\n  }\n}\n\n.minimap-overlay {\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  left: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ConfirmFactory.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ConfirmFactory.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./ConfirmFactory.vue?vue&type=template&id=993177d2&scoped=true\"\nimport script from \"./ConfirmFactory.vue?vue&type=script&lang=ts\"\nexport * from \"./ConfirmFactory.vue?vue&type=script&lang=ts\"\nimport style0 from \"./ConfirmFactory.vue?vue&type=style&index=0&id=993177d2&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"993177d2\",\n  null\n  \n)\n\nexport default component.exports","import { onUnmounted } from 'vue'\n\nexport function useBackPressed (onBack: () => void) {\n  const hideModal = (event: PopStateEvent) => {\n    if (event.state === 'backPressed') {\n      onBack()\n    }\n  }\n\n  window.history.pushState('backPressed', '', null)\n  window.history.pushState('dummy', '', null)\n  window.addEventListener('popstate', hideModal, { once: true })\n\n  onUnmounted(() => {\n    window.removeEventListener('popstate', hideModal)\n  })\n}\n","<template>\n  <div class=\"create-factory-steps\">\n    <!-- AppBar for Mobile -->\n    <v-app-bar fixed color=\"white\" class=\"d-block d-md-none\">\n      <div class=\"btn-container\" :class=\"{ hide: appState.createStepIndex === 1 }\">\n        <v-btn icon @click=\"onBack\" class=\"secondary--text\">\n          <v-icon>mdi-keyboard-backspace</v-icon>\n        </v-btn>\n      </div>\n\n      <v-spacer></v-spacer>\n      <v-toolbar-title class=\"secondary--text\">新增可疑工廠 步驟 ({{ appState.createStepIndex }}/3)</v-toolbar-title>\n      <v-spacer></v-spacer>\n\n      <div class=\"btn-container\">\n        <v-dialog v-model=\"discardDialog\" max-width=\"290\">\n          <template v-slot:activator=\"{ on, attrs }\">\n            <v-btn icon v-on=\"on\" v-bind=\"attrs\" class=\"secondary--text\">\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </template>\n          <v-card>\n            <v-card-title class=\"secondary--text\">放棄新增可疑工廠嗎？</v-card-title>\n            <v-card-text>放棄新增可疑工廠時，你將遺失所有已輸入的資料。下次需重新填寫。</v-card-text>\n            <v-container class=\"text-center\">\n              <v-btn width=\"100%\" x-large rounded color=\"primary\" @click=\"discardDialog = false\">繼續填寫資料</v-btn>\n              <a class=\"d-block mt-4 text-decoration-underline\" @click=\"cancelCreateFactory\">放棄新增</a>\n            </v-container>\n          </v-card>\n        </v-dialog>\n      </div>\n    </v-app-bar>\n\n    <!-- AppBar for Desktop -->\n    <v-app-bar fixed color=\"white\" v-show=\"$vuetify.breakpoint.mdAndUp\">\n      <v-toolbar-title>新增可疑工廠</v-toolbar-title>\n\n      <div class=\"ml-15 desktop-step-item\" @click=\"switchStep(1)\">\n        <span>選擇工廠位置</span>\n        <v-icon class='mr-1'>mdi-chevron-right</v-icon>\n      </div>\n\n      <div class=\"desktop-step-item\" :class=\"{ inactive: appState.createStepIndex < 2 }\"  @click=\"switchStep(2)\">\n        <span>上傳工廠照片</span>\n        <v-icon class='mr-1'>mdi-chevron-right</v-icon>\n      </div>\n\n      <div class=\"desktop-step-item\" :class=\"{ inactive: appState.createStepIndex < 3 }\"  @click=\"switchStep(3)\">\n        <span>確認及補充工廠資訊</span>\n      </div>\n\n      <v-spacer></v-spacer>\n\n      <v-dialog v-model=\"discardDialog\" max-width=\"290\" v-if=\"$vuetify.breakpoint.mdAndUp\">\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn v-on=\"on\" v-bind=\"attrs\" outlined>\n            取消新增\n          </v-btn>\n        </template>\n        <v-card>\n          <v-card-title class=\"secondary--text\">放棄新增可疑工廠嗎？</v-card-title>\n          <v-card-text>放棄新增可疑工廠時，你將遺失所有已輸入的資料。下次需重新填寫。</v-card-text>\n          <v-container class=\"text-center\">\n            <v-btn width=\"100%\" x-large rounded color=\"primary\" @click=\"discardDialog = false\">繼續填寫資料</v-btn>\n            <a class=\"d-block mt-4 text-decoration-underline\" @click=\"cancelCreateFactory\">放棄新增</a>\n          </v-container>\n        </v-card>\n      </v-dialog>\n    </v-app-bar>\n\n    <div class=\"create-factory-step-1\" v-if=\"appState.createStepIndex === 1\">\n      <div class=\"select-location-container container-fluid pa-3 py-md-5 px-md-10\" v-if=\"showLongLat\" :class=\"{ desktop: $vuetify.breakpoint.mdAndUp }\">\n        <div class=\"d-flex flex-md-row justify-space-between align-end align-md-center\">\n          <div class=\"d-flex flex-column flex-md-row align-start align-md-center justify-space-between justify-md-start flex-grow-1\">\n            <p class=\"mb-4 my-md-3 mr-md-10 wgs\">以下經緯度版本為WGS84</p>\n\n            <p class='font-weight-medium h5 mb-0 mb-1-md mr-md-10 location-text' v-if=\"!inlineLocationForm\">\n              經度：{{ appState.mapLngLat[0].toFixed(7) }}\n            </p>\n\n            <p class='font-weight-medium h5 mb-0 mr-md-8 location-text' v-if=\"!inlineLocationForm\">\n              緯度：{{ appState.mapLngLat[1].toFixed(7) }}\n            </p>\n\n            <v-btn rounded color=\"white\" class=\"mr-2 d-none d-md-block primary--text\"  v-if=\"!inlineLocationForm\" @click=\"toggleInlineLocationForm\">\n              搜尋經緯度\n            </v-btn>\n\n            <div class=\"d-none d-md-flex justify-space-between align-center flex-grow-1\" v-if=\"inlineLocationForm\">\n              <div class=\"d-flex align-center\">\n                <p class='font-weight-medium h5 mb-0  mr-7'>\n                  搜尋經緯度\n                </p>\n\n                <div class=\"d-block  mr-7\" style=\"height: 36px; width: 1px; background-color: #EAF3BF;\" />\n\n                <h5 class=\" mr-2\">經度</h5>\n\n                <v-text-field hide-details class=\" mr-7\" outilned solo v-model=\"locationInputState.longitude\" placeholder=\"例：121.5231872\" dense />\n\n                <h5 class=\" mr-2\">緯度</h5>\n\n                <v-text-field hide-details class=\" mr-7\" outilned solo v-model=\"locationInputState.latitude\" placeholder=\"例：25.0458344\" dense />\n\n                <h5 class=\"text-decoration-underline mr-5\" style=\"cursor: pointer;\" @click=\"clearLocationInput\">清空</h5>\n\n                <v-btn rounded color=\"white\" class=\"primary--text\" @click=\"setLocation\">定位</v-btn>\n              </div>\n\n              <div class=\"d-flex align-center\" v-if=\"inlineLocationForm\" >\n                <div class=\"d-block d-none d-md-block mx-7\" style=\"height: 36px; width: 1px; background-color: #EAF3BF;\" />\n\n                <v-btn icon @click=\"toggleInlineLocationForm\" class=\"primary--text\">\n                  <v-icon color=\"white\">mdi-close</v-icon>\n                </v-btn>\n              </div>\n            </div>\n          </div>\n\n          <v-dialog v-model=\"chooseLocationDialog\" max-width=\"290\">\n            <template v-slot:activator=\"{ on, attrs }\">\n              <v-btn rounded color=\"white\" class=\"mr-2 d-md-none primary--text\" v-on=\"on\" v-bind=\"attrs\" >\n                搜尋經緯度\n              </v-btn>\n            </template>\n            <v-card outlined class=\"primary\">\n              <v-card-text class=\"pt-4 white--text\">\n                <p>\n                  以下經緯度版本為WGS84\n                </p>\n\n                <h3 class=\"mb-2\">經度</h3>\n\n                <v-text-field outilned solo v-model=\"locationInputState.longitude\" placeholder=\"例：121.5231872\" />\n\n                <h3 class=\"mb-2\">緯度</h3>\n\n                <v-text-field outilned solo v-model=\"locationInputState.latitude\" placeholder=\"例：25.0458344\" />\n\n                <div class=\"d-flex justify-space-between mt-3 align-end\">\n                  <a class=\"text-decoration-underline white--text\" style=\"height: 36px; line-height: 36px;\" @click=\"clearLocationInput\">清空</a>\n                  <v-btn rounded color=\"white\" class=\"primary--text\" @click=\"setLocation\">定位</v-btn>\n                </div>\n              </v-card-text>\n            </v-card>\n          </v-dialog>\n        </div>\n      </div>\n\n      <div class=\"px-5 py-4\">\n        <v-btn rounded color=\"white\" class=\"mr-2 primary--text\" @click=\"toggleShowLongLat\">\n          {{ showLongLat ? '隱藏經緯度' : '顯示經緯度' }}\n        </v-btn>\n\n        <switch-map-mode-button />\n\n        <v-container fluid class=\"choose-location-btn-container d-flex justify-center\" bottom=\"50\">\n          <v-btn x-large rounded @click=\"chooseLocation\" class=\"px-md-15\" color=\"secondary\">\n            選擇此地點\n          </v-btn>\n        </v-container>\n      </div>\n\n    </div>\n\n    <image-upload-form\n      v-if=\"appState.createStepIndex === 2\"\n      v-model=\"selectedImages\"\n      :uploading=\"imageUploadState.uploading\"\n      :error=\"imageUploadState.error\"\n      :previewImages=\"uploadedImages\"\n      :onClickRemoveImage=\"onClickRemoveImage\"\n      :valid=\"imageUploadFormValid\"\n      :submit=\"pageTransition.gotoNextCreate\"\n      :formState=\"formState\"\n    />\n\n    <confirm-factory\n      v-if=\"appState.createStepIndex === 3\"\n      :formState=\"formState\"\n      :previewImages=\"uploadedImages\"\n      :submit=\"submitFactory\"\n    />\n\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, ref, reactive } from 'vue'\n\nimport { useAppState } from '../lib/appState'\nimport { useAlertState } from '../lib/useAlert'\n\nimport { MainMapControllerSymbol } from '../symbols'\nimport { MapFactoryController } from '../lib/map'\nimport { createFactory } from '../api'\nimport { useImageUpload } from '../lib/imageUpload'\n\nimport ImageUploadForm from './ImageUploadForm.vue'\nimport ConfirmFactory from './ConfirmFactory.vue'\nimport SwitchMapModeButton from './SwitchMapModeButton.vue'\nimport { FactoryPostData } from '../types'\nimport { useGA } from '../lib/useGA'\nimport { useBackPressed } from '../lib/useBackPressed'\nimport { useModalState } from '../lib/hooks'\n\nexport default defineComponent({\n  name: 'CreateFactorySteps',\n  components: {\n    ImageUploadForm,\n    ConfirmFactory,\n    SwitchMapModeButton\n  },\n  setup () {\n    const [appState, { pageTransition, setFactoryLocation }] = useAppState()\n    const [, { openCreateFactorySuccessModal }] = useModalState()\n    const [, alertActions] = useAlertState()\n    const { event } = useGA()\n\n    const discardDialog = ref(false)\n\n    const mapController = inject(MainMapControllerSymbol, ref<MapFactoryController>())\n\n    function cancelCreateFactory () {\n      if (mapController.value) {\n        mapController.value.mapInstance.setLUILayerVisible(false)\n        discardDialog.value = false\n        // TODO: clear form value\n        pageTransition.closeFactoryPage()\n      }\n    }\n\n    const onBack = () => {\n      if (appState.createStepIndex === 1) {\n        cancelCreateFactory()\n      } else if (appState.createStepIndex === 2) {\n        if (mapController.value) {\n          mapController.value.mapInstance.setLUILayerVisible(true)\n          pageTransition.previousCreateStep()\n        }\n      } else {\n        pageTransition.previousCreateStep()\n      }\n    }\n    useBackPressed(onBack)\n\n    const createFactoryFormState = reactive({\n      nickname: '',\n      contact: '',\n      others: '',\n      name: '',\n      type: undefined,\n      submitting: false\n    })\n\n    const {\n      selectedImages,\n      imageUploadState,\n      uploadedImages,\n      onClickRemoveImage,\n      imageUploadFormValid\n    } = useImageUpload()\n\n    const submitFactory = async () => {\n      createFactoryFormState.submitting = true\n\n      try {\n        const [lng, lat]: number[] = appState.factoryLocation\n        const factory: FactoryPostData = {\n          name: createFactoryFormState.name,\n          others: createFactoryFormState.others,\n          type: createFactoryFormState.type,\n          lng,\n          lat,\n          images: uploadedImages.value.map(i => i.token),\n          nickname: createFactoryFormState.nickname,\n          contact: createFactoryFormState.contact\n        }\n\n        event('createFactory', { lng, lat })\n        const resultFactory = await createFactory(factory)\n        if (mapController.value) {\n          mapController.value.addFactories([resultFactory])\n        }\n      } catch (e) {\n        // TODO: handle create failure\n      } finally {\n        createFactoryFormState.submitting = false\n      }\n\n      // TODO: if error, don't close factory page\n      pageTransition.closeFactoryPage()\n\n      openCreateFactorySuccessModal()\n    }\n\n    const showLongLat = ref(false)\n    const toggleShowLongLat = () => {\n      showLongLat.value = !showLongLat.value\n    }\n\n    const chooseLocationDialog = ref(false)\n    const inlineLocationForm = ref(false)\n    const toggleInlineLocationForm = () => {\n      inlineLocationForm.value = !inlineLocationForm.value\n    }\n    const locationInputState = reactive({\n      longitude: '',\n      latitude: ''\n    })\n    const clearLocationInput = () => {\n      locationInputState.longitude = ''\n      locationInputState.latitude = ''\n    }\n    const setLocation = () => {\n      if (!mapController.value) return\n\n      const lng = parseFloat(locationInputState.longitude)\n      const lat = parseFloat(locationInputState.latitude)\n      if (!locationInputState.longitude ||\n          !locationInputState.latitude ||\n          isNaN(lng) ||\n          isNaN(lat)\n      ) {\n        // TODO: show invalid input error\n        chooseLocationDialog.value = false\n      } else {\n        let zoom = mapController.value.mapInstance.map.getView().getZoom()\n        if (!zoom || zoom <= 17) {\n          zoom = 17\n        }\n        mapController.value.mapInstance.setCoordinate(lng, lat, zoom)\n        chooseLocationDialog.value = false\n      }\n    }\n\n    const switchStep = (num: number) => {\n      const backSteps = appState.createStepIndex - num\n\n      for (let i = 0; i < backSteps; i++) {\n        onBack()\n      }\n    }\n\n    return {\n      appState,\n      pageTransition,\n      formState: createFactoryFormState,\n\n      cancelCreateFactory,\n      onBack,\n      chooseLocation () {\n        if (!mapController.value) return\n\n        if (!appState.canPlaceFactory) {\n          alertActions.showAlert('此地點不在農地範圍內，\\n請回報在農地範圍內的工廠。')\n          return\n        }\n\n        mapController.value.mapInstance.setLUILayerVisible(false)\n\n        setFactoryLocation(appState.mapLngLat as [number, number])\n\n        pageTransition.nextCreateStep()\n      },\n      selectedImages,\n      imageUploadState,\n      uploadedImages,\n      onClickRemoveImage,\n      imageUploadFormValid,\n      discardDialog,\n      submitFactory,\n      showLongLat,\n      toggleShowLongLat,\n      chooseLocationDialog,\n      inlineLocationForm,\n      locationInputState,\n      clearLocationInput,\n      toggleInlineLocationForm,\n      setLocation,\n      switchStep\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/styles/variables\";\n\n.btn-container.hide {\n  visibility: hidden;\n  pointer-events: none;\n}\n\n.create-factory-steps {\n  width: 100%;\n  height: 100%;\n\n  .create-factory-step-1 {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n\n    .choose-location-btn-container {\n      left: 0;\n      position: fixed;\n      bottom: 50px;\n    }\n  }\n\n  .select-location-container {\n    background-color: $light-green-color;\n    color: white;\n\n    .wgs {\n      font-size: 12px;\n    }\n\n    .location-text {\n      font-size: 14px;\n    }\n\n    &.desktop {\n      .wgs {\n        font-size: 14px;\n      }\n\n      .location-text {\n        font-size: 16px;\n      }\n    }\n  }\n}\n\n.desktop-step-item {\n  &:not(.inactive) {\n    cursor: pointer;\n  }\n\n  user-select: none;\n  color: $dark-green-color;\n\n  &.inactive {\n    opacity: 0.5;\n  }\n\n  .v-icon {\n    margin-top: -3px;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CreateFactorySteps.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CreateFactorySteps.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./CreateFactorySteps.vue?vue&type=template&id=06e1f5c6&scoped=true\"\nimport script from \"./CreateFactorySteps.vue?vue&type=script&lang=ts\"\nexport * from \"./CreateFactorySteps.vue?vue&type=script&lang=ts\"\nimport style0 from \"./CreateFactorySteps.vue?vue&type=style&index=0&id=06e1f5c6&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"06e1f5c6\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"update-factory-steps\"},[_c('v-app-bar',{staticClass:\"d-block d-md-none\",attrs:{\"fixed\":\"\",\"color\":\"white\"}},[_c('v-spacer'),(_vm.appState.isEditImagesMode)?_c('v-toolbar-title',{staticClass:\"secondary--text\"},[_vm._v(\"補充照片\")]):_c('v-toolbar-title',{staticClass:\"secondary--text\"},[_vm._v(\" \"+_vm._s(_vm.updateFormAppTitle)+\" \")]),_c('v-spacer'),_c('div',{staticClass:\"btn-container\"},[_c('v-dialog',{attrs:{\"max-width\":\"290\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({attrs:{\"icon\":\"\"}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-close\")])],1)]}}]),model:{value:(_vm.discardDialog),callback:function ($$v) {_vm.discardDialog=$$v},expression:\"discardDialog\"}},[(_vm.appState.isEditImagesMode)?_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"補充照片尚未完成\")]),_c('v-card-text',[_vm._v(\"放棄補充照片的話，你將遺失所有未新增的資料。下次需重新上傳照片\")]),_c('v-container',{staticClass:\"text-center\"},[_c('v-btn',{attrs:{\"width\":\"100%\",\"x-large\":\"\",\"rounded\":\"\",\"color\":\"green darken-1\"},on:{\"click\":function($event){_vm.discardDialog = false}}},[_vm._v(\"繼續編輯\")]),_c('a',{staticClass:\"d-block mt-4\",on:{\"click\":_vm.cancelUpdateFactoryImages}},[_vm._v(\"確定放棄\")])],1)],1):_c('v-card',[_c('v-card-title',{staticClass:\"secondary--text\"},[_vm._v(_vm._s(_vm.updateFormAppTitle)+\"尚未完成！\")]),_c('v-card-text',[_vm._v(\"放棄編輯的話，你將遺失所有未新增的資料。下次需重新填寫。\")]),_c('v-container',{staticClass:\"text-center\"},[_c('v-btn',{attrs:{\"width\":\"100%\",\"x-large\":\"\",\"rounded\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.discardDialog = false}}},[_vm._v(\"繼續編輯\")]),_c('a',{staticClass:\"d-block mt-4\",on:{\"click\":_vm.cancelUpdateFactory}},[_vm._v(\"確定放棄\")])],1)],1)],1)],1)],1),(_vm.appState.isEditImagesMode)?_c('v-app-bar',{staticClass:\"d-none d-md-block\",attrs:{\"fixed\":\"\",\"color\":\"white\"}},[_c('v-toolbar-title',{staticClass:\"secondary--text\"},[_vm._v(\"補充照片\")]),_c('v-spacer'),_c('v-dialog',{attrs:{\"max-width\":\"290\"},scopedSlots:_vm._u([{key:\"activator\",fn:function({ on, attrs }){return [_c('v-btn',_vm._g(_vm._b({attrs:{\"outlined\":\"\"}},'v-btn',attrs,false),on),[_vm._v(\" 取消 \")])]}}],null,false,1770517635),model:{value:(_vm.discardDialog),callback:function ($$v) {_vm.discardDialog=$$v},expression:\"discardDialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"secondary--text\"},[_vm._v(\"補充照片尚未完成\")]),_c('v-card-text',[_vm._v(\"放棄補充照片的話，你將遺失所有未新增的資料。下次需重新上傳照片\")]),_c('v-container',{staticClass:\"text-center\"},[_c('v-btn',{attrs:{\"width\":\"100%\",\"x-large\":\"\",\"rounded\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.discardDialog = false}}},[_vm._v(\"繼續編輯\")]),_c('a',{staticClass:\"d-block mt-4\",on:{\"click\":_vm.cancelUpdateFactoryImages}},[_vm._v(\"確定放棄\")])],1)],1)],1)],1):_vm._e(),(_vm.appState.isEditImagesMode)?_c('image-upload-form',{attrs:{\"uploading\":_vm.imageUploadState.uploading,\"error\":_vm.imageUploadState.error,\"previewImages\":_vm.uploadedImages,\"onClickRemoveImage\":_vm.onClickRemoveImage,\"valid\":_vm.imagesValid,\"submit\":_vm.submitImageUpload,\"formState\":_vm.imageUploadFormState,\"submitText\":_vm.imageSubmitting? '照片上傳中...' : '確認新增照片',\"disableProgressiveUpload\":\"\"},model:{value:(_vm.selectedImages),callback:function ($$v) {_vm.selectedImages=$$v},expression:\"selectedImages\"}}):(_vm.$vuetify.breakpoint.smAndDown)?_c('div',{staticClass:\"update-factory-comment-container w-100 px-4 py-4 d-flex flex-column justify-between\"},[_c('div',[_c('h3',{staticClass:\"mt-4 mb-2 primary--text\"},[_vm._v(_vm._s(_vm.updateFormTitle))]),(_vm.appState.isEditComment)?_c('v-textarea',{attrs:{\"outlined\":\"\",\"solo\":\"\",\"placeholder\":\"例：常常散發異味\"},model:{value:(_vm.formState.others),callback:function ($$v) {_vm.$set(_vm.formState, \"others\", $$v)},expression:\"formState.others\"}}):_vm._e(),(_vm.appState.isEditName)?_c('v-text-field',{attrs:{\"outlined\":\"\",\"placeholder\":\"例：小明化工廠\",\"color\":\"primary\"},model:{value:(_vm.formState.name),callback:function ($$v) {_vm.$set(_vm.formState, \"name\", $$v)},expression:\"formState.name\"}}):_vm._e(),(_vm.appState.isEditType)?_c('v-select',{attrs:{\"items\":_vm.factoryTypeItems,\"solo\":\"\",\"outlined\":\"\",\"placeholder\":\"未選擇\"},model:{value:(_vm.formState.factory_type),callback:function ($$v) {_vm.$set(_vm.formState, \"factory_type\", $$v)},expression:\"formState.factory_type\"}}):_vm._e()],1),_c('v-btn',{staticClass:\"w-100 primary\",staticStyle:{\"width\":\"100%\",\"max-width\":\"345px\",\"margin\":\"0 auto\"},attrs:{\"x-large\":\"\",\"rounded\":\"\",\"disabled\":!_vm.isCurrentFieldValid},on:{\"click\":_vm.submitUpdateFactory}},[_vm._v(\" \"+_vm._s(_vm.updateFormButton)+\" \")])],1):_vm._e(),(_vm.$vuetify.breakpoint.mdAndUp)?_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"395\"},model:{value:(_vm.appState.isEditFactoryMode),callback:function ($$v) {_vm.$set(_vm.appState, \"isEditFactoryMode\", $$v)},expression:\"appState.isEditFactoryMode\"}},[_c('div',{staticClass:\"update-factory-comment-modal w-100 px-4 py-4 d-flex flex-column justify-between\"},[_c('div',{staticClass:\"d-flex justify-end\"},[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":_vm.cancelUpdateFactory}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1)],1),_c('div',[_c('h3',{staticClass:\"mb-3\"},[_vm._v(_vm._s(_vm.updateFormTitle))]),(_vm.appState.isEditComment)?_c('v-textarea',{attrs:{\"outlined\":\"\",\"solo\":\"\",\"placeholder\":\"例：常常散發異味\"},model:{value:(_vm.formState.others),callback:function ($$v) {_vm.$set(_vm.formState, \"others\", $$v)},expression:\"formState.others\"}}):_vm._e(),(_vm.appState.isEditName)?_c('v-text-field',{attrs:{\"outlined\":\"\",\"placeholder\":\"例：小明化工廠\",\"color\":\"primary\"},model:{value:(_vm.formState.name),callback:function ($$v) {_vm.$set(_vm.formState, \"name\", $$v)},expression:\"formState.name\"}}):_vm._e(),(_vm.appState.isEditType)?_c('v-select',{attrs:{\"items\":_vm.factoryTypeItems,\"solo\":\"\",\"outlined\":\"\",\"placeholder\":\"未選擇\"},model:{value:(_vm.formState.factory_type),callback:function ($$v) {_vm.$set(_vm.formState, \"factory_type\", $$v)},expression:\"formState.factory_type\"}}):_vm._e()],1),_c('v-btn',{staticClass:\"w-100\",staticStyle:{\"width\":\"100%\",\"max-width\":\"345px\",\"margin\":\"0 auto\"},attrs:{\"x-large\":\"\",\"rounded\":\"\",\"disabled\":!_vm.isCurrentFieldValid,\"color\":\"primary\"},on:{\"click\":_vm.submitUpdateFactory}},[_vm._v(\" \"+_vm._s(_vm.updateFormButton)+\" \")])],1)]):_vm._e()],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class='update-factory-steps'>\n    <!-- AppBar for Mobile -->\n    <v-app-bar fixed color=\"white\" class=\"d-block d-md-none\">\n      <v-spacer></v-spacer>\n      <v-toolbar-title class=\"secondary--text\" v-if=\"appState.isEditImagesMode\">補充照片</v-toolbar-title>\n      <v-toolbar-title class=\"secondary--text\" v-else>\n        {{ updateFormAppTitle }}\n      </v-toolbar-title>\n      <v-spacer></v-spacer>\n\n      <div class=\"btn-container\">\n        <v-dialog v-model=\"discardDialog\" max-width=\"290\">\n          <template v-slot:activator=\"{ on, attrs }\">\n            <v-btn icon v-on=\"on\" v-bind=\"attrs\">\n              <v-icon>mdi-close</v-icon>\n            </v-btn>\n          </template>\n          <v-card v-if=\"appState.isEditImagesMode\">\n            <v-card-title class=\"headline\">補充照片尚未完成</v-card-title>\n            <v-card-text>放棄補充照片的話，你將遺失所有未新增的資料。下次需重新上傳照片</v-card-text>\n            <v-container class=\"text-center\">\n              <v-btn width=\"100%\" x-large rounded color=\"green darken-1\" @click=\"discardDialog = false\">繼續編輯</v-btn>\n              <a class=\"d-block mt-4\" @click=\"cancelUpdateFactoryImages\">確定放棄</a>\n            </v-container>\n          </v-card>\n          <v-card v-else>\n            <v-card-title class=\"secondary--text\">{{ updateFormAppTitle }}尚未完成！</v-card-title>\n            <v-card-text>放棄編輯的話，你將遺失所有未新增的資料。下次需重新填寫。</v-card-text>\n            <v-container class=\"text-center\">\n              <v-btn width=\"100%\" x-large rounded color=\"primary\" @click=\"discardDialog = false\">繼續編輯</v-btn>\n              <a class=\"d-block mt-4\" @click=\"cancelUpdateFactory\">確定放棄</a>\n            </v-container>\n          </v-card>\n        </v-dialog>\n      </div>\n    </v-app-bar>\n\n    <!-- AppBar for Desktop -->\n    <v-app-bar fixed color=\"white\" class=\"d-none d-md-block\" v-if=\"appState.isEditImagesMode\">\n      <v-toolbar-title class=\"secondary--text\">補充照片</v-toolbar-title>\n\n      <v-spacer></v-spacer>\n\n      <v-dialog v-model=\"discardDialog\" max-width=\"290\">\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn v-on=\"on\" v-bind=\"attrs\" outlined>\n            取消\n          </v-btn>\n        </template>\n        <v-card>\n          <v-card-title class=\"secondary--text\">補充照片尚未完成</v-card-title>\n          <v-card-text>放棄補充照片的話，你將遺失所有未新增的資料。下次需重新上傳照片</v-card-text>\n          <v-container class=\"text-center\">\n            <v-btn width=\"100%\" x-large rounded color=\"primary\" @click=\"discardDialog = false\">繼續編輯</v-btn>\n            <a class=\"d-block mt-4\" @click=\"cancelUpdateFactoryImages\">確定放棄</a>\n          </v-container>\n        </v-card>\n      </v-dialog>\n    </v-app-bar>\n\n    <image-upload-form\n      v-if=\"appState.isEditImagesMode\"\n      v-model=\"selectedImages\"\n      :uploading=\"imageUploadState.uploading\"\n      :error=\"imageUploadState.error\"\n      :previewImages=\"uploadedImages\"\n      :onClickRemoveImage=\"onClickRemoveImage\"\n      :valid=\"imagesValid\"\n      :submit=\"submitImageUpload\"\n      :formState=\"imageUploadFormState\"\n      :submitText=\"imageSubmitting? '照片上傳中...' : '確認新增照片'\"\n      disableProgressiveUpload\n    />\n\n    <!-- Update factory field page (Desktop) -->\n    <div class=\"update-factory-comment-container w-100 px-4 py-4 d-flex flex-column justify-between\" v-else-if=\"$vuetify.breakpoint.smAndDown\">\n      <div>\n        <h3 class=\"mt-4 mb-2 primary--text\">{{ updateFormTitle }}</h3>\n\n        <v-textarea outlined solo v-model=\"formState.others\" placeholder=\"例：常常散發異味\" v-if=\"appState.isEditComment\" />\n        <v-text-field outlined v-model=\"formState.name\" placeholder=\"例：小明化工廠\" color=\"primary\" v-if=\"appState.isEditName\" />\n        <v-select :items=\"factoryTypeItems\" v-model=\"formState.factory_type\" solo outlined placeholder=\"未選擇\" v-if=\"appState.isEditType\" />\n\n      </div>\n      <v-btn x-large rounded class=\"w-100 primary\" :disabled=\"!isCurrentFieldValid\" style=\"width: 100%; max-width: 345px; margin: 0 auto;\" @click=\"submitUpdateFactory\">\n        {{ updateFormButton }}\n      </v-btn>\n    </div>\n\n    <!-- Update factory field modal (Mobile) -->\n    <v-dialog v-model=\"appState.isEditFactoryMode\" persistent max-width=\"395\" v-if=\"$vuetify.breakpoint.mdAndUp\">\n      <div class=\"update-factory-comment-modal w-100 px-4 py-4 d-flex flex-column justify-between\">\n        <div class=\"d-flex justify-end\">\n          <v-btn icon @click=\"cancelUpdateFactory\">\n            <v-icon>mdi-close</v-icon>\n          </v-btn>\n        </div>\n        <div>\n          <h3 class=\"mb-3\">{{ updateFormTitle }}</h3>\n\n          <v-textarea outlined solo v-model=\"formState.others\" placeholder=\"例：常常散發異味\" v-if=\"appState.isEditComment\" />\n          <v-text-field outlined v-model=\"formState.name\" placeholder=\"例：小明化工廠\" color=\"primary\" v-if=\"appState.isEditName\" />\n          <v-select :items=\"factoryTypeItems\" v-model=\"formState.factory_type\" solo outlined placeholder=\"未選擇\" v-if=\"appState.isEditType\" />\n        </div>\n        <v-btn x-large rounded class=\"w-100\" :disabled=\"!isCurrentFieldValid\" style=\"width: 100%; max-width: 345px; margin: 0 auto;\" @click=\"submitUpdateFactory\" color=\"primary\">\n          {{ updateFormButton }}\n        </v-btn>\n      </div>\n    </v-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { useUpdateFactoryImage } from '@/lib/imageUpload'\nimport { updateFactoryImages, updateFactory } from '@/api'\nimport { computed, defineComponent, inject, reactive, ref } from 'vue'\nimport { useGA } from '@/lib/useGA'\nimport { useAppState } from '../lib/appState'\nimport { useModalState } from '../lib/hooks'\nimport ImageUploadForm from './ImageUploadForm.vue'\nimport { MainMapControllerSymbol } from '@/symbols'\nimport { MapFactoryController } from '@/lib/map'\nimport { FACTORY_TYPE } from '@/types'\n\nexport default defineComponent({\n  name: 'UpdateFactorySteps',\n  components: {\n    ImageUploadForm\n  },\n  setup () {\n    const [appState, { pageTransition }] = useAppState()\n    const [, modalActions] = useModalState()\n    const mapController = inject(MainMapControllerSymbol, ref<MapFactoryController>())\n    const { event } = useGA()\n\n    const {\n      selectedImages,\n      imageUploadState,\n      uploadedImages,\n      onClickRemoveImage,\n      imageUploadFormValid\n    } = useUpdateFactoryImage()\n\n    const imageUploadFormState = reactive({\n      nickname: '',\n      contact: ''\n    })\n\n    const imageSubmitting = ref(false)\n    const imagesValid = computed(() => imageUploadFormValid.value && !imageSubmitting.value)\n    const submitImageUpload = async () => {\n      if (!appState.factoryData?.id || !selectedImages.value) {\n        return\n      }\n\n      imageSubmitting.value = true\n\n      try {\n        const newImages = await updateFactoryImages(\n          appState.factoryData?.id,\n          selectedImages.value, {\n            nickname: imageUploadFormState.nickname,\n            contact: imageUploadFormState.contact\n          }\n        )\n\n        if (mapController.value) {\n          const factory = appState.factoryData\n          factory.images = factory.images.concat(newImages)\n\n          mapController.value.updateFactory(factory.id, factory)\n          appState.factoryData = factory\n        }\n\n        pageTransition.cancelUpdateFactoryImages()\n        modalActions.openUpdateFactoryImagesSuccessModal()\n      } catch (err) {\n        console.error(err)\n      }\n\n      imageSubmitting.value = false\n    }\n\n    const discardDialog = ref(false)\n\n    const cancelUpdateFactoryImages = () => {\n      discardDialog.value = false\n      pageTransition.cancelUpdateFactoryImages()\n    }\n\n    const cancelUpdateFactory = () => {\n      discardDialog.value = false\n      pageTransition.cancelUpdateFactoryComment()\n    }\n\n    const formState = reactive({\n      others: '',\n      name: appState.factoryData?.name,\n      factory_type: appState.factoryData?.type,\n      submitting: false\n    })\n\n    const factoryTypeItems: Array<{ text: string, value?: string }> = [\n      ...FACTORY_TYPE\n    ]\n\n    const validStates = {\n      others: computed(() => formState.others.length > 0 && !formState.submitting),\n      name: computed(() => formState?.name?.length && formState.name?.length > 0 && !formState.submitting),\n      factory_type: computed(() => !!formState.factory_type && !formState.submitting)\n    }\n\n    const isCurrentFieldValid = computed(() => {\n      const field = appState.updateFactoryField as 'others' | 'name' | 'factory_type'\n      return validStates[field].value\n    })\n\n    const updateFormAppTitle = computed(() => {\n      return appState.isEditComment\n        ? '補充工廠描述'\n        : appState.isEditName ? '更改外部文字' : '更改工廠類型'\n    })\n\n    const updateFormTitle = computed(() => {\n      if (appState.isEditComment) {\n        return '工廠描述'\n      } else if (appState.isEditName) {\n        return '工廠外部文字'\n      } else if (appState.isEditType) {\n        return '工廠類型'\n      }\n    })\n\n    const updateFormButton = computed(() => {\n      if (appState.isEditComment) {\n        return '新增工廠描述'\n      } else if (appState.isEditName) {\n        return '確認更改工廠外部文字'\n      } else if (appState.isEditType) {\n        return '確認更改工廠類型'\n      }\n    })\n\n    const submitUpdateFactory = async () => {\n      if (!appState.factoryData?.id || !isCurrentFieldValid.value) {\n        return\n      }\n\n      formState.submitting = true\n\n      try {\n        const field = appState.updateFactoryField as 'others' | 'name' | 'factory_type'\n\n        event('updateFactory', { field })\n        const factory = await updateFactory(appState.factoryData?.id, {\n          [field]: formState[field]\n        })\n\n        if (mapController.value) {\n          mapController.value.updateFactory(factory.id, factory)\n          appState.factoryData = factory\n        }\n\n        // TOOD: comments not displayed or stored in factory data for now\n\n        pageTransition.cancelUpdateFactoryComment()\n        modalActions.openUpdateFactorySuccessModal()\n      } catch (err) {}\n\n      formState.submitting = false\n    }\n\n    return {\n      appState,\n      pageTransition,\n\n      discardDialog,\n      imageUploadFormState,\n      selectedImages,\n      imageUploadState,\n      uploadedImages,\n      onClickRemoveImage,\n      imagesValid,\n      submitImageUpload,\n      cancelUpdateFactoryImages,\n      cancelUpdateFactory,\n\n      updateFormAppTitle,\n      updateFormTitle,\n      updateFormButton,\n\n      formState,\n      isCurrentFieldValid,\n      factoryTypeItems,\n\n      submitUpdateFactory,\n\n      imageSubmitting\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.btn-container {\n  position: absolute;\n  right: 5px;\n}\n\n.update-factory-steps {\n  z-index: 6;\n  position: absolute;\n  width: 100%;\n  height: 100%;\n}\n\n.update-factory-comment-container {\n  @import '@/styles/typography.scss';\n\n  background-color: white;\n  z-index: 2;\n  position: absolute;\n  height: 100%;\n\n  padding-bottom: 50px;\n  overflow-y: auto;\n  overflow-x: hidden;\n}\n\n.update-factory-comment-modal {\n  @import '@/styles/typography.scss';\n  background-color: white;\n  z-index: 2;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UpdateFactorySteps.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./UpdateFactorySteps.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./UpdateFactorySteps.vue?vue&type=template&id=72c2d901&scoped=true\"\nimport script from \"./UpdateFactorySteps.vue?vue&type=script&lang=ts\"\nexport * from \"./UpdateFactorySteps.vue?vue&type=script&lang=ts\"\nimport style0 from \"./UpdateFactorySteps.vue?vue&type=style&index=0&id=72c2d901&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72c2d901\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',[_c('v-card',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.appState.formPageOpen),expression:\"!appState.formPageOpen\"}],staticClass:\"factory-container\",class:{ full: _vm.full, desktop: _vm.$vuetify.breakpoint.mdAndUp, empty: !_vm.appState.factoryData },attrs:{\"elevation\":\"3\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.appState.factoryData),expression:\"appState.factoryData\"}],ref:\"factoryDetailScrollerRef\",staticClass:\"factory-detail-scroller\"},[(_vm.scrollOff)?_c('v-app-bar',{staticClass:\"d-block d-md-none\",attrs:{\"fixed\":\"\",\"color\":\"white\"}},[_c('v-spacer'),_c('v-toolbar-title',[_c('v-icon',{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{\"color\":_vm.statusColor}},[_vm._v(\"mdi-map-marker\")]),_vm._v(_vm._s(_vm.factoryStatusText)+\" \")],1),_c('v-spacer'),_c('div',{staticClass:\"btn-container\"},[_c('v-icon',{staticClass:\"float-right\",on:{\"click\":_vm.collapseFactoryDetail}},[_vm._v(\"mdi-close\")]),_c('v-icon',{staticClass:\"float-right mr-4\",on:{\"click\":_vm.copyToClipboard}},[_vm._v(\"mdi-share-variant\")])],1),(_vm.showCopiedMessage)?_c('div',{staticClass:\"copied-message flex justify-center align-items-center\"},[_c('v-icon',{staticClass:\"mr-1\",attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-content-copy\")]),_vm._v(\" 已複製連結 \")],1):_vm._e()],1):_vm._e(),_c('v-card-text',[_c('div',{staticClass:\"d-flex justify-between align-items-center mb-3\"},[_c('span',{staticClass:\"factory-status-title\"},[_vm._v(\"工廠狀態\")]),(_vm.$vuetify.breakpoint.mdAndUp)?_c('v-btn',{attrs:{\"rounded\":\"\",\"outlined\":_vm.showCopiedMessage,\"color\":_vm.showCopiedMessage ? null : 'white'},on:{\"click\":_vm.copyToClipboard}},[_c('v-icon',{staticClass:\"mr-1\"},[_vm._v(\"mdi-share-variant\")]),_vm._v(\" \"+_vm._s(_vm.showCopiedMessage ? '已複製連結' : '分享工廠')+\" \")],1):_c('span',[_c('v-icon',{staticClass:\"mr-4\",on:{\"click\":_vm.copyToClipboard}},[_vm._v(\"mdi-share-variant\")]),_c('v-icon',{on:{\"click\":_vm.collapseFactoryDetail}},[_vm._v(\"mdi-close\")])],1)],1),_c('p',{staticClass:\"factory-status secondary--text mb-2\",staticStyle:{\"clear\":\"both\"}},[_c('v-icon',{staticStyle:{\"margin-bottom\":\"5px\"},attrs:{\"color\":_vm.statusColor}},[_vm._v(\"mdi-map-marker\")]),_vm._v(_vm._s(_vm.factoryStatusText)+\" \")],1),_c('p',{staticClass:\"caption mb-0\",staticStyle:{\"color\":\"#A1A1A1\"}},[_vm._v(\" 工廠編號 \"+_vm._s(_vm.factoryId)+\" \"),_c('br'),_vm._v(\" \"+_vm._s(_vm.lastUpdatedAt)+\" \")]),(_vm.showCopiedMessage && !_vm.scrollOff)?_c('div',{staticClass:\"copied-message flex justify-center align-items-center\"},[_c('v-icon',{staticClass:\"mr-1\",attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-content-copy\")]),_vm._v(\" 已複製連結 \")],1):_vm._e()]),_c('v-slide-group',{ref:\"slideGroup\",attrs:{\"show-arrows\":_vm.images.length > 0}},[_c('v-slide-item',[_c('div',{staticClass:\"update-image-button d-flex flex-column justify-center align-items-center\",on:{\"click\":_vm.pageTransition.startUpdateFactoryImages}},[_c('v-icon',{staticClass:\"mb-1\",attrs:{\"color\":\"white\"}},[_vm._v(\"mdi-camera-plus\")]),_vm._v(\" 補充照片 \")],1)]),_vm._l((_vm.images),function(image,index){return _c('v-slide-item',{key:image.id,staticClass:\"mr-4\",class:{ 'ml-4': index === 0 },nativeOn:{\"click\":function($event){return _vm.setLightboxIndex(index)}}},[_c('ImgurFallbackImage',{attrs:{\"src\":image.url,\"className\":\"factory-slide-image\"}})],1)})],2),_c('div',{staticClass:\"mt-4 mx-3 mb-2\"},[_c('h3',{staticClass:\"mb-1\"},[_vm._v(\"地段 / 地址\")]),_c('p',{staticClass:\"mb-5\"},[_vm._v(_vm._s(_vm.factoryAddressAndLandcode))]),(_vm.full || _vm.$vuetify.breakpoint.mdAndUp)?_c('div',{staticClass:\"mb-5\"},[_c('h3',{staticClass:\"mb-1\"},[_vm._v(\"經緯度\")]),_c('p',{staticClass:\"mb-1\"},[_vm._v(_vm._s(_vm.longitude)+\", \"+_vm._s(_vm.latitude))]),_c('p',{staticClass:\"text-caption\"},[_vm._v(\"以上經緯度版本為 WGS84\")])]):_vm._e(),(_vm.source)?[_c('h3',{staticClass:\"mb-1\"},[_vm._v(\"資料來源\")]),_c('p',{staticClass:\"mb-5\"},[_vm._v(_vm._s(_vm.source))])]:_vm._e(),(_vm.full || _vm.$vuetify.breakpoint.mdAndUp)?_c('hr'):_vm._e(),(!_vm.full && !_vm.$vuetify.breakpoint.mdAndUp)?_c('v-btn',{staticClass:\"m-0 mb-0 px-0 v-btn-plain\",attrs:{\"text\":\"\",\"depressed\":\"\",\"elevation\":\"0\",\"ripple\":false,\"color\":\"#697F01\"},on:{\"click\":_vm.expandFactoryDetail}},[_vm._v(\" 顯示更多資訊   \"),_c('v-icon',[_vm._v(\"mdi-menu-down\")])],1):_vm._e(),(_vm.full || _vm.$vuetify.breakpoint.mdAndUp)?_c('div',{staticClass:\"mt-4\"},[_c('h2',{staticClass:\"mb-5\"},[_vm._v(\"其他工廠資訊\")]),_c('h3',{staticClass:\"mb-1\"},[_vm._v(\"工廠外部文字\")]),(_vm.factoryName)?_c('p',{staticClass:\"mb-3\"},[_vm._v(_vm._s(_vm.factoryName))]):_vm._e(),_c('v-btn',{staticClass:\"d-block mb-5\",attrs:{\"outlined\":\"\"},on:{\"click\":function($event){return _vm.startUpdateFactoryCommentFor('name')}}},[_vm._v(\" \"+_vm._s(_vm.factoryName ? '更改外部文字' : '回報外部文字')+\" \")]),_c('h3',{staticClass:\"mb-1\"},[_vm._v(\"工廠類型\")]),(_vm.factoryType)?_c('p',{staticClass:\"mb-3\"},[_vm._v(_vm._s(_vm.factoryType))]):_vm._e(),_c('v-btn',{staticClass:\"d-block mb-5\",attrs:{\"outlined\":\"\"},on:{\"click\":function($event){return _vm.startUpdateFactoryCommentFor('factory_type')}}},[_vm._v(\" \"+_vm._s(_vm.factoryType ? '更改工廠類型' : '回報工廠類型')+\" \")]),_c('h3',{staticClass:\"mb-1\"},[_vm._v(\"工廠描述\")]),_c('v-btn',{staticClass:\"mb-2\",attrs:{\"outlined\":\"\"},on:{\"click\":function($event){return _vm.startUpdateFactoryCommentFor('others')}}},[_vm._v(\"補充工廠描述\")]),_vm._l((_vm.pastDescriptions),function(desc,index){return _c('div',{key:index,staticClass:\"mt-2\",staticStyle:{\"font-size\":\"14px\"}},[_c('p',{staticClass:\"color-gray-light mb-1\"},[_vm._v(_vm._s(desc.date))]),_c('p',{staticStyle:{\"line-height\":\"24px\"}},[_vm._v(_vm._s(desc.others))])])}),(_vm.factoryFollowups.length > 0)?[_c('h3',{staticClass:\"mb-1\"},[_vm._v(\"政府回應\")]),_vm._l((_vm.factoryFollowups),function(followup,index){return _c('div',{key:index,staticClass:\"mt-2\",staticStyle:{\"font-size\":\"14px\"}},[_c('p',{staticStyle:{\"line-height\":\"24px\"}},[_vm._v(_vm._s(followup.note))])])})]:_vm._e()],2):_vm._e()],2)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.appState.factoryData),expression:\"!appState.factoryData\"}],staticClass:\"factory-detail-scroller px-4 py-5\"},[_c('h1',{staticClass:\"secondary--text mb-5\"},[_vm._v(\"請選擇一個地標\")]),_c('p',[_vm._v(\"請選擇一間工廠查看工廠詳細資訊。\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.$vuetify.breakpoint.mdAndUp),expression:\"$vuetify.breakpoint.mdAndUp\"}],staticClass:\"sidebar-collapse-button d-flex align-items-center justify-center\",on:{\"click\":_vm.toggleFactoryDetail}},[_c('v-icon',{attrs:{\"color\":\"primary\"}},[_vm._v(\"mdi-menu-left\")])],1)]),_c('CoolLightBox',{attrs:{\"items\":_vm.lightboxItems,\"index\":_vm.lightboxIndex},on:{\"close\":() => _vm.setLightboxIndex(null)}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { FactoryData, FACTORY_TYPE, FactoryType } from '../types'\n\nconst factoryTypeMap: { [key: string]: string } = FACTORY_TYPE.reduce((acc, obj) => {\n  return {\n    ...acc,\n    [obj.value]: obj.text\n  }\n}, {})\n\nexport const getFactoryTypeText = (factory: FactoryData) => {\n  if (factory.type) {\n    return factoryTypeMap[factory.type] as FactoryType\n  } else {\n    return null\n  }\n}\n","import { onUnmounted, Ref, ref, watch } from 'vue'\n\nexport const useScroll = (scrollContainer: Ref<HTMLElement | null>) => {\n  const scrollTop = ref(0)\n  const scrollLeft = ref(0)\n\n  const onScroll = () => {\n    if (!scrollContainer.value) {\n      return\n    }\n    const container = scrollContainer.value\n\n    scrollTop.value = container.scrollTop\n    scrollLeft.value = container.scrollLeft\n  }\n\n  watch(scrollContainer, (scrollElem) => {\n    if (!scrollElem) {\n      return\n    }\n\n    scrollTop.value = scrollElem.scrollTop\n    scrollLeft.value = scrollElem.scrollLeft\n\n    scrollElem.addEventListener('scroll', onScroll)\n  })\n\n  onUnmounted(() => {\n    if (scrollContainer.value) {\n      scrollContainer.value.removeEventListener('scroll', onScroll)\n    }\n  })\n\n  return {\n    scrollTop,\n    scrollLeft\n  }\n}\n\nexport default useScroll\n","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('img',{class:_vm.className,attrs:{\"src\":_vm.imageUrl,\"alt\":_vm.alt},on:{\"error\":_vm.onError}})\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <img :src=\"imageUrl\" :alt=\"alt\" :class=\"className\" @error=\"onError\" />\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, ref, onUpdated, watch } from 'vue'\n\nconst IMGUR_REGEX = /i\\.imgur\\.com\\/([a-zA-Z0-9]+)\\.([a-zA-Z0-9]+)(\\?.*)?$/\n\nconst imgurFallbackBaseUrl = process.env.NODE_ENV === 'production' ? process.env.VUE_APP_IMGUR_FALLBACK_URL : '/server/imgur'\n\nexport default defineComponent({\n  name: 'ImgurFallbackImage',\n  props: {\n    src: {\n      type: String,\n      required: true\n    },\n    alt: {\n      type: String,\n      default: ''\n    },\n    className: {\n      type: String,\n      default: ''\n    }\n  },\n  setup (props, context) {\n    const imgurInfo = computed(() => {\n      const matches = IMGUR_REGEX.exec(props.src)\n      return matches\n        ? {\n            id: matches[1],\n            ext: matches[2]\n          }\n        : null\n    })\n\n    const fallbackUrl = computed(() => {\n      if (imgurInfo.value) {\n        return `${imgurFallbackBaseUrl}/${imgurInfo.value.id}.${imgurInfo.value.ext}`\n      } else {\n        return props.src\n      }\n    })\n\n    const imageUrl = ref(props.src)\n\n    // Watch for prop changes and update imageUrl\n    watch(() => props.src, (newSrc) => {\n      imageUrl.value = newSrc\n    })\n\n    const onError = () => {\n      imageUrl.value = fallbackUrl.value\n    }\n\n    return {\n      imageUrl,\n      onError\n    }\n  }\n})\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImgurFallbackImage.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ImgurFallbackImage.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./ImgurFallbackImage.vue?vue&type=template&id=6b24e5af\"\nimport script from \"./ImgurFallbackImage.vue?vue&type=script&lang=ts\"\nexport * from \"./ImgurFallbackImage.vue?vue&type=script&lang=ts\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <v-card elevation=\"3\" class=\"factory-container\" :class=\"{ full, desktop: $vuetify.breakpoint.mdAndUp, empty: !appState.factoryData }\" v-show=\"!appState.formPageOpen\">\n      <div class=\"factory-detail-scroller\" ref=\"factoryDetailScrollerRef\" v-show=\"appState.factoryData\">\n        <v-app-bar fixed color=\"white\" class=\"d-block d-md-none\" v-if=\"scrollOff\">\n          <v-spacer></v-spacer>\n          <v-toolbar-title>\n            <v-icon style=\"margin-bottom: 5px;\" :color=\"statusColor\">mdi-map-marker</v-icon>{{ factoryStatusText }}\n          </v-toolbar-title>\n          <v-spacer></v-spacer>\n          <div class=\"btn-container\">\n            <v-icon class=\"float-right\" @click=\"collapseFactoryDetail\">mdi-close</v-icon>\n            <v-icon class=\"float-right mr-4\" @click=\"copyToClipboard\">mdi-share-variant</v-icon>\n          </div>\n          <div class=\"copied-message flex justify-center align-items-center\" v-if=\"showCopiedMessage\">\n            <v-icon color=\"white\" class=\"mr-1\">mdi-content-copy</v-icon>\n            已複製連結\n          </div>\n        </v-app-bar>\n\n        <v-card-text>\n          <div class=\"d-flex justify-between align-items-center mb-3\">\n            <span class=\"factory-status-title\">工廠狀態</span>\n\n            <v-btn @click=\"copyToClipboard\" rounded v-if=\"$vuetify.breakpoint.mdAndUp\" :outlined=\"showCopiedMessage\" :color=\"showCopiedMessage ? null : 'white'\">\n              <v-icon class=\"mr-1\">mdi-share-variant</v-icon>\n              {{ showCopiedMessage ? '已複製連結' : '分享工廠' }}\n            </v-btn>\n\n            <span v-else>\n              <v-icon class=\"mr-4\" @click=\"copyToClipboard\">mdi-share-variant</v-icon>\n              <v-icon @click=\"collapseFactoryDetail\">mdi-close</v-icon>\n            </span>\n          </div>\n\n          <p class=\"factory-status secondary--text mb-2\" style=\"clear: both\">\n            <v-icon style=\"margin-bottom: 5px;\" :color=\"statusColor\">mdi-map-marker</v-icon>{{ factoryStatusText }}\n          </p>\n\n          <p class=\"caption mb-0\" style=\"color: #A1A1A1;\">\n            工廠編號 {{ factoryId }} <br>\n            {{ lastUpdatedAt }}\n          </p>\n\n          <div class=\"copied-message flex justify-center align-items-center\" v-if=\"showCopiedMessage && !scrollOff\">\n            <v-icon color=\"white\" class=\"mr-1\">mdi-content-copy</v-icon>\n            已複製連結\n          </div>\n        </v-card-text>\n\n        <v-slide-group :show-arrows=\"images.length > 0\" ref=\"slideGroup\">\n          <v-slide-item>\n            <div class='update-image-button d-flex flex-column justify-center align-items-center' @click=\"pageTransition.startUpdateFactoryImages\">\n              <v-icon color=\"white\" class='mb-1'>mdi-camera-plus</v-icon>\n              補充照片\n            </div>\n          </v-slide-item>\n          <v-slide-item v-for=\"(image, index) in images\" class=\"mr-4\" :key=\"image.id\" :class=\"{ 'ml-4': index === 0 }\" @click.native=\"setLightboxIndex(index)\">\n            <ImgurFallbackImage :src=\"image.url\" className=\"factory-slide-image\" />\n          </v-slide-item>\n        </v-slide-group>\n\n        <div class=\"mt-4 mx-3 mb-2\">\n          <h3 class=\"mb-1\">地段 / 地址</h3>\n          <p class=\"mb-5\">{{ factoryAddressAndLandcode }}</p>\n\n          <div v-if=\"full || $vuetify.breakpoint.mdAndUp\" class=\"mb-5\">\n            <h3 class=\"mb-1\">經緯度</h3>\n            <p class=\"mb-1\">{{ longitude }}, {{ latitude }}</p>\n            <p class=\"text-caption\">以上經緯度版本為 WGS84</p>\n          </div>\n\n          <template v-if=\"source\">\n            <h3 class=\"mb-1\">資料來源</h3>\n            <p class=\"mb-5\">{{ source }}</p>\n          </template>\n\n          <hr v-if=\"full || $vuetify.breakpoint.mdAndUp\">\n\n          <v-btn text depressed elevation=\"0\" :ripple=\"false\" color=\"#697F01\" class=\"m-0 mb-0 px-0 v-btn-plain\" @click=\"expandFactoryDetail\" v-if=\"!full && !$vuetify.breakpoint.mdAndUp\">\n            顯示更多資訊\n            &nbsp;\n            <v-icon>mdi-menu-down</v-icon>\n          </v-btn>\n\n          <div v-if=\"full || $vuetify.breakpoint.mdAndUp\" class=\"mt-4\">\n            <h2 class=\"mb-5\">其他工廠資訊</h2>\n\n            <h3 class=\"mb-1\">工廠外部文字</h3>\n            <p class=\"mb-3\" v-if=\"factoryName\">{{ factoryName }}</p>\n            <v-btn class=\"d-block mb-5\" outlined @click=\"startUpdateFactoryCommentFor('name')\">\n              {{ factoryName ? '更改外部文字' : '回報外部文字' }}\n            </v-btn>\n\n            <h3 class=\"mb-1\">工廠類型</h3>\n            <p class=\"mb-3\" v-if=\"factoryType\">{{ factoryType }}</p>\n            <v-btn class=\"d-block mb-5\" outlined @click=\"startUpdateFactoryCommentFor('factory_type')\">\n              {{ factoryType ? '更改工廠類型' : '回報工廠類型' }}\n            </v-btn>\n\n            <h3 class=\"mb-1\">工廠描述</h3>\n            <v-btn outlined @click=\"startUpdateFactoryCommentFor('others')\" class=\"mb-2\">補充工廠描述</v-btn>\n\n            <div v-for=\"(desc, index) in pastDescriptions\" :key=\"index\" class=\"mt-2\" style=\"font-size: 14px\">\n              <p class=\"color-gray-light mb-1\">{{ desc.date }}</p>\n              <p style=\"line-height: 24px;\">{{ desc.others }}</p>\n            </div>\n\n            <template v-if=\"factoryFollowups.length > 0\">\n              <h3 class=\"mb-1\">政府回應</h3>\n\n              <div v-for=\"(followup, index) in factoryFollowups\" class=\"mt-2\" :key=\"index\" style=\"font-size: 14px\">\n                <p style=\"line-height: 24px;\">{{ followup.note }}</p>\n              </div>\n            </template>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"factory-detail-scroller px-4 py-5\" v-show=\"!appState.factoryData\">\n        <h1 class=\"secondary--text mb-5\">請選擇一個地標</h1>\n        <p>請選擇一間工廠查看工廠詳細資訊。</p>\n      </div>\n\n      <div class=\"sidebar-collapse-button d-flex align-items-center justify-center\" v-show=\"$vuetify.breakpoint.mdAndUp\" @click=\"toggleFactoryDetail\">\n        <v-icon color=\"primary\">mdi-menu-left</v-icon>\n      </div>\n    </v-card>\n\n    <CoolLightBox\n      :items=\"lightboxItems\"\n      :index=\"lightboxIndex\"\n      @close=\"() => setLightboxIndex(null)\">\n    </CoolLightBox>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, ref, onUpdated, watch } from 'vue'\nimport copy from 'copy-to-clipboard'\nimport { getFactoryStatus, getStatusBorderColor } from '@/lib/map'\nimport { getFactoryTypeText } from '@/lib/factory'\nimport useScroll from '@/lib/hooks/useScroll'\nimport { getFactoryReportRecords } from '@/api'\n\nimport { useAppState } from '../lib/appState'\nimport { FactoryImage, getDisplayStatusText, ReportRecord } from '../types'\nimport ImgurFallbackImage from './ImgurFallbackImage.vue'\n\nexport default defineComponent({\n  name: 'FactoryDetailPage',\n  components: {\n    ImgurFallbackImage\n  },\n  setup () {\n    const [appState, { pageTransition, expandFactoryDetail, collapseFactoryDetail, toggleFactoryDetail }] = useAppState()\n\n    const images = computed(() => {\n      if (appState.factoryData) {\n        return appState.factoryData.images\n      } else {\n        return []\n      }\n    })\n\n    const lightboxItems = computed(() => {\n      if (appState.factoryData) {\n        return appState.factoryData.images.map(image => ({\n          title: '',\n          description: '',\n          src: image.url\n        }))\n      } else {\n        return []\n      }\n    })\n    const lightboxIndex = ref<number|null>(null)\n    const setLightboxIndex = (i: number) => {\n      lightboxIndex.value = i\n    }\n\n    const factoryStatus = computed(() => {\n      if (appState.factoryData) {\n        return getFactoryStatus(appState.factoryData)\n      } else {\n        return undefined\n      }\n    })\n\n    const factoryFollowups = computed(() => {\n      if (appState.factoryData) {\n        return appState.factoryData.follow_ups_for_user\n      } else {\n        return []\n      }\n    })\n\n    const factoryStatusText = computed(() => {\n      if (typeof factoryStatus.value !== 'undefined') {\n        const factoryDisplayStatus = getDisplayStatusText(factoryStatus.value)\n        const { document_display_status: documentDisplayStatus } = appState.factoryData || {}\n        if (documentDisplayStatus) {\n          return `${factoryDisplayStatus}：${documentDisplayStatus}`\n        }\n        return factoryDisplayStatus\n      } else {\n        return ''\n      }\n    })\n\n    const statusColor = computed(() => {\n      if (typeof factoryStatus.value !== 'undefined') {\n        return getStatusBorderColor(factoryStatus.value)\n      } else {\n        return null\n      }\n    })\n\n    const factoryId = computed(() => {\n      if (appState.factoryData) {\n        return appState.factoryData.display_number\n      } else {\n        return ''\n      }\n    })\n\n    const factoryType = computed(() => {\n      if (appState.factoryData) {\n        return getFactoryTypeText(appState.factoryData)\n      } else {\n        return null\n      }\n    })\n\n    const factoryName = computed(() => {\n      return appState.factoryData?.name || ''\n    })\n\n    const factoryAddressAndLandcode = computed(() => {\n      if (appState.factoryData) {\n        const { townname, sectname, sectcode, landcode } = appState.factoryData\n        // 白鷺段（1005）817地號\n        if (townname && sectname && sectcode && landcode) {\n          return `${townname} ${sectname} (${sectcode}) ${landcode}地號`\n        } else {\n          return '擷取中'\n        }\n      } else {\n        return ''\n      }\n    })\n\n    const source = computed(() => {\n      if (appState.factoryData) {\n        return appState.factoryData.source?.split('')\n          .map(function getName (source) {\n            switch (source) {\n              case 'U':\n                return '本系統'\n              case 'G':\n                return '農委會'\n              case 'E':\n                return '經濟部'\n              default:\n                return ''\n            }\n          }).filter(Boolean)\n          .join('、')\n      }\n\n      return ''\n    })\n\n    const full = computed(() => appState.factoryDetailsExpanded)\n\n    const longitude = computed(() => appState.factoryData?.lng.toFixed(7))\n    const latitude = computed(() => appState.factoryData?.lat.toFixed(7))\n\n    const factoryDetailScrollerRef = ref(null)\n    const { scrollTop } = useScroll(factoryDetailScrollerRef)\n    const scrollOff = computed(() => scrollTop.value > 29 && full.value)\n\n    const showCopiedMessage = ref(false)\n    const copyToClipboard = () => {\n      if (!appState.factoryData) {\n        return\n      }\n\n      const { host, protocol } = window.location\n      const url = `${protocol}//${host}/#map=16/${appState.factoryData?.lng}/${appState.factoryData?.lat}&factoryId=${appState.factoryData.id}`\n\n      copy(url)\n\n      showCopiedMessage.value = true\n      window.setTimeout(() => {\n        showCopiedMessage.value = false\n      }, 1000)\n    }\n\n    // Workaround https://github.com/vuetifyjs/vuetify/issues/10971\n    const slideGroup = ref(null)\n    let prevImages: FactoryImage[]\n    onUpdated(() => {\n      if (JSON.stringify(images.value) === JSON.stringify(prevImages)) {\n        return\n      } else {\n        if (!prevImages) {\n          prevImages = images.value.slice()\n          return\n        } else {\n          prevImages = images.value.slice()\n        }\n      }\n\n      if (!slideGroup.value) {\n        return\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const content = (slideGroup.value as any)?.$refs.content\n      window.setTimeout(() => {\n        content.style = 'translateX(0px)'\n      }, 50)\n    })\n\n    const startUpdateFactoryCommentFor = (field = 'others') => {\n      pageTransition.startUpdateFactoryComment(field)\n    }\n\n    const reportRecords = ref<ReportRecord[]>([])\n    watch(() => appState.factoryData, function () {\n      if (appState.factoryData) {\n        (async () => {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          reportRecords.value = ((await getFactoryReportRecords(appState.factoryData?.id!)) || []).sort((a, b) => {\n            return new Date(b.created_at) >= new Date(a.created_at) ? 1 : -1\n          })\n        })()\n      }\n    })\n\n    const pastDescriptions = computed(() => {\n      return reportRecords.value.map(record => {\n        const date = new Date(record.created_at)\n        const dateStr = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`\n        return {\n          date: dateStr,\n          others: record.others\n        }\n      }).filter(rec => rec.others)\n    })\n    const lastUpdatedAt = computed(() => {\n      if (!appState.factoryData || !appState.factoryData.reported_at) {\n        return null\n      }\n\n      let date\n      if (reportRecords.value.length === 0) {\n        date = new Date(appState.factoryData.reported_at)\n      } else {\n        date = new Date(reportRecords.value[0].created_at)\n      }\n      const dateStr = `${date.getFullYear()}/${date.getMonth() + 1}/${date.getDate()}`\n\n      return `最後更新 ${dateStr}`\n    })\n\n    return {\n      full,\n      appState,\n      pageTransition,\n      images,\n      expandFactoryDetail,\n      collapseFactoryDetail,\n      toggleFactoryDetail,\n      factoryStatus,\n      factoryStatusText,\n      statusColor,\n      factoryId,\n      factoryType,\n      factoryName,\n      factoryAddressAndLandcode,\n      factoryFollowups,\n      source,\n      pastDescriptions,\n      lastUpdatedAt,\n      longitude,\n      latitude,\n      factoryDetailScrollerRef,\n      scrollOff,\n      showCopiedMessage,\n      copyToClipboard,\n      slideGroup,\n      startUpdateFactoryCommentFor,\n      lightboxItems,\n      lightboxIndex,\n      setLightboxIndex\n    }\n  }\n})\n</script>\n\n<style scoped lang=\"scss\">\n@import '@/styles/variables';\n\n.factory-container {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  z-index: 5;\n\n  .factory-detail-scroller {\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n  }\n\n  .factory-status {\n    font-size: 24px;\n  }\n\n  h3 {\n    color: $light-green-color;\n    font-style: normal;\n    font-weight: 500;\n    font-size: 16px;\n    line-height: 24px;\n    letter-spacing: 0.03em;\n\n    + p {\n      line-height: 1.3;\n    }\n  }\n\n  h2 {\n    color: $dark-green-color;\n    font-style: normal;\n    font-weight: 500;\n    font-size: 20px;\n    line-height: 30px;\n    letter-spacing: 0.03em;\n  }\n\n  .text-caption {\n    color: $gray-light-color;\n  }\n\n  hr {\n    color: #EAF3BF;\n    border-color: #EAF3BF;\n    background-color: #EAF3BF;\n    height: 1px;\n    border-width: inherit;\n  }\n\n  .btn-container {\n    position: absolute;\n    right: 10px;\n  }\n\n  &.full .factory-detail-scroller {\n    padding-bottom: 60px;\n  }\n\n  // mobile expand\n  &:not(.desktop) {\n    &.full {\n      min-height: 100%;\n      overflow: auto;\n      top: 0;\n    }\n\n    &.empty {\n      display: none;\n    }\n  }\n\n  // sidebar style\n  &.desktop {\n    width: 395px;\n    right: -395px;\n    top: 64px;\n    max-height: calc(100% - 64px);\n    border-radius: 0;\n    z-index: 4;\n    overflow: visible;\n    transition: transform ease-in-out 200ms;\n\n    // expanded sidebar\n    &.full {\n      transform: translateX(-395px);\n\n      .sidebar-collapse-button .v-icon {\n        transform: rotate(180deg);\n      }\n    }\n\n    .copied-message {\n      display: none;\n    }\n  }\n\n  .sidebar-collapse-button {\n    position: absolute;\n    top: 30px;\n    left: -30px;\n    background-color: white;\n    width: 30px;\n    height: 74px;\n    box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.1),  inset -0.7px 0px 2px rgba(0, 0, 0, 0.1);\n    // add important to workaround vutify style\n    border-radius: 10px 0 0 10px !important;\n    cursor: pointer;\n  }\n}\n\n.factory-status-title {\n  color: $dark-green-color;\n  font-size: 16px;\n}\n\n.factory-slide-image {\n  width: 120px;\n  height: 68px;\n  overflow: hidden;\n  object-fit: cover;\n  cursor: pointer;\n}\n\n.copied-message {\n  background-color: $light-green-color;\n  color: white;\n  font-size: 14px;\n  height: 41px;\n  position: absolute;\n  width: 100%;\n  left: 0;\n}\n\n.v-app-bar .copied-message {\n  top: 56px;\n}\n\n.v-card__text .copied-message {\n  top: 48px;\n}\n\n.update-image-button {\n  background-color: $dark-green-color;\n  width: 100px;\n  height: 68px;\n  color: white;\n  font-size: 12px;\n  user-select: none;\n  cursor: pointer;\n\n  &:first-child {\n    margin-left: 15px;\n  }\n}\n\n.v-slide-group__wrapper {\n  touch-action: auto !important;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FactoryDetailPage.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FactoryDetailPage.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./FactoryDetailPage.vue?vue&type=template&id=d5d4ce3a&scoped=true\"\nimport script from \"./FactoryDetailPage.vue?vue&type=script&lang=ts\"\nexport * from \"./FactoryDetailPage.vue?vue&type=script&lang=ts\"\nimport style0 from \"./FactoryDetailPage.vue?vue&type=style&index=0&id=d5d4ce3a&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d5d4ce3a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"about-dialog-container\"},[_c('app-modal',{attrs:{\"open\":_vm.open,\"dismiss\":_vm.dismiss}},[_c('div',{staticClass:\"page\"},[_c('h3',[_vm._v(\"關於回報系統\")]),_c('p',[_vm._v(\" 農地違章工廠舉報系統為協助民眾回報揭露農地違章工廠資訊，並非實際完成舉報。 \")]),_c('p',[_vm._v(\" 地球公民基金會將整理資料進行部分案件追蹤，完成舉報者可於「已舉報」案件查見。 \")]),_c('p',[_vm._v(\" 105.05.20 前的違章工廠我們將持續收集資訊，但本系統優先針對新增建與中高污染違章工廠進行舉報。 \")]),_c('p',[_vm._v(\" 本系統感謝 g0v.tw 社群朋友共同開發。 \")]),_c('p',[_vm._v(\" 既有疑似違章工廠資料來源為 2019 年 7 月 30 日取自內政部國土測繪圖資雲\"),_c('a',{attrs:{\"href\":\"https://maps.nlsc.gov.tw/\"}},[_vm._v(\"網站\")]),_vm._v(\"。 \")]),_c('p',[_vm._v(\" 全站使用者貢獻資料以 \"),_c('a',{attrs:{\"href\":\"https://creativecommons.org/licenses/by/3.0/tw/\"}},[_vm._v(\"CC BY 姓名標示 3.0\")]),_vm._v(\" 釋出，標註「© 農地違章工廠舉報小幫手貢獻者」，原始碼以 MIT 開放授權公開在 \"),_c('a',{attrs:{\"href\":\"https://github.com/Disfactory/Disfactory\"}},[_vm._v(\"GitHub\")]),_vm._v(\" 上 \")])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"app-modal-component\",class:{ open: _vm.open },attrs:{\"data-testid\":\"modal-container\"}},[_c('div',{staticClass:\"app-modal-backdrop\",attrs:{\"data-label\":\"modal-backdrop\"},on:{\"click\":_vm.dismiss}}),_c('div',{staticClass:\"app-modal\"},[(_vm.showCloseButton)?_c('div',{staticClass:\"close\",attrs:{\"data-label\":\"modal-close\",\"data-testid\":\"modal-close\"},on:{\"click\":_vm.dismiss}}):_vm._e(),_vm._t(\"default\")],2)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"app-modal-component\"\n    :class=\"{ open }\"\n    data-testid=\"modal-container\"\n  >\n    <div class=\"app-modal-backdrop\" @click=\"dismiss\" data-label=\"modal-backdrop\" />\n    <div class=\"app-modal\">\n      <div class=\"close\" @click=\"dismiss\" v-if=\"showCloseButton\" data-label=\"modal-close\" data-testid=\"modal-close\" />\n      <slot />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'AppModal',\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    dismiss: {\n      type: Function\n    },\n    showCloseButton: {\n      type: Boolean,\n      default: true\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../styles/variables';\n@import '~@/styles/utils';\n\n.app-modal-component {\n  z-index: 997;\n  position: fixed;\n  -webkit-overflow-scrolling: touch;\n\n  justify-content: center;\n  align-items: center;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n\n  padding: 45px 16px;\n\n  display: none;\n\n  &.open {\n    display: flex;\n  }\n}\n\n.app-modal-backdrop {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.4);\n  z-index: 998;\n}\n\n.app-modal {\n  z-index: 999;\n\n  border-radius: 3px;\n  border: solid 2px $primary-color;\n  background-color: $background-color;\n\n  padding: 27px 22px;\n\n  position: absolute;\n  -webkit-overflow-scrolling: touch;\n  top: 90px;\n  max-height: 100%;\n  max-width: 100%;\n  overflow: auto;\n\n  .close {\n    z-index: 1;\n    @include close-button;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AppModal.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AppModal.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./AppModal.vue?vue&type=template&id=68da9dd0&scoped=true\"\nimport script from \"./AppModal.vue?vue&type=script&lang=ts\"\nexport * from \"./AppModal.vue?vue&type=script&lang=ts\"\nimport style0 from \"./AppModal.vue?vue&type=style&index=0&id=68da9dd0&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"68da9dd0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"about-dialog-container\">\n    <app-modal :open=\"open\" :dismiss=\"dismiss\">\n      <div class=\"page\">\n        <h3>關於回報系統</h3>\n        <p>\n          農地違章工廠舉報系統為協助民眾回報揭露農地違章工廠資訊，並非實際完成舉報。\n        </p>\n\n        <p>\n          地球公民基金會將整理資料進行部分案件追蹤，完成舉報者可於「已舉報」案件查見。\n        </p>\n\n        <p>\n          105.05.20 前的違章工廠我們將持續收集資訊，但本系統優先針對新增建與中高污染違章工廠進行舉報。\n        </p>\n\n        <p>\n          本系統感謝 g0v.tw 社群朋友共同開發。\n        </p>\n\n        <p>\n          既有疑似違章工廠資料來源為 2019 年 7 月 30 日取自內政部國土測繪圖資雲<a href=\"https://maps.nlsc.gov.tw/\">網站</a>。\n        </p>\n\n        <p>\n          全站使用者貢獻資料以 <a href=\"https://creativecommons.org/licenses/by/3.0/tw/\">CC BY 姓名標示 3.0</a> 釋出，標註「© 農地違章工廠舉報小幫手貢獻者」，原始碼以 MIT 開放授權公開在 <a href=\"https://github.com/Disfactory/Disfactory\">GitHub</a> 上\n        </p>\n      </div>\n    </app-modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport AppModal from '@/components/AppModal.vue'\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'AboutModal',\n  components: {\n    AppModal\n  },\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    dismiss: {\n      type: Function\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\">\n@import '@/styles/page';\n@import '@/styles/variables';\n\n.about-dialog-container .app-modal {\n  top: 25px;\n  max-height: calc(100% - 50px);\n  max-width: calc(100% - 20px);\n\n  .page h3 {\n    color: $primary-color;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AboutModal.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AboutModal.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./AboutModal.vue?vue&type=template&id=014845ee\"\nimport script from \"./AboutModal.vue?vue&type=script&lang=ts\"\nexport * from \"./AboutModal.vue?vue&type=script&lang=ts\"\nimport style0 from \"./AboutModal.vue?vue&type=style&index=0&id=014845ee&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"contact-modal-container\"},[_c('app-modal',{attrs:{\"open\":_vm.open,\"dismiss\":_vm.dismiss}},[_c('div',{staticClass:\"page\"},[_c('img',{attrs:{\"width\":\"137\",\"src\":\"/images/cet-logo.png\",\"alt\":\"Citizen of the Earth Taiwan\"}}),_c('h3',[_vm._v(\" 有任何回報相關問題\"),_c('br'),_vm._v(\" 歡迎聯絡 \")]),_c('p',[_vm._v(\" 地球公民基金會\"),_c('br'),_vm._v(\" TEL: 02-23920371\"),_c('br'),_vm._v(\" Email: \"),_c('a',{attrs:{\"href\":\"mailto:cet@cet-taiwan.org\"}},[_vm._v(\"cet@cet-taiwan.org\")]),_c('br')])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"contact-modal-container\">\n    <app-modal :open=\"open\" :dismiss=\"dismiss\">\n      <div class=\"page\">\n        <img width=\"137\" src=\"/images/cet-logo.png\" alt=\"Citizen of the Earth Taiwan\">\n\n        <h3>\n          有任何回報相關問題<br>\n          歡迎聯絡\n        </h3>\n\n        <p>\n          地球公民基金會<br>\n          TEL: 02-23920371<br>\n          Email: <a href=\"mailto:cet@cet-taiwan.org\">cet@cet-taiwan.org</a><br>\n        </p>\n      </div>\n    </app-modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport AppModal from '@/components/AppModal.vue'\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'ContactModal',\n  components: {\n    AppModal\n  },\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    dismiss: {\n      type: Function\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\">\n@import '@/styles/page';\n@import '@/styles/variables';\n\n.contact-modal-container .app-modal {\n  top: 25px;\n  max-height: calc(100% - 50px);\n  max-width: calc(100% - 20px);\n  padding-top: 60px;\n\n  .page {\n    text-align: center;\n\n    h3 {\n      color: $primary-color;\n      line-height: 1.5em;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ContactModal.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ContactModal.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./ContactModal.vue?vue&type=template&id=074612c2\"\nimport script from \"./ContactModal.vue?vue&type=script&lang=ts\"\nexport * from \"./ContactModal.vue?vue&type=script&lang=ts\"\nimport style0 from \"./ContactModal.vue?vue&type=style&index=0&id=074612c2&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"getting-started-container\"},[_c('app-modal',{attrs:{\"open\":_vm.open,\"showCloseButton\":false,\"dismiss\":_vm.dismiss}},[_c('div',{staticClass:\"page\"},[_c('h3',{staticClass:\"text-center\"},[_vm._v(\"歡迎來到\"),_c('b',[_vm._v(\"農地違章工廠回報系統！\")])]),_c('br'),_c('br'),_c('p',[_vm._v(\"需要大家回報以下工廠之照片及資訊：\")]),_c('p',[_c('ul',[_c('li',[_vm._v(\"2016.05.20後新增的農地違章工廠\")]),_c('li',[_vm._v(\"中高污染工廠\")])])]),_c('p',[_vm._v(\"以上資訊將由\"),_c('b',[_vm._v(\"地球公民基金會\")]),_vm._v(\"彙整後，向政府舉報並追蹤拆除進度。\")]),_c('small',{staticClass:\"text-center\",staticStyle:{\"padding-left\":\"20px\",\"padding-right\":\"20px\"}},[_vm._v(\" 行動前請同意資料貢獻\"),_c('a',{attrs:{\"href\":\"https://license.disfactory.tw/#%E8%BE%B2%E5%9C%B0%E9%81%95%E7%AB%A0%E5%B7%A5%E5%BB%A0%E5%9B%9E%E5%A0%B1%E7%B3%BB%E7%B5%B1%EF%BC%88disfactory%EF%BC%89%E8%B2%A2%E7%8D%BB%E5%8D%94%E8%AD%B0\",\"target\":\"_blank\"}},[_vm._v(\"授權條款\")]),_vm._v(\"與\"),_c('a',{attrs:{\"href\":\"https://license.disfactory.tw/#%E9%9A%B1%E7%A7%81%E6%AC%8A%E6%A2%9D%E6%AC%BE\",\"target\":\"_blank\"}},[_vm._v(\"隱私條款\")]),_vm._v(\"。本網站由\"),_c('a',{attrs:{\"href\":\"https://www.cet-taiwan.org/\",\"target\":\"_blank\"}},[_vm._v(\"地球公民基金會\")]),_vm._v(\"與 \"),_c('a',{attrs:{\"href\":\"https://g0v.tw/\",\"target\":\"_blank\"}},[_vm._v(\"g0v.tw\")]),_vm._v(\" 社群共同開發。 \")]),_c('app-button',{on:{\"click\":_vm.agree}},[_vm._v(\"我同意加入回報\")]),_c('small',[_c('a',{attrs:{\"href\":\"https://about.disfactory.tw\"}},[_vm._v(\"我不同意，請帶我離開這個頁面\")])])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('button',{class:{ outline: _vm.outline, disabled: _vm.disabled, rect: _vm.rect, small: _vm.small, auto: _vm.auto, ...{ [_vm.color]: true }},on:{\"click\":_vm.click}},[_vm._t(\"default\")],2)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <button\n    :class=\"{ outline, disabled, rect, small, auto, ...{ [color]: true }}\"\n    @click=\"click\"\n  >\n    <slot />\n  </button>\n</template>\n\n<script>\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'AppButton',\n  props: {\n    outline: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    rect: {\n      type: Boolean,\n      default: false\n    },\n    color: {\n      type: String,\n      default: 'default'\n    },\n    small: {\n      type: Boolean,\n      default: false\n    },\n    auto: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup (props, context) {\n    const click = () => {\n      if (!props.disabled) {\n        context.emit('click')\n      }\n    }\n\n    return {\n      click\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/variables';\nbutton {\n  width: 100%;\n  background-color: $primary-color;\n  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.5);\n  border: 1px solid #fff;\n  border-radius: 24px;\n  padding: 10px 21px;\n  user-select: none;\n\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n\n  color: $dark-font-color;\n  font-size: 20px;\n  text-align: center;\n\n  &.small {\n    font-size: 12px;\n    padding: 4px 12px;\n  }\n\n  &:hover {\n    cursor: pointer;\n    background-color: lighten($primary-color, 10%);\n  }\n\n  &.disabled {\n    cursor: not-allowed;\n    background-color: #aaa;\n  }\n\n  &.blue {\n    &:hover {\n      background-color: lighten($blue-color, 10%);\n    }\n  }\n\n  &.red {\n    &:hover {\n      background-color: lighten($red-color, 10%);\n    }\n  }\n\n  &.gray {\n    &:hover {\n      background-color: lighten($gray-color, 10%);\n    }\n  }\n\n  &.dark-green {\n    background-color: $dark-green-color;\n\n    &:hover {\n      background-color: lighten($dark-green-color, 10%);\n    }\n  }\n\n  &.white {\n    background-color: white;\n    color: $dark-green-color;\n\n    &:hover {\n      background-color: darken(white, 10%);\n    }\n  }\n\n  &.auto {\n    width: auto;\n  }\n}\n\n.outline {\n  border: 1px solid $primary-color;\n  background-color: #fff;\n  color: $font-color;\n\n  &:hover {\n    cursor: pointer;\n    background-color: $primary-color;\n    color: $dark-font-color;\n  }\n\n  &.blue {\n    border: 1px solid $blue-color;\n\n    &:hover {\n      background-color: $blue-color;\n    }\n  }\n\n  &.red {\n    border: 1px solid $red-color;\n\n    &:hover {\n      background-color: $red-color;\n    }\n  }\n\n  &.gray {\n    border: 1px solid $gray-color;\n\n    &:hover {\n      background-color: $gray-color;\n    }\n  }\n}\n\n.rect {\n  border-radius: 4px;\n  box-shadow: none;\n  height: 100%;\n  font-size: 16px;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AppButton.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./AppButton.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./AppButton.vue?vue&type=template&id=dcff7058&scoped=true\"\nimport script from \"./AppButton.vue?vue&type=script&lang=js\"\nexport * from \"./AppButton.vue?vue&type=script&lang=js\"\nimport style0 from \"./AppButton.vue?vue&type=style&index=0&id=dcff7058&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dcff7058\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"getting-started-container\">\n    <app-modal :open=\"open\" :showCloseButton=\"false\" :dismiss=\"dismiss\">\n      <div class=\"page\">\n        <h3 class=\"text-center\">歡迎來到<b>農地違章工廠回報系統！</b></h3>\n        <br><br>\n        <p>需要大家回報以下工廠之照片及資訊：</p>\n\n        <p>\n          <ul>\n            <li>2016.05.20後新增的農地違章工廠</li>\n            <li>中高污染工廠</li>\n          </ul>\n        </p>\n\n        <p>以上資訊將由<b>地球公民基金會</b>彙整後，向政府舉報並追蹤拆除進度。</p>\n\n        <small class=\"text-center\" style=\"padding-left: 20px; padding-right: 20px;\">\n          行動前請同意資料貢獻<a href=\"https://license.disfactory.tw/#%E8%BE%B2%E5%9C%B0%E9%81%95%E7%AB%A0%E5%B7%A5%E5%BB%A0%E5%9B%9E%E5%A0%B1%E7%B3%BB%E7%B5%B1%EF%BC%88disfactory%EF%BC%89%E8%B2%A2%E7%8D%BB%E5%8D%94%E8%AD%B0\" target=\"_blank\">授權條款</a>與<a href=\"https://license.disfactory.tw/#%E9%9A%B1%E7%A7%81%E6%AC%8A%E6%A2%9D%E6%AC%BE\" target=\"_blank\">隱私條款</a>。本網站由<a href=\"https://www.cet-taiwan.org/\" target=\"_blank\">地球公民基金會</a>與 <a href=\"https://g0v.tw/\" target=\"_blank\">g0v.tw</a> 社群共同開發。\n        </small>\n\n        <app-button @click=\"agree\">我同意加入回報</app-button>\n\n        <small>\n          <a href=\"https://about.disfactory.tw\">我不同意，請帶我離開這個頁面</a>\n        </small>\n      </div>\n    </app-modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport AppModal from '@/components/AppModal.vue'\nimport AppButton from '@/components/AppButton.vue'\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'GettingStartedModal',\n  components: {\n    AppModal,\n    AppButton\n  },\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    dismiss: {\n      type: Function\n    }\n  },\n  setup (props) {\n    return {\n      agree () {\n        localStorage.setItem('use-app', 'true')\n        if (props.dismiss) {\n          props.dismiss()\n        }\n      }\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\">\n@import '@/styles/page';\n@import '@/styles/variables';\n\n.getting-started-container .app-modal {\n  top: 20px;\n  max-height: calc(100% - 40px);\n  max-width: calc(100% - 20px);\n  padding-top: 35px;\n\n  .page {\n    h3 {\n      color: $primary-color;\n      font-size: 18px;\n      margin-top: 0;\n      font-weight: normal;\n      line-height: 1.2;\n    }\n\n    small {\n      text-align: center;\n      display: block;\n      margin: 1em 0;\n      line-height: 1.1;\n    }\n\n    a {\n      color: $primary-color;\n      text-decoration: none;\n    }\n\n    pre {\n      line-height: 1.5em;\n      white-space: pre-line;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GettingStartedModal.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./GettingStartedModal.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./GettingStartedModal.vue?vue&type=template&id=4f81d562\"\nimport script from \"./GettingStartedModal.vue?vue&type=script&lang=ts\"\nexport * from \"./GettingStartedModal.vue?vue&type=script&lang=ts\"\nimport style0 from \"./GettingStartedModal.vue?vue&type=style&index=0&id=4f81d562&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"tutorial-modal-container\"},[_c('app-modal',{attrs:{\"open\":_vm.open,\"dismiss\":_vm.onDismissClick}},[(_vm.isAdd || _vm.isUpdate)?_c('div',{staticClass:\"back-button\",attrs:{\"data-testid\":\"back-button\"},on:{\"click\":_vm.openHome}},[_c('span'),_c('span'),_c('span')]):_vm._e(),_c('div',{staticClass:\"page\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isHome),expression:\"isHome\"}],attrs:{\"id\":\"tutorial-home\"}},[_c('h2',[_vm._v(\"使用說明\")]),_c('p',[_vm._v(\" 如果系統無法讀取你的位置， 請至手機系統設定開啟位置權限。 \")]),_c('div',{staticClass:\"outline-button\",on:{\"click\":_vm.openAdd}},[_vm._v(\"如何新增一筆\"),_c('br'),_vm._v(\"違章工廠的資料？\")]),_c('div',{staticClass:\"outline-button\",on:{\"click\":_vm.openUpdate}},[_vm._v(\"如何在一筆資料裡\"),_c('br'),_vm._v(\"補充更多資訊？\")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isAdd),expression:\"isAdd\"}],attrs:{\"id\":\"tutorial-add-factory\"}},[_c('carousel',{ref:\"createCarousel\",attrs:{\"per-page\":1,\"paginationActiveColor\":\"#6E8501\",\"paginationColor\":\"#e3e3e3\",\"paginationPadding\":5}},_vm._l((_vm.addImages),function(image,index){return _c('slide',{key:image},[_c('h2',[_vm._v(\"新增違章工廠(\"+_vm._s(index + 1)+\"/7)\")]),_c('img',{attrs:{\"src\":image}})])}),1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isUpdate),expression:\"isUpdate\"}],attrs:{\"id\":\"tutorial-update-factory\"}},[_c('carousel',{ref:\"updateCarousel\",attrs:{\"per-page\":1,\"paginationActiveColor\":\"#6E8501\",\"paginationColor\":\"#e3e3e3\",\"paginationPadding\":5}},_vm._l((_vm.updateImages),function(image,index){return _c('slide',{key:image},[_c('h2',[_vm._v(\"補充工廠資訊(\"+_vm._s(index + 1)+\"/4)\")]),_c('img',{attrs:{\"src\":image}})])}),1)],1)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"tutorial-modal-container\">\n    <app-modal :open=\"open\" :dismiss=\"onDismissClick\">\n      <div class=\"back-button\" v-if=\"isAdd || isUpdate\" @click=\"openHome\" data-testid=\"back-button\">\n        <span />\n        <span />\n        <span />\n      </div>\n\n      <div class=\"page\">\n        <div id=\"tutorial-home\" v-show=\"isHome\">\n          <h2>使用說明</h2>\n\n          <p>\n            如果系統無法讀取你的位置，\n            請至手機系統設定開啟位置權限。\n          </p>\n\n          <div class=\"outline-button\" @click=\"openAdd\">如何新增一筆<br>違章工廠的資料？</div>\n          <div class=\"outline-button\" @click=\"openUpdate\">如何在一筆資料裡<br>補充更多資訊？</div>\n        </div>\n\n        <div id=\"tutorial-add-factory\" v-show=\"isAdd\">\n\n          <carousel :per-page=\"1\" paginationActiveColor='#6E8501' paginationColor='#e3e3e3' :paginationPadding=\"5\" ref=\"createCarousel\">\n            <slide v-for=\"(image, index) in addImages\" :key=\"image\">\n              <h2>新增違章工廠({{index + 1}}/7)</h2>\n              <img :src=\"image\">\n            </slide>\n          </carousel>\n        </div>\n\n        <div id=\"tutorial-update-factory\" v-show=\"isUpdate\">\n          <carousel :per-page=\"1\" paginationActiveColor='#6E8501' paginationColor='#e3e3e3' :paginationPadding=\"5\" ref=\"updateCarousel\">\n            <slide v-for=\"(image, index) in updateImages\" :key=\"image\">\n              <h2>補充工廠資訊({{index + 1}}/4)</h2>\n              <img :src=\"image\">\n            </slide>\n          </carousel>\n        </div>\n\n      </div>\n    </app-modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport AppModal from '@/components/AppModal.vue'\nimport { defineComponent, ref, computed } from 'vue'\nimport { Carousel, Slide } from 'vue-carousel'\n\nexport default defineComponent({\n  name: 'TutorialModal',\n  components: {\n    AppModal,\n    Carousel,\n    Slide\n  },\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    dismiss: {\n      type: Function\n    }\n  },\n  setup (props) {\n    const page = ref('home')\n\n    const isHome = computed(() => page.value === 'home')\n    const isAdd = computed(() => page.value === 'add')\n    const isUpdate = computed(() => page.value === 'update')\n\n    const createCarousel = ref<HTMLElement | null>(null)\n    const updateCarousel = ref<HTMLElement | null>(null)\n\n    const openHome = () => { page.value = 'home' }\n    const openAdd = () => {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion, @typescript-eslint/no-explicit-any\n      (createCarousel.value! as any).goToPage(0)\n      page.value = 'add'\n    }\n    const openUpdate = () => {\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion, @typescript-eslint/no-explicit-any\n      (updateCarousel.value! as any).goToPage(0)\n      page.value = 'update'\n    }\n\n    const addImages = new Array(7).fill(true).map((_, index) => `/images/tutorial/create-${index + 1}.jpg`)\n    const updateImages = new Array(4).fill(true).map((_, index) => `/images/tutorial/update-${index + 1}.jpg`)\n\n    const onDismissClick = () => {\n      openHome()\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      props.dismiss!()\n    }\n\n    return {\n      isHome,\n      isAdd,\n      isUpdate,\n      openHome,\n      openAdd,\n      openUpdate,\n      addImages,\n      updateImages,\n      onDismissClick,\n      createCarousel,\n      updateCarousel\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\">\n@import '@/styles/page';\n@import '@/styles/variables';\n@import '@/styles/components/back-button';\n\n.tutorial-modal-container .app-modal {\n  top: 20px;\n  max-height: 100%;\n  max-width: calc(100% - 20px);\n  padding: 70px 45px 35px;\n\n  .page {\n    height: auto;\n\n    img {\n      display: block;\n      margin: 0 auto;\n      max-height: 65vh;\n    }\n\n    h2 {\n      color: $second-color;\n      border: none;\n    }\n\n    #tutorial-home {\n      p {\n        font-weight: bold;\n        margin-top: 2em;\n        margin-bottom: 2em;\n      }\n    }\n\n    #tutorial-add-factory, #tutorial-update-factory {\n      h2 {\n        margin-right: 0;\n        text-align: center;\n        color: $primary-color;\n      }\n    }\n  }\n\n  .outline-button {\n    border: solid 1px $primary-color;\n    padding: 10px 20px;\n    color: $primary-color;\n    margin-bottom: 15px;\n    line-height: 1.5em;\n    user-select: none;\n    cursor: pointer;\n\n    &:hover, &:active {\n      color: white;\n      background-color: $primary-color;\n    }\n  }\n\n  .back-button {\n    position: absolute;\n    top: 24px;\n    left: 22px;\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TutorialModal.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TutorialModal.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./TutorialModal.vue?vue&type=template&id=265e10af\"\nimport script from \"./TutorialModal.vue?vue&type=script&lang=ts\"\nexport * from \"./TutorialModal.vue?vue&type=script&lang=ts\"\nimport style0 from \"./TutorialModal.vue?vue&type=style&index=0&id=265e10af&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('v-dialog',_vm._b({attrs:{\"max-width\":\"350\"},model:{value:(_vm.safetyModalState),callback:function ($$v) {_vm.safetyModalState=$$v},expression:\"safetyModalState\"}},'v-dialog',_vm.$attrs,false),[_c('div',{staticClass:\"safety-modal\"},[_c('v-carousel',{attrs:{\"progress-color\":\"#6E8501\",\"light\":\"\",\"hide-delimiter-background\":\"\",\"progress\":false}},[_c('v-card',[_c('v-carousel-item',{staticClass:\"page pa-3\"},[_c('h1',{staticClass:\"mt-3 pb-1 mb-4\"},[_vm._v(\"安全須知\")]),_c('p',[_vm._v(\" 請參考以下建議，前往違章工廠拍照蒐證 \")])]),_c('v-carousel-item',{staticClass:\"page pa-3\"},[_c('img',{attrs:{\"src\":\"/images/safety_notice/1.png\",\"alt\":\"\"}}),_c('h2',[_vm._v(\" 場勘 \")]),_c('p',[_vm._v(\" 假裝路過，檢查有無監視器；尋找適合拍照的隱蔽處 \")])]),_c('v-carousel-item',{staticClass:\"page pa-3\"},[_c('img',{attrs:{\"src\":\"/images/safety_notice/2.png\",\"alt\":\"\"}}),_c('h2',[_vm._v(\"藏身\")]),_c('p',[_vm._v(\" 盡量避開監視器、他人視線；盡量在隱蔽處拍照（例如：車上、民宅內、樹叢間、遠方） \")])]),_c('v-carousel-item',{staticClass:\"page pa-3\"},[_c('img',{attrs:{\"src\":\"/images/safety_notice/3.png\",\"alt\":\"\"}}),_c('h2',[_vm._v(\"避嫌\")]),_c('p',[_vm._v(\"假如地點不夠隱密，請用手機拍照，降低他人戒心\")])]),_c('v-carousel-item',{staticClass:\"page pa-3\"},[_c('img',{attrs:{\"src\":\"/images/safety_notice/4.png\",\"alt\":\"\"}}),_c('h2',[_vm._v(\"速離\")]),_c('p',[_vm._v(\"拍到1張清晰照片即可離去\")])]),_c('v-carousel-item',{staticClass:\"page pa-3\"},[_c('img',{attrs:{\"src\":\"/images/safety_notice/5.png\",\"alt\":\"\"}}),_c('h2',[_vm._v(\"應變\")]),_c('p',[_vm._v(\"假如有人上前問話，請表現得「充滿好奇心」，試著跟對方聊天（例如：好奇水電師傅的施工技術），再伺機離開。\")])])],1)],1)],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-dialog v-model=\"safetyModalState\" v-bind=\"$attrs\" max-width=\"350\">\n    <div class=\"safety-modal\">\n      <v-carousel progress-color='#6E8501' light hide-delimiter-background :progress=\"false\">\n        <v-card>\n          <v-carousel-item class=\"page pa-3\">\n            <h1 class=\"mt-3 pb-1 mb-4\">安全須知</h1>\n            <p>\n              請參考以下建議，前往違章工廠拍照蒐證\n            </p>\n          </v-carousel-item>\n          <v-carousel-item class=\"page pa-3\">\n            <img src=\"/images/safety_notice/1.png\" alt=\"\">\n            <h2>\n              場勘\n            </h2>\n            <p>\n              假裝路過，檢查有無監視器；尋找適合拍照的隱蔽處\n            </p>\n          </v-carousel-item>\n          <v-carousel-item class=\"page pa-3\">\n            <img src=\"/images/safety_notice/2.png\" alt=\"\">\n            <h2>藏身</h2>\n            <p>\n              盡量避開監視器、他人視線；盡量在隱蔽處拍照（例如：車上、民宅內、樹叢間、遠方）\n            </p>\n          </v-carousel-item>\n          <v-carousel-item class=\"page pa-3\">\n            <img src=\"/images/safety_notice/3.png\" alt=\"\">\n            <h2>避嫌</h2>\n            <p>假如地點不夠隱密，請用手機拍照，降低他人戒心</p>\n          </v-carousel-item>\n          <v-carousel-item class=\"page pa-3\">\n            <img src=\"/images/safety_notice/4.png\" alt=\"\">\n            <h2>速離</h2>\n            <p>拍到1張清晰照片即可離去</p>\n          </v-carousel-item>\n          <v-carousel-item class=\"page pa-3\">\n            <img src=\"/images/safety_notice/5.png\" alt=\"\">\n            <h2>應變</h2>\n            <p>假如有人上前問話，請表現得「充滿好奇心」，試著跟對方聊天（例如：好奇水電師傅的施工技術），再伺機離開。</p>\n          </v-carousel-item>\n        </v-card>\n      </v-carousel>\n    </div>\n  </v-dialog>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed } from 'vue'\n\nexport default defineComponent({\n  name: 'SafetyModal',\n  props: {\n    value: {\n      required: true,\n      type: Boolean\n    }\n  },\n  setup (props, context) {\n    const safetyModalState = computed({\n      get: () => props.value,\n      set: (value) => context.emit('input', value)\n    })\n\n    return {\n      safetyModalState\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\">\n@import '@/styles/page';\n@import '@/styles/variables';\n\n.safety-modal {\n  .page {\n    overflow: hidden;\n\n    img {\n      max-height: 45vh;\n\n      display: block;\n      margin: 0 auto;\n    }\n\n    h2 {\n      font-size: 36px;\n      color: $primary-color;\n      border: none;\n      margin-bottom: -5px;\n    }\n  }\n}\n</style>\nG\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SafetyModal.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SafetyModal.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./SafetyModal.vue?vue&type=template&id=f1ad1acc\"\nimport script from \"./SafetyModal.vue?vue&type=script&lang=ts\"\nexport * from \"./SafetyModal.vue?vue&type=script&lang=ts\"\nimport style0 from \"./SafetyModal.vue?vue&type=style&index=0&id=f1ad1acc&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"ios-version-modal-container\"},[_c('app-modal',{attrs:{\"open\":_vm.open,\"dismiss\":_vm.dismiss}},[_c('div',{staticClass:\"page\"},[_c('h3',[_vm._v(\"⚠️你的手機無法新增可疑工廠\")]),_c('p',[_vm._v(\" 很抱歉，你的 iPhone iOS 操作系統無法成功在本網站上傳照片。\"),_c('br'),_vm._v(\" 請改用電腦新增可疑工廠照片或是至「系統設定」升級 iOS操作系統版本到至少 13.4 以上。瀏覽地圖功能則不受影響。 \")]),_c('app-button',{on:{\"click\":_vm.dismiss}},[_vm._v(\"知道了\")])],1)])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ios-version-modal-container\">\n    <app-modal :open=\"open\" :dismiss=\"dismiss\">\n      <div class=\"page\">\n        <h3>⚠️你的手機無法新增可疑工廠</h3>\n        <p>\n          很抱歉，你的 iPhone iOS 操作系統無法成功在本網站上傳照片。<br>\n          請改用電腦新增可疑工廠照片或是至「系統設定」升級 iOS操作系統版本到至少 13.4 以上。瀏覽地圖功能則不受影響。\n        </p>\n        <app-button @click=\"dismiss\">知道了</app-button>\n      </div>\n    </app-modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport AppModal from '@/components/AppModal.vue'\nimport AppButton from '@/components/AppButton.vue'\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  name: 'IosVersionModal',\n  components: {\n    AppModal,\n    AppButton\n  },\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    dismiss: {\n      type: Function\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\">\n@import '@/styles/page';\n@import '@/styles/variables';\n\n.ios-version-modal-container .app-modal {\n  top: 25px;\n  max-height: calc(100% - 50px);\n  max-width: calc(100% - 20px);\n  padding-top: 60px;\n\n  .page {\n\n    h3 {\n      color: $primary-color;\n      line-height: 1.5em;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./IOSVersionAlertModal.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./IOSVersionAlertModal.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./IOSVersionAlertModal.vue?vue&type=template&id=6399457b\"\nimport script from \"./IOSVersionAlertModal.vue?vue&type=script&lang=ts\"\nexport * from \"./IOSVersionAlertModal.vue?vue&type=script&lang=ts\"\nimport style0 from \"./IOSVersionAlertModal.vue?vue&type=style&index=0&id=6399457b&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"api-config-modal-container\"},[_c('app-modal',{attrs:{\"open\":_vm.open,\"dismiss\":_vm.dismiss}},[_c('div',{staticClass:\"page\"},[_c('h2',[_vm._v(\"API 設定\")]),_c('div',{staticClass:\"form-section\"},[_c('label',{attrs:{\"for\":\"api-url-input\"}},[_vm._v(\"API 基礎網址\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.apiUrl),expression:\"apiUrl\"}],staticClass:\"url-input\",attrs:{\"id\":\"api-url-input\",\"type\":\"text\",\"placeholder\":_vm.defaultUrl,\"data-testid\":\"api-url-input\"},domProps:{\"value\":(_vm.apiUrl)},on:{\"input\":function($event){if($event.target.composing)return;_vm.apiUrl=$event.target.value}}}),_c('small',{staticClass:\"help-text\"},[_vm._v(\" 留空將使用預設值：\"+_vm._s(_vm.defaultUrl)+\" \")])]),_c('div',{staticClass:\"button-section\"},[_c('app-button',{attrs:{\"data-testid\":\"save-button\"},on:{\"click\":_vm.saveConfiguration}},[_vm._v(\" 儲存設定 \")]),_c('app-button',{attrs:{\"outline\":true,\"data-testid\":\"reset-button\"},on:{\"click\":_vm.resetToDefault}},[_vm._v(\" 重置為預設值 \")])],1),_c('div',{staticClass:\"current-config\"},[_c('strong',[_vm._v(\"目前使用的 API 網址：\")]),_c('span',{staticClass:\"current-url\"},[_vm._v(_vm._s(_vm.currentUrl))])])])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"api-config-modal-container\">\n    <app-modal :open=\"open\" :dismiss=\"dismiss\">\n      <div class=\"page\">\n        <h2>API 設定</h2>\n\n        <div class=\"form-section\">\n          <label for=\"api-url-input\">API 基礎網址</label>\n          <input\n            id=\"api-url-input\"\n            v-model=\"apiUrl\"\n            type=\"text\"\n            :placeholder=\"defaultUrl\"\n            class=\"url-input\"\n            data-testid=\"api-url-input\"\n          />\n          <small class=\"help-text\">\n            留空將使用預設值：{{ defaultUrl }}\n          </small>\n        </div>\n\n        <div class=\"button-section\">\n          <app-button @click=\"saveConfiguration\" data-testid=\"save-button\">\n            儲存設定\n          </app-button>\n          <app-button\n            @click=\"resetToDefault\"\n            :outline=\"true\"\n            data-testid=\"reset-button\"\n          >\n            重置為預設值\n          </app-button>\n        </div>\n\n        <div class=\"current-config\">\n          <strong>目前使用的 API 網址：</strong>\n          <span class=\"current-url\">{{ currentUrl }}</span>\n        </div>\n      </div>\n    </app-modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport AppModal from '@/components/AppModal.vue'\nimport AppButton from '@/components/AppButton.vue'\nimport { defineComponent, ref, computed } from 'vue'\nimport {\n  getDefaultBaseURL,\n  getCustomBaseURL,\n  setCustomBaseURL,\n  resetToDefaultBaseURL,\n  currentBaseURL\n} from '@/lib/apiConfig'\n\nexport default defineComponent({\n  name: 'ApiConfigModal',\n  components: {\n    AppModal,\n    AppButton\n  },\n  props: {\n    open: {\n      type: Boolean,\n      default: false\n    },\n    dismiss: {\n      type: Function\n    }\n  },\n  setup (props) {\n    const apiUrl = ref(getCustomBaseURL() || '')\n    const defaultUrl = getDefaultBaseURL()\n    const currentUrl = computed(() => currentBaseURL.value)\n\n    const saveConfiguration = () => {\n      const url = apiUrl.value.trim()\n      if (url) {\n        setCustomBaseURL(url)\n      } else {\n        resetToDefaultBaseURL()\n      }\n\n      if (props.dismiss) {\n        props.dismiss()\n      }\n    }\n\n    const resetToDefault = () => {\n      apiUrl.value = ''\n      resetToDefaultBaseURL()\n\n      if (props.dismiss) {\n        props.dismiss()\n      }\n    }\n\n    return {\n      apiUrl,\n      defaultUrl,\n      currentUrl,\n      saveConfiguration,\n      resetToDefault\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/variables';\n@import '@/styles/page';\n\n.api-config-modal-container .app-modal {\n  max-width: 500px;\n  width: 90%;\n\n  .page {\n    h2 {\n      color: $primary-color;\n      margin-bottom: 20px;\n      text-align: center;\n    }\n\n    .form-section {\n      margin-bottom: 20px;\n\n      label {\n        display: block;\n        margin-bottom: 8px;\n        font-weight: bold;\n        color: $font-color;\n      }\n\n      .url-input {\n        width: 100%;\n        padding: 12px;\n        border: 2px solid $gray-light-color;\n        border-radius: 4px;\n        font-size: 16px;\n\n        &:focus {\n          outline: none;\n          border-color: $primary-color;\n        }\n      }\n\n      .help-text {\n        display: block;\n        margin-top: 6px;\n        color: $gray-light-color;\n        font-size: 14px;\n        line-height: 1.4;\n      }\n    }\n\n    .button-section {\n      display: flex;\n      gap: 10px;\n      margin-bottom: 20px;\n      flex-wrap: wrap;\n\n      .app-button {\n        flex: 1;\n        min-width: 120px;\n      }\n    }\n\n    .current-config {\n      padding: 15px;\n      background-color: #f5f5f5;\n      border-radius: 4px;\n      font-size: 14px;\n      line-height: 1.4;\n\n      .current-url {\n        display: block;\n        margin-top: 5px;\n        word-break: break-all;\n        color: $primary-color;\n        font-family: monospace;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ApiConfigModal.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./ApiConfigModal.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./ApiConfigModal.vue?vue&type=template&id=dfcdf030&scoped=true\"\nimport script from \"./ApiConfigModal.vue?vue&type=script&lang=ts\"\nexport * from \"./ApiConfigModal.vue?vue&type=script&lang=ts\"\nimport style0 from \"./ApiConfigModal.vue?vue&type=style&index=0&id=dfcdf030&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dfcdf030\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c,_setup=_vm._self._setupProxy;return _c('div',{staticClass:\"maintenance-modal-container\"},[_c('app-modal',{attrs:{\"open\":_vm.open,\"dismiss\":_vm.dismiss}},[_c('div',{staticClass:\"page\"},[_c('h2',[_vm._v(\"🔧【系統維修中！】\")]),_c('div',{staticClass:\"icon-section\"},[_c('v-icon',{attrs:{\"color\":\"warning\",\"size\":\"48\"}},[_vm._v(\"mdi-alert\")])],1),_c('div',{staticClass:\"message-section\"},[_c('p',{staticClass:\"main-message\"},[_vm._v(\" 目前上傳圖片功能受限，暫時停止回報功能，敬請見諒！ \")]),_c('p',{staticClass:\"detail-message\"},[_vm._v(\" 各位使用 disfactory.tw 的朋友們好，我們近期接獲多位使用者反映，在檢舉違章工廠時無法成功上傳圖片。\"),_c('br'),_c('br'),_vm._v(\" 經確認原因為目前使用的圖片託管平台，自 2025 年 5 月中起限制上傳，導致我們的網站無法順利將民眾上傳的照片轉存，因此現在暫時停止回報的功能。\"),_c('br'),_c('br'),_vm._v(\" 目前我們正在嘗試修復此問題，並會盡快更新系統，恢復回報功能。\"),_c('br'),_c('br'),_vm._v(\" 感謝大家的理解！ \")])]),_c('div',{staticClass:\"button-section\"},[_c('app-button',{attrs:{\"data-testid\":\"close-button\"},on:{\"click\":_vm.dismiss}},[_vm._v(\" 關閉 \")])],1)])])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"maintenance-modal-container\">\n    <app-modal :open=\"open\" :dismiss=\"dismiss\">\n      <div class=\"page\">\n        <h2>🔧【系統維修中！】</h2>\n        <div class=\"icon-section\">\n          <v-icon color=\"warning\" size=\"48\">mdi-alert</v-icon>\n        </div>\n        <div class=\"message-section\">\n          <p class=\"main-message\">\n            目前上傳圖片功能受限，暫時停止回報功能，敬請見諒！\n          </p>\n          <p class=\"detail-message\">\n            各位使用 disfactory.tw 的朋友們好，我們近期接獲多位使用者反映，在檢舉違章工廠時無法成功上傳圖片。<br><br>\n            經確認原因為目前使用的圖片託管平台，自 2025 年 5 月中起限制上傳，導致我們的網站無法順利將民眾上傳的照片轉存，因此現在暫時停止回報的功能。<br><br>\n            目前我們正在嘗試修復此問題，並會盡快更新系統，恢復回報功能。<br><br>\n            感謝大家的理解！\n          </p>\n        </div>\n        <div class=\"button-section\">\n          <app-button @click=\"dismiss\" data-testid=\"close-button\">\n            關閉\n          </app-button>\n        </div>\n      </div>\n    </app-modal>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nimport AppModal from './AppModal.vue'\nimport AppButton from './AppButton.vue'\nimport { VIcon } from 'vuetify/lib/components'\n\nexport default defineComponent({\n  name: 'MaintenanceModal',\n  components: { AppModal, AppButton, VIcon },\n  props: {\n    open: {\n      type: Boolean,\n      required: true\n    },\n    dismiss: {\n      type: Function,\n      required: true\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n@import '@/styles/variables';\n\n.maintenance-modal-container :deep(.app-modal) {\n  top: 25px;\n  max-height: calc(100% - 50px);\n  max-width: 600px;\n  width: calc(100% - 40px);\n\n  .page {\n    h2 {\n      color: $primary-color;\n      margin-bottom: 20px;\n      text-align: center;\n    }\n\n    .icon-section {\n      display: flex;\n      justify-content: center;\n      margin-bottom: 16px;\n    }\n\n    .message-section {\n      margin-bottom: 20px;\n\n      .main-message {\n        font-weight: bold;\n        color: #222 !important;\n        margin-bottom: 16px;\n        font-size: 18px;\n      }\n\n      .detail-message {\n        color: #333 !important;\n        font-size: 15px;\n        line-height: 1.8;\n      }\n    }\n\n    .button-section {\n      display: flex;\n      justify-content: center;\n      .app-button {\n        min-width: 120px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MaintenanceModal.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MaintenanceModal.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./MaintenanceModal.vue?vue&type=template&id=70218e3d&scoped=true\"\nimport script from \"./MaintenanceModal.vue?vue&type=script&lang=ts\"\nexport * from \"./MaintenanceModal.vue?vue&type=script&lang=ts\"\nimport style0 from \"./MaintenanceModal.vue?vue&type=style&index=0&id=70218e3d&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70218e3d\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <v-app>\n    <v-app-bar app color=\"primary\" dark clipped-right v-show=\"appState.isInitialState || (appState.isEditFactoryMode && $vuetify.breakpoint.mdAndUp)\">\n      <v-btn icon class=\"d-sm-none\" style=\"visibility: hidden;\">\n        <v-icon>mdi-temp</v-icon>\n      </v-btn>\n      <v-spacer class=\"d-sm-none\" />\n      <v-toolbar-title>農地工廠回報</v-toolbar-title>\n      <v-spacer />\n      <div class=\"d-none d-sm-flex\">\n        <v-btn text @click=\"modalActions.openTutorialModal\">\n          使用教學\n        </v-btn>\n        <v-btn text @click=\"modalActions.openSafetyModal\">\n          安全須知\n        </v-btn>\n        <v-btn text @click=\"modalActions.openContactModal\">\n          聯絡我們\n        </v-btn>\n        <v-btn text href=\"https://about.disfactory.tw/#question\">\n          常見問題\n        </v-btn>\n        <v-btn text href=\"https://about.disfactory.tw\" target=\"_blank\">\n          關於回報系統\n        </v-btn>\n        <v-btn text href=\"https://airtable.com/shrUraKakZRpH52DO\" target=\"_blank\">\n          問題回報\n        </v-btn>\n      </div>\n      <v-app-bar-nav-icon class=\"d-flex d-sm-none\" @click=\"drawer = !drawer\" />\n    </v-app-bar>\n    <v-navigation-drawer v-model=\"drawer\" app right temporary class=\"app-sidebar\">\n      <v-list\n        nav\n        dense\n      >\n        <v-list-item-group\n          active-class=\"deep-purple--text text--accent-4\"\n        >\n          <v-list-item @click=\"modalActions.openTutorialModal\">\n            <v-list-item-title>使用教學</v-list-item-title>\n          </v-list-item>\n\n          <v-list-item @click=\"modalActions.openSafetyModal\">\n            <v-list-item-title>安全須知</v-list-item-title>\n          </v-list-item>\n\n          <v-list-item @click=\"modalActions.openContactModal\">\n            <v-list-item-title>聯絡我們</v-list-item-title>\n          </v-list-item>\n\n          <v-list-item href=\"https://about.disfactory.tw/#section-f_c360c8de-447e-4c0a-a856-4af18b9a5240\" target=\"_blank\">\n            <v-list-item-title></v-list-item-title>\n          </v-list-item>\n\n          <v-list-item href=\"https://about.disfactory.tw\" target=\"_blank\">\n            <v-list-item-title>關於回報系統</v-list-item-title>\n          </v-list-item>\n\n          <v-list-item href=\"https://airtable.com/shrUraKakZRpH52DO\" target=\"_blank\">\n            <v-list-item-title>問題回報</v-list-item-title>\n          </v-list-item>\n        </v-list-item-group>\n      </v-list>\n    </v-navigation-drawer>\n\n    <v-main style=\"max-height: 100%; height: 100%;\">\n      <!-- alert or modal -->\n      <app-alert :alert=\"alertState.alert\" :dismiss=\"alertActions.dismissAlert\" />\n\n      <v-dialog v-model=\"modalState.createFactorySuccessModal\" max-width=\"305\">\n        <v-card class=\"text-center pt-5\">\n          <v-icon color=\"primary\" style=\"font-size: 80px;\">\n            mdi-checkbox-marked-circle\n          </v-icon>\n          <v-card-title class=\"secondary--text justify-center\">\n            新增可疑工廠成功\n          </v-card-title>\n          <v-card-text>\n            <small>\n              3 秒後自動關閉提示訊息\n            </small>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n\n      <v-dialog v-model=\"modalState.updateFactoryImageSuccessModal\" max-width=\"305\">\n        <v-card class=\"text-center pt-5\">\n          <v-icon color=\"primary\" style=\"font-size: 80px;\">\n            mdi-checkbox-marked-circle\n          </v-icon>\n          <v-card-title class=\"secondary--text justify-center\">\n            補充工廠照片成功\n          </v-card-title>\n          <v-card-text>\n            <small>\n              3 秒後自動關閉提示訊息\n            </small>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n\n      <v-dialog v-model=\"modalState.updateFactorySuccessModal\" max-width=\"305\">\n        <v-card class=\"text-center pt-5\">\n          <v-icon color=\"primary\" style=\"font-size: 80px;\">\n            mdi-checkbox-marked-circle\n          </v-icon>\n          <v-card-title class=\"secondary--text justify-center\">\n            補充工廠資訊成功\n          </v-card-title>\n          <v-card-text>\n            <small>\n              3 秒後自動關閉提示訊息\n            </small>\n          </v-card-text>\n        </v-card>\n      </v-dialog>\n\n      <about-modal :open=\"modalState.aboutModalOpen\" :dismiss=\"modalActions.closeAboutModal\" />\n      <contact-modal :open=\"modalState.contactModalOpen\" :dismiss=\"modalActions.closeContactModal\" />\n      <getting-started-modal :open=\"modalState.gettingStartedModalOpen\" :dismiss=\"modalActions.closeGettingStartedModal\" />\n      <safety-modal v-model=\"modalState.safetyModalOpen\" />\n      <tutorial-modal :open=\"modalState.tutorialModalOpen\" :dismiss=\"modalActions.closeTutorialModal\" />\n      <ios-version-modal :open=\"modalState.supportIOSVersionModalOpen\" :dismiss=\"modalActions.closesupportIOSVersionModal\" />\n      <api-config-modal :open=\"modalState.apiConfigModalOpen\" :dismiss=\"modalActions.closeApiConfigModal\" />\n      <!-- alert or modal -->\n      <MapView\n        :setFactoryLocation=\"appActions.setFactoryLocation\"\n      />\n\n      <create-factory-steps v-if=\"appState.isCreateMode\" />\n      <update-factory-steps v-if=\"appState.isEditMode\" />\n    </v-main>\n\n  <factory-detail-page />\n  <maintenance-modal :open=\"maintenanceModalOpen\" :dismiss=\"dismissMaintenanceModal\" />\n  </v-app>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, provide } from 'vue'\n\nimport MapView from '@/components/Map.vue'\nimport AppAlert from '@/components/AppAlert.vue'\nimport CreateFactorySteps from '@/components/CreateFactorySteps.vue'\nimport UpdateFactorySteps from '@/components/UpdateFactorySteps.vue'\nimport FactoryDetailPage from '@/components/FactoryDetailPage.vue'\n\nimport AboutModal from '@/components/AboutModal.vue'\nimport ContactModal from '@/components/ContactModal.vue'\nimport GettingStartedModal from '@/components/GettingStartedModal.vue'\nimport TutorialModal from '@/components/TutorialModal.vue'\nimport SafetyModal from '@/components/SafetyModal.vue'\nimport IosVersionModal from '@/components/IOSVersionAlertModal.vue'\nimport ApiConfigModal from '@/components/ApiConfigModal.vue'\n\nimport { MapFactoryController } from './lib/map'\nimport { MainMapControllerSymbol } from './symbols'\nimport { useModalState } from './lib/hooks'\nimport { useAppState } from './lib/appState'\nimport { useAlertState } from './lib/useAlert'\n\nimport MaintenanceModal from './components/MaintenanceModal.vue'\n\nexport default defineComponent({\n  name: 'App',\n  components: {\n    MapView,\n    AppAlert,\n    AboutModal,\n    ContactModal,\n    GettingStartedModal,\n    SafetyModal,\n    TutorialModal,\n    IosVersionModal,\n    ApiConfigModal,\n    CreateFactorySteps,\n    UpdateFactorySteps,\n    FactoryDetailPage,\n    MaintenanceModal\n  },\n  setup () {\n    const [modalState, modalActions] = useModalState()\n    const [appState, appActions] = useAppState()\n    const [alertState, alertActions] = useAlertState()\n\n    // register global accessible map instance\n    provide(MainMapControllerSymbol, ref<MapFactoryController | null>(null))\n\n    // Note: API config modal functionality removed for simplification\n\n    const drawer = ref(false)\n\n    // Show maintenance modal on app start, allow closing\n    const maintenanceModalOpen = ref(true)\n    const dismissMaintenanceModal = () => {\n      maintenanceModalOpen.value = false\n    }\n    return {\n      appState,\n      alertState,\n      alertActions,\n      appActions,\n      modalState,\n      modalActions,\n      drawer,\n      maintenanceModalOpen,\n      dismissMaintenanceModal\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\">\n@import '~@/styles/index';\n\n@supports (-webkit-touch-callout: none) {\n  .v-application {\n    height: -webkit-fill-available;\n    overflow: hidden;\n  }\n\n  .v-application--wrap {\n    min-height: unset !important;\n    max-height: 100%;\n  }\n}\n\n.app-sidebar {\n  .v-list-item--dense .v-list-item__title, .v-list-item--dense .v-list-item__subtitle, .v-list--dense .v-list-item .v-list-item__title, .v-list--dense .v-list-item .v-list-item__subtitle {\n    font-size: 16px;\n  }\n}\n\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??clonedRuleSet-41.use[0]!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??clonedRuleSet-41.use[3]!../node_modules/cache-loader/dist/cjs.js??ruleSet[0].use[0]!../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=1dc57fe4\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=1dc57fe4&prod&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","/* eslint-disable no-console */\n\nimport { register } from 'register-service-worker'\n\nif (process.env.NODE_ENV === 'production') {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready () {\n      console.log(\n        'App is being served from cache by a service worker.\\n' +\n        'For more details, visit https://goo.gl/AFskqB'\n      )\n    },\n    registered () {\n      console.log('Service worker has been registered.')\n    },\n    cached () {\n      console.log('Content has been cached for offline use.')\n    },\n    updatefound () {\n      console.log('New content is downloading.')\n    },\n    updated () {\n      console.log('New content is available; please refresh.')\n    },\n    offline () {\n      console.log('No internet connection found. App is running in offline mode.')\n    },\n    error (error) {\n      console.error('Error during service worker registration:', error)\n    }\n  })\n}\n","import Vue from 'vue'\nimport Vuetify from 'vuetify/lib'\nimport colors from 'vuetify/lib/util/colors'\n\nVue.use(Vuetify)\n\nexport default new Vuetify({\n  theme: {\n    themes: {\n      light: {\n        primary: '#697F01',\n        secondary: '#364516',\n        accent: colors.green.base\n      }\n    }\n  }\n})\n","import Vue from 'vue'\nimport App from './App.vue'\nimport CoolLightBox from 'vue-cool-lightbox'\n\nimport './registerServiceWorker'\nimport VueGtag from 'vue-gtag'\nimport vuetify from './plugins/vuetify'\n\nimport 'vue-cool-lightbox/dist/vue-cool-lightbox.min.css'\n\nVue.config.productionTip = false\nVue.use(CoolLightBox)\n\nVue.use(VueGtag, {\n  config: { id: 'UA-154739393-1' },\n  enabled: process.env.NODE_ENV === 'production'\n})\n\nnew Vue({\n  vuetify,\n  render: (h) => h(App)\n}).$mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkfrontend\"] = self[\"webpackChunkfrontend\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(14217); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["BASE_MAP","staticClass","staticStyle","_c","attrs","on","_vm","_v","drawer","model","value","callback","alertActions","dismissAlert","modalState","expression","aboutModalOpen","modalActions","closeAboutModal","tutorialModalOpen","closeTutorialModal","supportIOSVersionModalOpen","closesupportIOSVersionModal","closeApiConfigModal","appState","maintenanceModalOpen","staticRenderFns","_setup","class","desktop","$vuetify","breakpoint","mdAndUp","_e","zoomToGeolocation","_setupProxy","scopedSlots","isOpen","$$v","isLUIMapVisable","click","$event","key","MainMapControllerSymbol","Symbol","_ref","isInSheet","mapModeBottomSheet","type","currentMapMode","FACTORY_TYPE","text","defaultFactoryDisplayStatuses","FactoryDisplayStatuses","name","documentDisplayStatuses","color","FactoryDisplayStatusMap","reduce","acc","c","Object","assign","_defineProperty","getDisplayStatusText","status","getDisplayStatusColor","canvas","window","OffscreenCanvas","document","createElement","ctx","getContext","createImageProcessor","processor","src","Promise","resolve","image","Image","crossOrigin","style","display","onload","__awaiter","_regeneratorRuntime","mark","_callee","imageData","data","tmpCanvas","tmpCtx","wrap","_context","prev","next","width","height","clearRect","drawImage","getImageData","putImageData","toDataURL","remove","stop","argriculturalLandColors","i","length","avg","isArrayEqual","a","b","some","v","isArgriculturalLand","arr","flipArgriculturalLand","Array","from","slice","baseStyle","version","sources","protomaps","tiles","minzoom","maxzoom","attribution","layers","id","paint","source","filter","layout","base","stops","featurePointCachedByCoord","Map","FactoryPointCache","_classCallCheck","_createClass","factory","concat","lat","lng","get","this","getFactoryCacheKey","feature","set","getFactoryStatusImage","getStatusBorderColor","_a","find","s","getFactoryStatus","wont_fix","document_display_status","includes","BASE_MAP_NAME","OSM","TAIWAN","SATELITE","PROTOMAP","makeMapButtons","entries","zoomIn","zoomOut","_ref2","_slicedToArray","label","setAttribute","iconStyleMap","Style","Icon","anchorYUnits","IconAnchorUnits","PIXELS","anchorOrigin","IconOrigin","BOTTOM_LEFT","zIndex","indexOf","nullStyle","minimapPinStyle","Circle","fill","Fill","radius","stroke","Stroke","featureStyleCache","MapFactoryController","map","appliedFilters","factoryMap","_map","_factoriesLayerStatusMap","_toConsumableArray","values","factoryStatus","_this","CLUSTER_DISTANCE","VectorSource","features","clusterSource","Cluster","distance","styleCache","vectorLayer","VectorLayer","resolution","zoom","mapInstance","getView","getZoom","clusterDistance","getDistance","setDistance","size","Text","toString","scale","factoryFeature","getStyle","setProperties","addLayer","getFactoriesLayerForStatus","getFeatureById","getFactoryStyle","clone","setStyle","factories","_this2","createFactoryFeature","bind","factoriesToAdd","factoriesToUpdate","forEach","has","push","Boolean","featuresByFactoryStatus","_ref3","_ref4","addFeatures","_this3","filters","updateFactoriesFeatureStyle","visible","isFactoryVisible","existingFeature","getFactoryCache","Feature","geometry","Point","transform","setId","setFactoryCache","fn","_this4","_ref5","_ref6","layerSource","getFeatures","getId","forEachFeatureFactory","_this5","getWMTSTileGrid","projection","getProjection","projectionExtent","getExtent","resolutions","getWidth","matrixIds","z","Math","pow","WMTSTileGrid","origin","getTopLeft","getBaseLayer","wmtsTileGrid","taiwanExtent","transformExtent","layer","VectorTileLayer","VectorTileSource","attributions","format","MVT","url","process","VUE_APP_PROTOMAP_SOURCE_URL","maxZoom","opacity","renderMode","VectorTileRenderType","VECTOR","setExtent","stylefunction","WMTS","matrixSet","tileGrid","wrapX","requestEncoding","TileLayer","getLUIMapLayer","tileLoadFunction","imageTile","getImage","then","newSrc","className","OLMap","target","handler","arguments","undefined","options","hasInitialLocation","mapDom","baseLayer","instantiateOLMap","minimap","geolocation","setupGeolocationTracking","setupEventListeners","_this6","move","view","range","_transform","_transform2","_this$mapDom$getBound","canPlace","getResolutionForZoom","ceil","getCenter","onMoved","getBoundingClientRect","canPlaceFactory","sent","onZoomed","event","_callee2","_transform3","_transform4","_context2","onClicked","coordinate","forEachFeatureAtPixel","pixel","layerFilter","getZIndex","dragging","getTargetElement","cursor","hasFeatureAtPixel","getEventPixel","originalEvent","getLUIMAPLayer","onLUILayerVisibilityChange","getVisible","longitude","latitude","setCenter","setZoom","location","getInitialLocation","_location","_location2","View","center","mapControlButtons","mapOptions","controls","Zoom","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","ScaleLine","Rotate","Attribution","interactions","defaultInteractions","pinchRotate","extend","PinchRotate","threshold","OlMap","Geolocation","trackingOptions","enableHighAccuracy","setTracking","positionLayer","setupGeolocationLayer","_this7","positionFeature","getPositionStyles","heading","Number","isNaN","anchor","rotation","rotateWithView","NaN","coordinates","getPosition","setGeometry","getHeading","accuracyFeature","getAccuracyGeometry","run","position","Error","removeLayer","resolved","check","_this8","forEachLayerAtPixel","_","_data","getClassName","_context3","_callee3","getLayers","_layer","getProperties","layer_","TypeError","setVisible","minimapPinFeature","initializeMap","changeBaseMap","initializeMinimap","mapModeSymbol","useMapMode","context","inject","defineComponent","props","default","setup","ref","mapController","_useMapMode","currentMapMode$","computed","mapModes","currentMapModeName","_b","mode","component","components","SwitchMapModeButton","isLUIMapVisable$","getLUILayerVisible","setLUILayerVisible","API_BASE_URL_KEY","defaultBaseURL","customBaseURL","localStorage","getItem","currentBaseURL","getDefaultBaseURL","setCustomBaseURL","setItem","resetToDefaultBaseURL","removeItem","getCustomBaseURL","instance","axios","headers","updateBaseURL","defaults","baseURL","getFactories","_yield$instance$get","abrupt","t0","console","error","getFactory","factoryId","_yield$instance$get2","watch","IMGUR_CLIENT_ID","uploadToImgur","file","formData","FormData","append","method","Authorization","_yield$axios","link","deletehash","convertTurple2Number","input","readImageExif","fileReader","FileReader","e","EXIF","result","GPSLatitude","Latitude","GPSLongitude","Longitude","DateTimeOriginal","readAsArrayBuffer","uploadExifAndGetToken","exifData","_context4","post","_yield$instance$post","token","URL","createObjectURL","_callee4","uploadImages","files","all","el","_context5","_callee5","updateFactoryImages","nickname","contact","_callee6","_yield$instance$post2","_context6","image_path","_context7","_callee7","createFactory","JSON","stringify","_yield$instance$post3","_context8","_callee8","updateFactory","factoryData","put","_yield$instance$put","_context9","_callee9","getFactoryReportRecords","_yield$instance$get3","_context10","_callee10","useGA","getCurrentInstance","gtag","proxy","$gtag","pageview","path","page_path","isiOS","navigator","userAgent","match","test","iOSversion","platform","appVersion","parseInt","join","isNotSupportedIOS","PageState","reactive","updateFactorySuccessModal","updateFactoryImageSuccessModal","createFactorySuccessModal","contactModalOpen","safetyModalOpen","gettingStartedModalOpen","apiConfigModalOpen","sidebarOpen","filterModalOpen","useModalState","_useGA","openUpdateFactoryImagesSuccessModal","setTimeout","openUpdateFactorySuccessModal","openCreateFactorySuccessModal","closeCreateFactorySuccessModal","openAboutModal","openContactModal","closeContactModal","openSafetyModal","closeSafetyModal","openGettingStartedModal","closeGettingStartedModal","openTutorialModal","openApiConfigModal","toggleSidebar","open","closeFilterModal","openFilterModal","AlertLevel","CreateFactoryPageState","CREATE_FACTORY_1","CREATE_FACTORY_2","CREATE_FACTORY_3","UpdateFactoryPageState","UPDATE_FACTORY_IMAGES","UPDATE_FACTORY_MODE","pageState","INITIAL","factoryLocation","isCreateMode","createStepIndex","isEditImagesMode","isEditFactoryMode","updateFactoryField","isEditComment","isEditName","isEditType","isEditMode","isInitialState","selectFactoryMode","formPageOpen","isInitialPage","mapLngLat","factoryDetailsExpanded","useAppState","invalidPageTransition","pageTransition","startCreateFactory","gotoNextCreate","index","nextCreateStep","previousCreateStep","cancelCreateFactory","gotoCreateStep","step","startUpdateFactoryImages","cancelUpdateFactoryImages","startUpdateFactoryComment","field","cancelUpdateFactoryComment","closeFactoryPage","updateFactoryData","expandFactoryDetail","collapseFactoryDetail","defaultStyle","toggleFactoryDetail","appActions","openEditFactoryForm","setFactoryLocation","alertState","alert","timeout","useAlertState","showAlert","title","timeouts","level","warn","dismissText","clearTimeout","parseHashParams","hash","hashContent","exec","split","kv","_kv$split","_kv$split2","stringifyHash","obj","fields","permalink","_class","defineGetterSetter","loc","_parseHashParams","m","parseFloat","f","toFixed","moveToSharedFactory","cb","others","__rest","addFactories","setCoordinate","waitNextTick","nextTick","DisplaySettingBottomSheet","Function","required","root","popup","mapControllerRef","_useModalState","_useModalState2","_useAppState","_useAppState2","_useAppState2$","_useAlertState","_useAlertState2","openFactoryDetail","resizeMap","updateSize","onClickEditFactoryData","onClickCreateFactoryButton","onMounted","popupOverlay","Overlay","element","positioning","OverlayPositioning","onClickFactoryFeature","_d","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","p","getGeometry","getCoordinates","loadNewFactories","debounce","isArray","dumps","load","addOverlay","addEventListener","onUnmounted","removeEventListener","checkActive","onClickFilterButton","comparableFactoryStatus","filterButtonsData","err","render","_self","dismiss","_s","discardDialog","rawName","inactive","switchStep","$set","locationInputState","clearLocationInput","chooseLocationDialog","setLocation","useImageUpload","uploadedImages","imageUploadState","uploading","selectedImages","images","catch","finally","onClickRemoveImage","imageUploadFormValid","useUpdateFactoryImage","previewImages","removeImage","submit","valid","formState","submitText","String","disableProgressiveUpload","onChange","emit","onSubmit","gotoStepOne","gotoStepTwo","$emit","initialLocation","pinLocation","initialFactories","_minimapController$ma","minimapController","setMinimapPin","apply","Minimap","emits","factoryTypeItems","useBackPressed","onBack","hideModal","state","history","pushState","once","ImageUploadForm","ConfirmFactory","createFactoryFormState","submitting","_useImageUpload","submitFactory","_appState$factoryLoca","resultFactory","finish","showLongLat","toggleShowLongLat","inlineLocationForm","toggleInlineLocationForm","num","backSteps","chooseLocation","imagesValid","imageSubmitting","smAndDown","updateFormTitle","factory_type","isCurrentFieldValid","cancelUpdateFactory","submitUpdateFactory","_useUpdateFactoryImag","imageUploadFormState","submitImageUpload","newImages","validStates","updateFormAppTitle","updateFormButton","full","directives","copyToClipboard","statusColor","nativeOn","factoryFollowups","factoryTypeMap","getFactoryTypeText","useScroll","scrollContainer","scrollTop","scrollLeft","onScroll","container","scrollElem","imageUrl","alt","onError","IMGUR_REGEX","imgurFallbackBaseUrl","imgurInfo","matches","ext","fallbackUrl","ImgurFallbackImage","prevImages","lightboxItems","description","lightboxIndex","setLightboxIndex","follow_ups_for_user","factoryStatusText","factoryDisplayStatus","documentDisplayStatus","display_number","factoryType","factoryName","factoryAddressAndLandcode","_appState$factoryData","townname","sectname","sectcode","landcode","factoryDetailScrollerRef","_useScroll","scrollOff","showCopiedMessage","_window$location","host","protocol","copy","slideGroup","onUpdated","content","$refs","startUpdateFactoryCommentFor","reportRecords","sort","Date","created_at","pastDescriptions","record","date","dateStr","getFullYear","getMonth","getDate","rec","lastUpdatedAt","reported_at","showCloseButton","_t","AppModal","agree","_objectSpread","outline","disabled","rect","small","auto","AppButton","onDismissClick","isAdd","isUpdate","openHome","isHome","openAdd","openUpdate","addImages","updateImages","Carousel","Slide","page","createCarousel","updateCarousel","goToPage","safetyModalState","apiUrl","defaultUrl","domProps","composing","saveConfiguration","resetToDefault","currentUrl","trim","VIcon","MapView","AppAlert","AboutModal","ContactModal","GettingStartedModal","SafetyModal","TutorialModal","IosVersionModal","ApiConfigModal","CreateFactorySteps","UpdateFactorySteps","FactoryDetailPage","MaintenanceModal","provide","dismissMaintenanceModal","register","ready","log","registered","cached","updatefound","updated","offline","Vue","use","Vuetify","theme","themes","light","primary","secondary","accent","colors","green","config","productionTip","CoolLightBox","VueGtag","enabled","vuetify","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","keys","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","g","globalThis","prop","prototype","hasOwnProperty","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}